/**
 * BizUI Framework
 * @version v1.2.0
 * @copyright 2015 Sogou, Inc.
 * @link https://github.com/bizdevfe/biz-ui
 */

/**
 * @license almond 0.3.1 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/*!
 * jQuery Placeholder Plugin v2.3.1
 * https://github.com/mathiasbynens/jquery-placeholder
 *
 * Copyright 2011, 2015 Mathias Bynens
 * Released under the MIT license
 */

!function(e,t){if("object"==typeof exports&&"object"==typeof module){var i=require("jquery");module.exports=t(i)}else"function"==typeof define&&define.amd?define(["jquery"],t):e.bizui=t(e.$)}(this,function(e){var t,i,s;return function(e){function n(e,t){return y.call(e,t)}function a(e,t){var i,s,n,a,r,o,d,l,h,c,u,f=t&&t.split("/"),p=b.map,g=p&&p["*"]||{};if(e&&"."===e.charAt(0))if(t){for(e=e.split("/"),r=e.length-1,b.nodeIdCompat&&w.test(e[r])&&(e[r]=e[r].replace(w,"")),e=f.slice(0,f.length-1).concat(e),h=0;h<e.length;h+=1)if(u=e[h],"."===u)e.splice(h,1),h-=1;else if(".."===u){if(1===h&&(".."===e[2]||".."===e[0]))break;h>0&&(e.splice(h-1,2),h-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((f||g)&&p){for(i=e.split("/"),h=i.length;h>0;h-=1){if(s=i.slice(0,h).join("/"),f)for(c=f.length;c>0;c-=1)if(n=p[f.slice(0,c).join("/")],n&&(n=n[s])){a=n,o=h;break}if(a)break;!d&&g&&g[s]&&(d=g[s],l=h)}!a&&d&&(a=d,o=l),a&&(i.splice(0,o,a),e=i.join("/"))}return e}function r(t,i){return function(){var s=x.call(arguments,0);return"string"!=typeof s[0]&&1===s.length&&s.push(null),f.apply(e,s.concat([t,i]))}}function o(e){return function(t){return a(t,e)}}function d(e){return function(t){_[e]=t}}function l(t){if(n(m,t)){var i=m[t];delete m[t],v[t]=!0,u.apply(e,i)}if(!n(_,t)&&!n(v,t))throw new Error("No "+t);return _[t]}function h(e){var t,i=e?e.indexOf("!"):-1;return i>-1&&(t=e.substring(0,i),e=e.substring(i+1,e.length)),[t,e]}function c(e){return function(){return b&&b.config&&b.config[e]||{}}}var u,f,p,g,_={},m={},b={},v={},y=Object.prototype.hasOwnProperty,x=[].slice,w=/\.js$/;p=function(e,t){var i,s=h(e),n=s[0];return e=s[1],n&&(n=a(n,t),i=l(n)),n?e=i&&i.normalize?i.normalize(e,o(t)):a(e,t):(e=a(e,t),s=h(e),n=s[0],e=s[1],n&&(i=l(n))),{f:n?n+"!"+e:e,n:e,pr:n,p:i}},g={require:function(e){return r(e)},exports:function(e){var t=_[e];return"undefined"!=typeof t?t:_[e]={}},module:function(e){return{id:e,uri:"",exports:_[e],config:c(e)}}},u=function(t,i,s,a){var o,h,c,u,f,b,y=[],x=typeof s;if(a=a||t,"undefined"===x||"function"===x){for(i=!i.length&&s.length?["require","exports","module"]:i,f=0;f<i.length;f+=1)if(u=p(i[f],a),h=u.f,"require"===h)y[f]=g.require(t);else if("exports"===h)y[f]=g.exports(t),b=!0;else if("module"===h)o=y[f]=g.module(t);else if(n(_,h)||n(m,h)||n(v,h))y[f]=l(h);else{if(!u.p)throw new Error(t+" missing "+h);u.p.load(u.n,r(a,!0),d(h),{}),y[f]=_[h]}c=s?s.apply(_[t],y):void 0,t&&(o&&o.exports!==e&&o.exports!==_[t]?_[t]=o.exports:c===e&&b||(_[t]=c))}else t&&(_[t]=s)},t=i=f=function(t,i,s,n,a){if("string"==typeof t)return g[t]?g[t](i):l(p(t,i).f);if(!t.splice){if(b=t,b.deps&&f(b.deps,b.callback),!i)return;i.splice?(t=i,i=s,s=null):t=e}return i=i||function(){},"function"==typeof s&&(s=n,n=a),n?u(e,t,i,s):setTimeout(function(){u(e,t,i,s)},4),f},f.config=function(e){return f(e)},t._defined=_,s=function(e,t,i){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(i=t,t=[]),n(_,e)||n(m,e)||(m[e]=[e,t,i])},s.amd={jQuery:!0}}(),s("../node_modules/almond/almond",function(){}),s("ui/Button",["require"],function(t){function i(t,i){if(t instanceof jQuery){if(!(t.length>0))return;t=t[0]}s(t)&&(this.main=t,this.$main=e(this.main),this.options=e.extend({},i||{}),this.init(this.options))}function s(e){return 1===e.nodeType&&"button"===e.tagName.toLowerCase()}var n="biz-button",a="biz-button-disable",r="biz-button-";i.prototype={init:function(e){this.$main.addClass(n),e.theme&&this.$main.addClass(r+e.theme),e.label&&this.$main.html(e.label),e.disabled&&this.disable()},enable:function(){this.main.disabled=!1,this.$main.removeClass(a)},disable:function(){this.main.disabled=!0,this.$main.addClass(a)},destroy:function(){this.$main.removeClass(n+" "+a),this.options.theme&&this.$main.removeClass(r+this.options.theme)}};var o="bizButton";return e.extend(e.fn,{bizButton:function(t,n){var a;switch(t){case"enable":this.each(function(){a=e(this).data(o),a&&a.enable()});break;case"disable":this.each(function(){a=e(this).data(o),a&&a.disable()});break;case"destroy":this.each(function(){a=e(this).data(o),a&&(a.destroy(),e(this).data(o,null))});break;default:this.each(function(){!e(this).data(o)&&s(this)&&e(this).data(o,new i(this,t))})}return this}}),i}),function(t){t(jQuery||e)}(function(e){function t(t){var i={},s=/^jQuery\d+$/;return e.each(t.attributes,function(e,t){t.specified&&!s.test(t.name)&&(i[t.name]=t.value)}),i}function i(t,i){var s=this,a=e(this);if(s.value===a.attr(o?"placeholder-x":"placeholder")&&a.hasClass(f.customClass))if(s.value="",a.removeClass(f.customClass),a.data("placeholder-password")){if(a=a.hide().nextAll('input[type="password"]:first').show().attr("id",a.removeAttr("id").data("placeholder-id")),t===!0)return a[0].value=i,i;a.focus()}else s==n()&&s.select()}function s(s){var n,a=this,r=e(this),d=a.id;if(!s||"blur"!==s.type||!r.hasClass(f.customClass))if(""===a.value){if("password"===a.type){if(!r.data("placeholder-textinput")){try{n=r.clone().prop({type:"text"})}catch(l){n=e("<input>").attr(e.extend(t(this),{type:"text"}))}n.removeAttr("name").data({"placeholder-enabled":!0,"placeholder-password":r,"placeholder-id":d}).bind("focus.placeholder",i),r.data({"placeholder-textinput":n,"placeholder-id":d}).before(n)}a.value="",r=r.removeAttr("id").hide().prevAll('input[type="text"]:first').attr("id",r.data("placeholder-id")).show()}else{var h=r.data("placeholder-password");h&&(h[0].value="",r.attr("id",r.data("placeholder-id")).show().nextAll('input[type="password"]:last').hide().removeAttr("id"))}r.addClass(f.customClass),r[0].value=r.attr(o?"placeholder-x":"placeholder")}else r.removeClass(f.customClass)}function n(){try{return document.activeElement}catch(e){}}var a,r,o=!1,d="[object OperaMini]"===Object.prototype.toString.call(window.operamini),l="placeholder"in document.createElement("input")&&!d&&!o,h="placeholder"in document.createElement("textarea")&&!d&&!o,c=e.valHooks,u=e.propHooks,f={};l&&h?(r=e.fn.placeholder=function(){return this},r.input=!0,r.textarea=!0):(r=e.fn.placeholder=function(t){var n={customClass:"placeholder"};return f=e.extend({},n,t),this.filter((l?"textarea":":input")+"["+(o?"placeholder-x":"placeholder")+"]").not("."+f.customClass).not(":radio, :checkbox, [type=hidden]").bind({"focus.placeholder":i,"blur.placeholder":s}).data("placeholder-enabled",!0).trigger("blur.placeholder")},r.input=l,r.textarea=h,a={get:function(t){var i=e(t),s=i.data("placeholder-password");return s?s[0].value:i.data("placeholder-enabled")&&i.hasClass(f.customClass)?"":t.value},set:function(t,a){var r,o,d=e(t);return""!==a&&(r=d.data("placeholder-textinput"),o=d.data("placeholder-password"),r?(i.call(r[0],!0,a)||(t.value=a),r[0].value=a):o&&(i.call(t,!0,a)||(o[0].value=a),t.value=a)),d.data("placeholder-enabled")?(""===a?(t.value=a,t!=n()&&s.call(t)):(d.hasClass(f.customClass)&&i.call(t),t.value=a),d):(t.value=a,d)}},l||(c.input=a,u.value=a),h||(c.textarea=a,u.value=a),e(function(){e(document).delegate("form","submit.placeholder",function(){var t=e("."+f.customClass,this).each(function(){i.call(this,!0,"")});setTimeout(function(){t.each(s)},10)})}),e(window).bind("beforeunload.placeholder",function(){var t=!0;try{"javascript:void(0)"===document.activeElement.toString()&&(t=!1)}catch(i){}t&&e("."+f.customClass).each(function(){this.value=""})}))}),s("dep/jquery.placeholder.js",function(){}),s("ui/Input",["require","dep/jquery.placeholder.js"],function(t){function i(t,i){if(t instanceof jQuery){if(!(t.length>0))return;t=t[0]}s(t)&&(this.main=t,this.$main=e(this.main),this.options=e.extend({},i||{}),this.init(this.options))}function s(e){return 1===e.nodeType&&"input"===e.tagName.toLowerCase()&&(!e.getAttribute("type")||"text"===e.getAttribute("type").toLowerCase())}t("dep/jquery.placeholder.js");var n="biz-input",a="biz-input-disable",r="biz-input-hover",o="biz-input-focus";i.prototype={init:function(t){this.$main.addClass(n),t.disabled&&this.disable();var i=this;this.$main.on("keydown.bizInput",function(e){return 13===e.keyCode?(t.onEnter&&t.onEnter.call(i,e),!1):void 0}),this.$main.on("mouseover.bizInput",function(t){e(this).addClass(r)}).on("mouseout.bizInput",function(t){e(this).removeClass(r)}).on("focus.bizInput",function(t){e(this).addClass(o)}).on("blur.bizInput",function(t){e(this).removeClass(o)}),this.$main.placeholder({customClass:"placeholder"})},enable:function(){this.main.disabled=!1,this.$main.removeClass(a)},disable:function(){this.main.disabled=!0,this.$main.addClass(a)},destroy:function(){this.$main.removeClass(n+" "+a),this.$main.off("keydown.bizInput").off("mouseover.bizInput").off("mouseout.bizInput").off("focus.bizInput").off("blur.bizInput")}};var d="bizInput";return e.extend(e.fn,{bizInput:function(t,n){var a;switch(t){case"enable":this.each(function(){a=e(this).data(d),a&&a.enable()});break;case"disable":this.each(function(){a=e(this).data(d),a&&a.disable()});break;case"destroy":this.each(function(){a=e(this).data(d),a&&(a.destroy(),e(this).data(d,null))});break;default:this.each(function(){!e(this).data(d)&&s(this)&&e(this).data(d,new i(this,t))})}return this}}),i}),s("ui/Textarea",["require"],function(t){function i(t,i){if(t instanceof jQuery){if(!(t.length>0))return;t=t[0]}s(t)&&(this.main=t,this.$main=e(this.main),this.options=e.extend({},i||{}),this.init(this.options))}function s(e){return 1===e.nodeType&&"textarea"===e.tagName.toLowerCase()}var n="biz-textarea",a="biz-textarea-disable",r="biz-textarea-hover",o="biz-textarea-focus";i.prototype={init:function(t){this.$main.addClass(n),t.disabled&&this.disable(),this.$main.on("mouseover.bizTextarea",function(t){e(this).addClass(r)}).on("mouseout.bizTextarea",function(t){e(this).removeClass(r)}).on("focus.bizTextarea",function(t){e(this).addClass(o)}).on("blur.bizTextarea",function(t){e(this).removeClass(o)})},enable:function(){this.main.disabled=!1,this.$main.removeClass(a)},disable:function(){this.main.disabled=!0,this.$main.addClass(a)},length:function(){return this.main.value.replace(/\r?\n/g,"").length},destroy:function(){this.$main.removeClass(n+" "+a),this.$main.off("mouseover.bizTextarea").off("mouseout.bizTextarea").off("focus.bizTextarea").off("blur.bizTextarea")}};var d="bizTextarea";return e.extend(e.fn,{bizTextarea:function(t,n){var a;switch(t){case"enable":this.each(function(){a=e(this).data(d),a&&a.enable()});break;case"disable":this.each(function(){a=e(this).data(d),a&&a.disable()});break;case"destroy":this.each(function(){a=e(this).data(d),a&&(a.destroy(),e(this).data(d,null))});break;case"length":return 0!==this.length?this.data(d).length():null;default:this.each(function(){!e(this).data(d)&&s(this)&&e(this).data(d,new i(this,t))})}return this}}),i}),s("ui/Textline",["require"],function(t){function i(t,i){if(t instanceof jQuery){if(!(t.length>0))return;t=t[0]}s(t)&&(this.main=t,this.$main=e(this.main),this.options=e.extend({},i||{}),this.init(this.options))}function s(e){return 1===e.nodeType&&"div"===e.tagName.toLowerCase()}var n="biz-textline",a="biz-textline-disable",r="biz-textline-hover",o="biz-textline-focus";i.prototype={init:function(t){this.skin=t.skin?" "+t.skin:"",this.$main.addClass(n+this.skin).html("<div><pre></pre></div><textarea></textarea>");var i=Math.max(this.$main.width(),200),s=Math.max(this.$main.height(),52);this.$main.css({width:i,height:s}),this.$line=this.$main.children("div").css({height:s-10}),this.$lineNumber=this.$main.find("pre"),this.$textarea=this.$main.children("textarea").css({width:i-36,height:s-12}),t.disabled&&this.disable();var a=this;this.$textarea.on("mouseover.bizTextline",function(t){e(this).addClass(r)}).on("mouseout.bizTextline",function(t){e(this).removeClass(r)}).on("focus.bizTextline",function(t){e(this).addClass(o)}).on("blur.bizTextline",function(t){e(this).removeClass(o)}).on("keyup.bizTextline",function(e){a.renderLineNumber(e.target.scrollTop)}).on("scroll.bizTextline",function(e){a.scrollLineNumber(e.target.scrollTop)}),this.renderLineNumber(0)},enable:function(){this.$textarea[0].disabled=!1,this.$textarea.removeClass(a)},disable:function(){this.$textarea[0].disabled=!0,this.$textarea.addClass(a)},length:function(){return this.$textarea[0].value.replace(/\r?\n/g,"").length},val:function(e){return void 0===e?this.$textarea.val():(this.$textarea[0].value=e,void this.renderLineNumber(0))},destroy:function(){this.$textarea.off("mouseover.bizTextline").off("mouseout.bizTextline").off("focus.bizTextline").off("blur.bizTextline").off("keyup.bizTextline").off("scroll.bizTextline"),this.$main.removeClass(n+this.skin).empty()},renderLineNumber:function(e){for(var t=this.$textarea.val().split("\n").length,i="1",s=2;t>=s;s++)i+="\n"+s;this.$lineNumber.html(i),this.scrollLineNumber(e)},scrollLineNumber:function(e){this.$lineNumber.css({top:5-e})}};var d="bizTextline";return e.extend(e.fn,{bizTextline:function(t,n){var a;switch(t){case"enable":this.each(function(){a=e(this).data(d),a&&a.enable()});break;case"disable":this.each(function(){a=e(this).data(d),a&&a.disable()});break;case"val":if(void 0===n)return e(this).data(d).val();this.each(function(){a=e(this).data(d),a&&a.val(n)});break;case"destroy":this.each(function(){a=e(this).data(d),a&&(a.destroy(),e(this).data(d,null))});break;case"length":return 0!==this.length?this.data(d).length():null;default:this.each(function(){!e(this).data(d)&&s(this)&&e(this).data(d,new i(this,t))})}return this}}),i}),s("ui/Radio",["require"],function(t){function i(t){if(t instanceof jQuery){if(!(t.length>0))return;t=t[0]}s(t)&&(this.main=t,this.$main=e(this.main),this.$group=e('input[name="'+this.$main.attr("name")+'"]'),this.init())}function s(e){return 1===e.nodeType&&"input"===e.tagName.toLowerCase()&&"radio"===e.getAttribute("type").toLowerCase()}var n="biz-label",a="biz-radio-unchecked",r="biz-radio-unchecked-hover",o="biz-radio-checked",d="biz-radio-checked-hover",l="biz-radio-unchecked-disabled",h="biz-radio-checked-disabled";i.prototype={init:function(t){var i=this.$main.attr("title"),s=this.$main.attr("id");this.$main.after('<label for="'+s+'">'+i+"</label>").hide(),this.$label=this.$main.next(),this.$label.addClass(n),this.main.checked?this.$label.addClass(this.main.disabled?h:o):this.$label.addClass(this.main.disabled?l:a);var c=this;this.$label.on("mouseover.bizRadio",function(t){c.main.disabled||e(this).addClass(c.main.checked?d:r)}).on("mouseout.bizRadio",function(t){c.main.disabled||e(this).removeClass(c.main.checked?d:r)}).on("click.bizRadio",function(t){c.main.disabled||(c.$group.bizRadio("uncheck"),c.main.checked=!0,e(this).attr("class",n+" "+o+" "+d))})},check:function(){this.$group.bizRadio("uncheck"),this.main.checked=!0,this.$label.attr("class",n+" "+(this.main.disabled?h:o))},uncheck:function(){this.main.checked=!1,this.$label.attr("class",n+" "+(this.main.disabled?l:a))},enable:function(){this.main.disabled=!1,this.$label.attr("class",n+" "+(this.main.checked?o:a))},disable:function(){this.main.disabled=!0,this.$label.attr("class",n+" "+(this.main.checked?h:l))},val:function(){return this.main.value},destroy:function(){this.$main.show(),this.$label.off("mouseover.bizRadio").off("mouseout.bizRadio").off("click.bizRadio").remove()}};var c="bizRadio";return e.extend(e.fn,{bizRadio:function(t,n){var a;switch(t){case"uncheck":this.each(function(){a=e(this).data(c),a&&a.uncheck()});break;case"enable":this.each(function(){a=e(this).data(c),a&&a.enable()});break;case"disable":this.each(function(){a=e(this).data(c),a&&a.disable()});break;case"destroy":this.each(function(){a=e(this).data(c),a&&(a.destroy(),e(this).data(c,null))});break;case"val":var r;return this.each(function(){a=e(this).data(c),a&&a.main.checked&&(r=a.val())}),r;case"get":var o;return this.each(function(){a=e(this).data(c),n+""===a.main.id&&(o=a)}),o;default:this.each(function(){!e(this).data(c)&&s(this)&&e(this).data(c,new i(this))})}return this}}),i}),s("ui/Checkbox",["require"],function(t){function i(t){if(t instanceof jQuery){if(!(t.length>0))return;t=t[0]}s(t)&&(this.main=t,this.$main=e(this.main),this.$group=e('input[name="'+this.$main.attr("name")+'"]'),this.init())}function s(e){return 1===e.nodeType&&"input"===e.tagName.toLowerCase()&&"checkbox"===e.getAttribute("type").toLowerCase()}var n="biz-label",a="biz-checkbox-unchecked",r="biz-checkbox-unchecked-hover",o="biz-checkbox-checked",d="biz-checkbox-checked-hover",l="biz-checkbox-unchecked-disabled",h="biz-checkbox-checked-disabled";i.prototype={init:function(){var t=this.$main.attr("title"),i=this.$main.attr("id")||"";this.$main.after('<label for="'+i+'">'+t+"</label>").hide(),this.$label=this.$main.next(),this.$label.addClass(n),this.$main.prop("checked")?this.$label.addClass(this.$main.prop("disabled")?h:o):this.$label.addClass(this.$main.prop("disabled")?l:a);var s=this;this.$label.on("mouseover.bizCheckbox",function(){s.$main.prop("disabled")||e(this).addClass(s.$main.prop("checked")?d:r)}).on("mouseout.bizCheckbox",function(){s.$main.prop("disabled")||e(this).removeClass(s.$main.prop("checked")?d:r)}).on("click.bizCheckbox",function(){s.$main.prop("disabled")||(s.$main.prop("checked")?e(this).attr("class",n+" "+a+" "+r):e(this).attr("class",n+" "+o+" "+d),""===i&&s.$main.prop("checked",!s.$main.prop("checked")))})},check:function(){this.$main.prop("checked",!0),this.$label.attr("class",n+" "+(this.$main.prop("disabled")?h:o))},uncheck:function(){this.$main.prop("checked",!1),this.$label.attr("class",n+" "+(this.$main.prop("disabled")?l:a))},enable:function(){this.$main.prop("disabled",!1),this.$label.attr("class",n+" "+(this.$main.prop("checked")?o:a))},disable:function(){this.$main.prop("disabled",!0),this.$label.attr("class",n+" "+(this.$main.prop("checked")?h:l))},val:function(){return this.main.value},destroy:function(){this.$main.show(),this.$label.off("mouseover.bizCheckbox").off("mouseout.bizCheckbox").off("click.bizCheckbox").remove()}};var c="bizCheckbox";return e.extend(e.fn,{bizCheckbox:function(t,n){var a;switch(t){case"check":this.each(function(){a=e(this).data(c),a&&a.check()});break;case"uncheck":this.each(function(){a=e(this).data(c),a&&a.uncheck()});break;case"enable":this.each(function(){a=e(this).data(c),a&&a.enable()});break;case"disable":this.each(function(){a=e(this).data(c),a&&a.disable()});break;case"destroy":this.each(function(){a=e(this).data(c),a&&(a.destroy(),e(this).data(c,null))});break;case"val":var r=[];return this.each(function(){a=e(this).data(c),a&&a.main.checked&&r.push(a.val())}),r.join(",");case"get":var o;return this.each(function(){a=e(this).data(c),n+""===a.main.id&&(o=a)}),o;default:this.each(function(){!e(this).data(c)&&s(this)&&e(this).data(c,new i(this))})}return this}}),i}),s("dep/jquery.selectBox",["require"],function(t){var i=function(e,t){if(e instanceof jQuery){if(!(e.length>0))return;e=e[0]}return this.typeTimer=null,this.typeSearch="",this.isMac=navigator.platform.match(/mac/i),t="object"==typeof t?t:{},this.selectElement=e,!t.mobile&&navigator.userAgent.match(/iPad|iPhone|Android|IEMobile|BlackBerry/i)?!1:"select"!==e.tagName.toLowerCase()?!1:void this.init(t)};return i.prototype.version="1.2.0",i.prototype.init=function(t){var i=e(this.selectElement);if(i.data("selectBox-control"))return!1;var s=e('<a class="selectBox" />'),n=i.attr("multiple")||parseInt(i.attr("size"))>1,a=t||{},r=parseInt(i.prop("tabindex"))||0,o=this;if(s.width(i.outerWidth()).addClass(i.attr("class")).attr("title",i.attr("title")||"").attr("tabindex",r).css("display","inline-block").bind("focus.selectBox",function(){this!==document.activeElement&&document.body!==document.activeElement&&e(document.activeElement).blur(),s.hasClass("selectBox-active")||(s.addClass("selectBox-active"),i.trigger("focus"))}).bind("blur.selectBox",function(){s.hasClass("selectBox-active")&&(s.removeClass("selectBox-active"),i.trigger("blur"))}),e(window).data("selectBox-bindings")||e(window).data("selectBox-bindings",!0).bind("scroll.selectBox",a.hideOnWindowScroll?this.hideMenus:e.noop).bind("resize.selectBox",this.hideMenus),i.attr("disabled")&&s.addClass("selectBox-disabled"),i.bind("click.selectBox",function(e){s.focus(),e.preventDefault()}),n){if(t=this.getOptions("inline"),s.append(t).data("selectBox-options",t).addClass("selectBox-inline selectBox-menuShowing").bind("keydown.selectBox",function(e){o.handleKeyDown(e)}).bind("keypress.selectBox",function(e){o.handleKeyPress(e)}).bind("mousedown.selectBox",function(t){1===t.which&&(e(t.target).is("A.selectBox-inline")&&t.preventDefault(),s.hasClass("selectBox-focus")||s.focus())}).insertAfter(i),!i[0].style.height){var d=i.attr("size")?parseInt(i.attr("size")):5,l=s.clone().removeAttr("id").css({position:"absolute",top:"-9999em"}).show().appendTo("body");l.find(".selectBox-options").html("<li><a> </a></li>");var h=parseInt(l.find(".selectBox-options A:first").html("&nbsp;").outerHeight());l.remove(),s.height(h*d)}this.disableSelection(s)}else{var c=e('<span class="selectBox-label" />'),u=e('<span class="selectBox-arrow" />');c.attr("class",this.getLabelClass()).text(this.getLabelText()),t=this.getOptions("dropdown"),t.appendTo("BODY"),s.data("selectBox-options",t).addClass("selectBox-dropdown").append(c).append(u).bind("mousedown.selectBox",function(e){1===e.which&&(s.hasClass("selectBox-menuShowing")?o.hideMenus():(e.stopPropagation(),t.data("selectBox-down-at-x",e.screenX).data("selectBox-down-at-y",e.screenY),o.showMenu()))}).bind("keydown.selectBox",function(e){o.handleKeyDown(e)}).bind("keypress.selectBox",function(e){o.handleKeyPress(e)}).bind("open.selectBox",function(e,t){t&&t._selectBox===!0||o.showMenu()}).bind("close.selectBox",function(e,t){t&&t._selectBox===!0||o.hideMenus()}).insertAfter(i);var f=s.width()-u.outerWidth()-(parseInt(c.css("paddingLeft"))||0)-(parseInt(c.css("paddingRight"))||0);c.width(f),this.disableSelection(s)}i.addClass("selectBox").data("selectBox-control",s).data("selectBox-settings",a).hide()},i.prototype.getOptions=function(t){var i,s=e(this.selectElement),n=this,a=function(t,i){return t.children("OPTION, OPTGROUP").each(function(){if(e(this).is("OPTION"))e(this).length>0?n.generateOptions(e(this),i):i.append("<li> </li>");else{var t=e('<li class="selectBox-optgroup" />');t.text(e(this).attr("label")),i.append(t),i=a(e(this),i)}}),i};switch(t){case"inline":return i=e('<ul class="selectBox-options" />'),i=a(s,i),i.find("A").bind("mouseover.selectBox",function(t){n.addHover(e(this).parent())}).bind("mouseout.selectBox",function(t){n.removeHover(e(this).parent())}).bind("mousedown.selectBox",function(e){1===e.which&&(e.preventDefault(),s.selectBox("control").hasClass("selectBox-active")||s.selectBox("control").focus())}).bind("mouseup.selectBox",function(t){1===t.which&&(n.hideMenus(),n.selectOption(e(this).parent(),t))}),this.disableSelection(i),i;case"dropdown":i=e('<ul class="selectBox-dropdown-menu selectBox-options" />'),i=a(s,i),i.data("selectBox-select",s).css("display","none").appendTo("BODY").find("A").bind("mousedown.selectBox",function(t){1===t.which&&(t.preventDefault(),t.screenX===i.data("selectBox-down-at-x")&&t.screenY===i.data("selectBox-down-at-y")&&(i.removeData("selectBox-down-at-x").removeData("selectBox-down-at-y"),/android/i.test(navigator.userAgent.toLowerCase())&&/chrome/i.test(navigator.userAgent.toLowerCase())&&n.selectOption(e(this).parent()),n.hideMenus()))}).bind("mouseup.selectBox",function(t){1===t.which&&(t.screenX!==i.data("selectBox-down-at-x")||t.screenY!==i.data("selectBox-down-at-y"))&&(i.removeData("selectBox-down-at-x").removeData("selectBox-down-at-y"),n.selectOption(e(this).parent()),n.hideMenus())}).bind("mouseover.selectBox",function(t){n.addHover(e(this).parent())}).bind("mouseout.selectBox",function(t){n.removeHover(e(this).parent())});var r=s.attr("class")||"";if(""!==r){r=r.split(" ");for(var o=0;o<r.length;o++)i.addClass(r[o]+"-selectBox-dropdown-menu")}return this.disableSelection(i),i}},i.prototype.getLabelClass=function(){var t=e(this.selectElement).find("OPTION:selected");return("selectBox-label "+(t.attr("class")||"")).replace(/\s+$/,"")},i.prototype.getLabelText=function(){var t=e(this.selectElement).find("OPTION:selected");return t.text()||" "},i.prototype.setLabel=function(){var t=e(this.selectElement),i=t.data("selectBox-control");i&&i.find(".selectBox-label").attr("class",this.getLabelClass()).text(this.getLabelText())},i.prototype.destroy=function(){var t=e(this.selectElement),i=t.data("selectBox-control");if(i){var s=i.data("selectBox-options");s.remove(),i.remove(),t.removeClass("selectBox").removeData("selectBox-control").data("selectBox-control",null).removeData("selectBox-settings").data("selectBox-settings",null).show()}},i.prototype.refresh=function(){var t,i=e(this.selectElement),s=i.data("selectBox-control"),n=s.hasClass("selectBox-dropdown")?"dropdown":"inline";switch(s.data("selectBox-options").remove(),t=this.getOptions(n),s.data("selectBox-options",t),n){case"inline":s.append(t);break;case"dropdown":this.setLabel(),e("BODY").append(t)}"dropdown"===n&&s.hasClass("selectBox-menuShowing")&&this.showMenu()},i.prototype.showMenu=function(){var t=this,i=e(this.selectElement),s=i.data("selectBox-control"),n=i.data("selectBox-settings"),a=s.data("selectBox-options");if(s.hasClass("selectBox-disabled"))return!1;this.hideMenus();var r=parseInt(s.css("borderBottomWidth"))||0,o=parseInt(s.css("borderTopWidth"))||0,d=s.offset(),l=n.topPositionCorrelation?n.topPositionCorrelation:0,h=n.bottomPositionCorrelation?n.bottomPositionCorrelation:0,c=a.outerHeight(),u=s.outerHeight(),f=parseInt(a.css("max-height")),p=e(window).scrollTop(),g=d.top-p,_=e(window).height()-(g+u),m=g>_&&(null===n.keepInViewport?!0:n.keepInViewport),b=m?d.top-c+o+l:d.top+u-r-h;if(f>g&&f>_){var v;m?(v=f-(g-5),a.css({"max-height":f-v+"px"}),b+=v):(v=f-(_-5),a.css({"max-height":f-v+"px"}))}if(a.data("posTop",m),a.width(s.innerWidth()).css({top:b,left:s.offset().left}).addClass("selectBox-options selectBox-options-"+(m?"top":"bottom")),i.triggerHandler("beforeopen"))return!1;var y=function(){i.triggerHandler("open",{_selectBox:!0})};switch(n.menuTransition){case"fade":a.fadeIn(n.menuSpeed,y);break;case"slide":a.slideDown(n.menuSpeed,y);break;default:a.show(n.menuSpeed,y)}n.menuSpeed||y();var x=a.find(".selectBox-selected:first");this.keepOptionInView(x,!0),this.addHover(x),s.addClass("selectBox-menuShowing selectBox-menuShowing-"+(m?"top":"bottom")),e(document).bind("mousedown.selectBox",function(i){if(1===i.which){if(e(i.target).parents().andSelf().hasClass("selectBox-options"))return;t.hideMenus()}})},i.prototype.hideMenus=function(){0!==e(".selectBox-dropdown-menu:visible").length&&(e(document).unbind("mousedown.selectBox"),e(".selectBox-dropdown-menu").each(function(){var t=e(this),i=t.data("selectBox-select"),s=i.data("selectBox-control"),n=i.data("selectBox-settings"),a=t.data("posTop");if(i.triggerHandler("beforeclose"))return!1;var r=function(){i.triggerHandler("close",{_selectBox:!0})};if(n){switch(n.menuTransition){case"fade":t.fadeOut(n.menuSpeed,r);break;case"slide":t.slideUp(n.menuSpeed,r);break;default:t.hide(n.menuSpeed,r)}n.menuSpeed||r(),s.removeClass("selectBox-menuShowing selectBox-menuShowing-"+(a?"top":"bottom"))}else e(this).hide(),e(this).triggerHandler("close",{_selectBox:!0}),e(this).removeClass("selectBox-menuShowing selectBox-menuShowing-"+(a?"top":"bottom"));t.css("max-height",""),t.removeClass("selectBox-options-"+(a?"top":"bottom")),t.data("posTop",!1)}))},i.prototype.selectOption=function(t,i){var s=e(this.selectElement);t=e(t);var n=s.data("selectBox-control");s.data("selectBox-settings");if(n.hasClass("selectBox-disabled"))return!1;if(0===t.length||t.hasClass("selectBox-disabled"))return!1;if(s.attr("multiple"))if(i.shiftKey&&n.data("selectBox-last-selected")){t.toggleClass("selectBox-selected");var a;a=t.index()>n.data("selectBox-last-selected").index()?t.siblings().slice(n.data("selectBox-last-selected").index(),t.index()):t.siblings().slice(t.index(),n.data("selectBox-last-selected").index()),a=a.not(".selectBox-optgroup, .selectBox-disabled"),t.hasClass("selectBox-selected")?a.addClass("selectBox-selected"):a.removeClass("selectBox-selected")}else this.isMac&&i.metaKey||!this.isMac&&i.ctrlKey?t.toggleClass("selectBox-selected"):(t.siblings().removeClass("selectBox-selected"),t.addClass("selectBox-selected"));else t.siblings().removeClass("selectBox-selected"),t.addClass("selectBox-selected");n.hasClass("selectBox-dropdown")&&n.find(".selectBox-label").text(t.text());var r=0,o=[];return s.attr("multiple")?n.find(".selectBox-selected A").each(function(){o[r++]=e(this).attr("rel")}):o=t.find("A").attr("rel"),n.data("selectBox-last-selected",t),s.val()!==o&&(s.val(o),this.setLabel(),s.trigger("change")),!0},i.prototype.addHover=function(t){t=e(t);var i=e(this.selectElement),s=i.data("selectBox-control"),n=s.data("selectBox-options");n.find(".selectBox-hover").removeClass("selectBox-hover"),t.addClass("selectBox-hover")},i.prototype.getSelectElement=function(){return this.selectElement},i.prototype.removeHover=function(t){t=e(t);var i=e(this.selectElement),s=i.data("selectBox-control"),n=s.data("selectBox-options");n.find(".selectBox-hover").removeClass("selectBox-hover")},i.prototype.keepOptionInView=function(t,i){if(t&&0!==t.length){var s=e(this.selectElement),n=s.data("selectBox-control"),a=n.data("selectBox-options"),r=n.hasClass("selectBox-dropdown")?a:a.parent(),o=parseInt(t.offset().top-r.position().top),d=parseInt(o+t.outerHeight());i?r.scrollTop(t.offset().top-r.offset().top+r.scrollTop()-r.height()/2):(0>o&&r.scrollTop(t.offset().top-r.offset().top+r.scrollTop()),d>r.height()&&r.scrollTop(t.offset().top+t.outerHeight()-r.offset().top+r.scrollTop()-r.height()))}},i.prototype.handleKeyDown=function(t){var i=e(this.selectElement),s=i.data("selectBox-control"),n=s.data("selectBox-options"),a=i.data("selectBox-settings"),r=0,o=0;if(!s.hasClass("selectBox-disabled"))switch(t.keyCode){case 8:t.preventDefault(),this.typeSearch="";break;case 9:case 27:this.hideMenus(),this.removeHover();break;case 13:s.hasClass("selectBox-menuShowing")?(this.selectOption(n.find("LI.selectBox-hover:first"),t),s.hasClass("selectBox-dropdown")&&this.hideMenus()):this.showMenu();break;case 38:case 37:if(t.preventDefault(),s.hasClass("selectBox-menuShowing")){var d=n.find(".selectBox-hover").prev("LI");for(r=n.find("LI:not(.selectBox-optgroup)").length,o=0;(0===d.length||d.hasClass("selectBox-disabled")||d.hasClass("selectBox-optgroup"))&&(d=d.prev("LI"),0===d.length&&(d=a.loopOptions?n.find("LI:last"):n.find("LI:first")),!(++o>=r)););this.addHover(d),this.selectOption(d,t),this.keepOptionInView(d)}else this.showMenu();break;case 40:case 39:if(t.preventDefault(),s.hasClass("selectBox-menuShowing")){var l=n.find(".selectBox-hover").next("LI");for(r=n.find("LI:not(.selectBox-optgroup)").length,o=0;(0===l.length||l.hasClass("selectBox-disabled")||l.hasClass("selectBox-optgroup"))&&(l=l.next("LI"),0===l.length&&(l=a.loopOptions?n.find("LI:first"):n.find("LI:last")),!(++o>=r)););this.addHover(l),this.selectOption(l,t),this.keepOptionInView(l)}else this.showMenu()}},i.prototype.handleKeyPress=function(t){var i=e(this.selectElement),s=i.data("selectBox-control"),n=s.data("selectBox-options"),a=this;if(!s.hasClass("selectBox-disabled"))switch(t.keyCode){case 9:case 27:case 13:case 38:case 37:case 40:case 39:break;default:s.hasClass("selectBox-menuShowing")||this.showMenu(),t.preventDefault(),clearTimeout(this.typeTimer),this.typeSearch+=String.fromCharCode(t.charCode||t.keyCode),n.find("A").each(function(){return e(this).text().substr(0,a.typeSearch.length).toLowerCase()===a.typeSearch.toLowerCase()?(a.addHover(e(this).parent()),a.selectOption(e(this).parent(),t),a.keepOptionInView(e(this).parent()),!1):void 0}),this.typeTimer=setTimeout(function(){a.typeSearch=""},1e3)}},i.prototype.enable=function(){var t=e(this.selectElement);t.prop("disabled",!1);var i=t.data("selectBox-control");i&&i.removeClass("selectBox-disabled")},i.prototype.disable=function(){var t=e(this.selectElement);t.prop("disabled",!0);
var i=t.data("selectBox-control");i&&i.addClass("selectBox-disabled")},i.prototype.setValue=function(t){var i=e(this.selectElement);i.val(t),t=i.val(),null===t&&(t=i.children().first().val(),i.val(t));var s=i.data("selectBox-control");if(s){var n=i.data("selectBox-settings"),a=s.data("selectBox-options");this.setLabel(),a.find(".selectBox-selected").removeClass("selectBox-selected"),a.find("A").each(function(){if("object"==typeof t)for(var i=0;i<t.length;i++)e(this).attr("rel")==t[i]&&e(this).parent().addClass("selectBox-selected");else e(this).attr("rel")==t&&e(this).parent().addClass("selectBox-selected")}),n.change&&n.change.call(i)}},i.prototype.disableSelection=function(t){e(t).css("MozUserSelect","none").bind("selectstart",function(e){e.preventDefault()})},i.prototype.generateOptions=function(t,i){var s=e("<li />"),n=e("<a />");s.addClass(t.attr("class")),s.data(t.data()),n.attr("rel",t.val()).text(t.text()),s.append(n),t.attr("disabled")&&s.addClass("selectBox-disabled"),t.attr("selected")&&s.addClass("selectBox-selected"),i.append(s)},e.extend(e.fn,{setOptions:function(t){var i=e(this),s=i.data("selectBox-control");switch(typeof t){case"string":i.html(t);break;case"object":i.html("");for(var n in t)if(null!==t[n])if("object"==typeof t[n]){var a=e('<optgroup label="'+n+'" />');for(var r in t[n])a.append('<option value="'+r+'">'+t[n][r]+"</option>");i.append(a)}else{var o=e('<option value="'+n+'">'+t[n]+"</option>");i.append(o)}}s&&e(this).selectBox("refresh")},selectBox:function(t,s){var n;switch(t){case"control":return e(this).data("selectBox-control");case"settings":if(!s)return e(this).data("selectBox-settings");e(this).each(function(){e(this).data("selectBox-settings",e.extend(!0,e(this).data("selectBox-settings"),s))});break;case"options":if(void 0===s)return e(this).data("selectBox-control").data("selectBox-options");e(this).each(function(){e(this).setOptions(s)});break;case"value":if(void 0===s)return e(this).val();e(this).each(function(){n=e(this).data("selectBox"),n&&n.setValue(s)});break;case"refresh":e(this).each(function(){n=e(this).data("selectBox"),n&&n.refresh()});break;case"enable":e(this).each(function(){n=e(this).data("selectBox"),n&&n.enable(this)});break;case"disable":e(this).each(function(){n=e(this).data("selectBox"),n&&n.disable()});break;case"destroy":e(this).each(function(){n=e(this).data("selectBox"),n&&(n.destroy(),e(this).data("selectBox",null))});break;case"instance":return e(this).data("selectBox");default:e(this).each(function(s,n){e(n).data("selectBox")||e(n).data("selectBox",new i(n,t))})}return e(this)}}),i}),s("ui/Select",["require","dep/jquery.selectBox"],function(t){function i(t,i){i=e.extend({},i||{}),this.instance=new n(e(t),{mobile:!0,loopOptions:i.loop}),this.main=this.instance.selectElement,this.$main=e(this.main)}function s(e){return 1===e.nodeType&&"select"===e.tagName.toLowerCase()}var n=t("dep/jquery.selectBox");i.prototype={enable:function(){this.instance.enable()},disable:function(){this.instance.disable()},refresh:function(){this.instance.refresh()},val:function(e){return void 0===e?this.$main.val():void this.instance.setValue(e)},destroy:function(){this.instance.destroy()}};var a="bizSelect";return e.extend(e.fn,{bizSelect:function(t,n){var r;switch(t){case"enable":this.each(function(){r=e(this).data(a),r&&r.enable()});break;case"disable":this.each(function(){r=e(this).data(a),r&&r.disable()});break;case"refresh":this.each(function(){r=e(this).data(a),r&&r.refresh()});break;case"val":if(void 0===n)return e(this).val();this.each(function(){r=e(this).data(a),r&&r.val(n)});break;case"destroy":this.each(function(){r=e(this).data(a),r&&(r.destroy(),e(this).data(a,null))});break;default:this.each(function(){!e(this).data(a)&&s(this)&&e(this).data(a,new i(this,t))})}return this}}),i}),s("ui/Dialog",["require"],function(t){function i(t,i){if(t instanceof jQuery){if(!(t.length>0))return;t=t[0]}this.main=t,this.$main=e(this.main);var s={width:480,buttons:[],destroyOnClose:!1,skin:"",title:""};this.options=e.extend(s,i||{}),this.init(this.options)}var s="biz-dialog",n=1e3;i.prototype={init:function(t){var i=t.title||this.$main.attr("title"),n=(this.$main.html(),this);this.$container=e('<div style="display:none;"></div>'),this.$container.addClass(s+" "+t.skin).html(['<h1 class="biz-dialog-title">',"<span>",i,"</span>",'<span class="biz-dialog-close"></span></h1>','<div class="biz-dialog-content"></div>','<div class="biz-dialog-bottom"></div>'].join("")).css({width:t.width,marginLeft:-Math.floor(parseInt(t.width,10)/2)}).on("click",".biz-dialog-close",function(){n.close()}),this.$container.find(".biz-dialog-content").append(this.$main);var a=this.$container.find(".biz-dialog-bottom");t.buttons.length?e.each(t.buttons,function(t,i){e("<button>"+i.text+"</button>").bizButton({theme:i.theme}).click(function(e){i.click.call(n,e)}).appendTo(a)}):a.remove(),this.$container.appendTo("body").after(e('<div class="biz-mask" style="display:none;"></div>')),t.height?this.$container.css({height:t.height,marginTop:-Math.floor(Math.min(parseInt(t.height,10),e(window).height())/2)}):this.$container.css({marginTop:-Math.floor(Math.min(parseInt(this.$container.height(),10),e(window).height())/2)})},open:function(){var e=this.options.zIndex||n++;this.$container.next().css({zIndex:e-1}).show(),this.$main.show(),this.$container.css({zIndex:e}).show()},close:function(){var e=!0;this.options.onBeforeClose&&"function"==typeof this.options.onBeforeClose&&(e=this.options.onBeforeClose(),e===!1)||(this.$container.hide(),this.$container.next().hide(),"undefined"==typeof this.options.zIndex&&n--,this.options.destroyOnClose&&this.destroy())},destroy:function(){this.$container.find(".biz-dialog-bottom button").bizButton("destroy"),this.$container.next().remove(),this.$main.remove(),this.$container.remove()}},i.alert=function(t){var i=e('<div style="display:none;height:50px;" class="biz-alert" title="'+t.title+'">'+t.content+"</div>");i.appendTo("body").bizDialog({width:360,height:200,destroyOnClose:!0,buttons:[{text:t.ok,click:function(){i.bizDialog("close")}}]}),i.bizDialog("open")},i.confirm=function(t){var i=e('<div style="display:none;height:50px;" class="biz-confirm" title="'+t.title+'">'+t.content+"</div>");i.appendTo("body").bizDialog({width:360,height:200,destroyOnClose:!0,buttons:[{text:t.ok,click:function(){i.bizDialog("close"),t.onOK&&t.onOK()}},{text:t.cancel,click:function(){i.bizDialog("close")},theme:"dark"}]}),i.bizDialog("open")};var a="bizDialog";return e.extend(e.fn,{bizDialog:function(t,s){var n;switch(t){case"open":this.each(function(){n=e(this).data(a),n&&n.open()});break;case"close":this.each(function(){n=e(this).data(a),n&&n.close()});break;case"destroy":this.each(function(){n=e(this).data(a),n&&(n.destroy(),e(this).data(a,null))});break;default:this.each(function(){e(this).data(a)||e(this).data(a,new i(this,t))})}return this}}),i}),s("ui/Panel",["require"],function(t){function i(t,i){if(t instanceof jQuery){if(!(t.length>0))return;t=t[0]}if(s(t)){this.main=t,this.$main=e(this.main);var n={marginLeft:200,buttons:[]};this.options=e.extend(n,i||{}),this.init(this.options)}}function s(e){return 1===e.nodeType&&"div"===e.tagName.toLowerCase()&&e.hasAttribute("title")}var n="biz-panel";i.prototype={init:function(t){var i=this.$main.attr("title"),s=this.$main.html(),a=this;this.orginContent=s,this.$main.hide().addClass(n).removeAttr("title").html(['<div class="biz-panel-margin"></div>','<div class="biz-panel-body">','<h1 class="biz-panel-title">',i,"</h1>",'<div class="biz-panel-content">',s,"</div>",'<div class="biz-panel-bottom"></div></div>'].join("")).after('<div class="biz-mask" style="display:none"></div>'),this.$main.find(".biz-panel-margin").css({width:t.marginLeft});var r=this.$main.find(".biz-panel-bottom");e.each(t.buttons,function(t,i){e("<button>"+i.text+"</button>").bizButton({theme:i.theme}).click(function(e){i.click.call(a,e)}).appendTo(r)})},open:function(){e("body").css({overflow:"hidden"}),this.$main.next().show();var t=this;this.$main.css({top:Math.max(document.body.scrollTop,document.documentElement.scrollTop)}).show().animate({left:0},300,function(){t.$main.find(".biz-panel-body")[0].scrollTop=0})},close:function(){var t=this;this.$main.animate({left:Math.max(document.body.offsetWidth,document.documentElement.offsetWidth)},300,function(){t.$main.hide(),t.$main.next().hide(),e("body").css({overflow:"visible"})})},destroy:function(){this.$main.removeClass(n).attr("title",this.$main.find(".biz-panel-title").text()).removeAttr("style").hide(),this.$main.find(".biz-panel-bottom button").bizButton("destroy"),this.$main.html(this.orginContent).next().remove(),this.orginContent=null}};var a="bizPanel";return e.extend(e.fn,{bizPanel:function(t,n){var r;switch(t){case"open":this.each(function(){r=e(this).data(a),r&&r.open()});break;case"close":this.each(function(){r=e(this).data(a),r&&r.close()});break;case"destroy":this.each(function(){r=e(this).data(a),r&&(r.destroy(),e(this).data(a,null))});break;default:this.each(function(){!e(this).data(a)&&s(this)&&e(this).data(a,new i(this,t))})}return this}}),i}),s("ui/Tooltip",["require"],function(t){function i(e,t){var i={},s=e.outerHeight(),n=e.outerWidth(),a=e.offset();return i.height=g.outerHeight(!0),i.width=g.outerWidth(!0),i.offset={},i.offset.top=a.top,i.offset.left=a.left,i.offset.right=i.offset.left+n,i.offset.bottom=i.offset.top+s,i.offset.hCenter=i.offset.left+Math.floor(n/2),i.offset.vCenter=i.offset.top+Math.floor(s/2),i.css={},i.on={},i.off={},i.arrow={},i}function s(e,t,i,r){var d,l;switch(i=parseInt(i),r=parseInt(r),t){case"top":d=y.scrollTop(),e.offset.top-e.height-i-r<d&&(l="bottom"),e.on.top=e.offset.top-e.height-i,e.off.top=e.on.top+r,e.css.top=e.on.top-r,e.css.left=o(e,!0);break;case"left":d=y.scrollLeft(),e.offset.left-e.width-i-r<d&&(l="right"),e.on.left=e.offset.left-e.width-i,e.off.left=e.on.left+r,e.css.top=o(e,!1),e.css.left=e.on.left-r;break;case"bottom":d=y.scrollTop()+y.height(),e.offset.bottom+e.height+i+r>d&&(l="top"),e.on.top=e.offset.bottom+i,e.off.top=e.offset.bottom-r+i,e.css.top=e.on.top+r,e.css.left=o(e,!0);break;case"right":d=y.scrollLeft()+y.width(),e.offset.right+e.width+i+r>d&&(l="left"),e.on.left=e.offset.right+i,e.off.left=e.on.left-r,e.css.left=e.on.left+r,e.css.top=o(e,!1)}l&&!e.over?(e.over=!0,s(e,l,i,r)):(e.direction=t,a(e,t),n(e,t))}function n(e,t){var i;"top"==t||"bottom"==t?(i=y.scrollLeft()-e.css.left+5,i>0&&(e.css.left+=Math.abs(i),e.arrow.left-=i),i=e.css.left+e.width-(y.scrollLeft()+y.width())+5,i>0&&(e.css.left-=Math.abs(i),e.arrow.left+=i)):("left"==t||"right"==t)&&(i=y.scrollTop()-e.css.top+5,i>0&&(e.css.top+=Math.abs(i),e.arrow.top-=i),i=e.css.top+e.height-(y.scrollTop()+y.height())+5,i>0&&(e.css.top-=Math.abs(i),e.arrow.top+=i))}function a(e,t){"left"==t||"right"==t?e.arrow.top=Math.floor(e.height/2-b/2):e.arrow.left=Math.floor(e.width/2-m/2),e.arrow[r(t)]=-b}function r(e){switch(e){case"top":return"bottom";case"bottom":return"top";case"left":return"right";case"right":return"left"}}function o(e,t){return t?e.offset.hCenter+-e.width/2:e.offset.vCenter+-e.height/2}function d(e,t,i,s){var n=u("color",t,i,"white"),a=u("duration",t,i,150);g.attr("class",n+" "+e.direction),g.stop(!0,!0).css(e.css),_.attr("style","").css(e.arrow),g.animate(e.on,{duration:a,queue:!1,complete:s}),g.fadeIn(a)}function l(e,t,i,s){var n=u("duration",t,i,100);g.animate(e.off,{duration:n,queue:!1,complete:s}),g.fadeOut(n)}function h(t){return/&/.test(t)&&(t=e("<p/>").html(t).text()),t}function c(t,i){var s,n;try{n=e(document.body).find(i)}catch(a){}s=n&&n.length>0?n.html():h(i),v.html(s)}function u(e,t,i,s){return f(t[e],i.data("tooltip-"+e),s)}function f(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]}function p(t){"destroy"!==t?0===e("#biz-tooltip").length&&(g=e('<div id="biz-tooltip" />').appendTo(document.body).css("position","absolute").hide(),_=e('<div class="arrow" />').appendTo(g),v=e('<div class="content" />').appendTo(g),y=e(window),m=_.width(),b=_.height(),t&&t.el?t.el.bizTooltip(t):e("[title]").bizTooltip(t)):(e("#biz-tooltip").remove(),t&&t.el?t.el.each(function(){e(this).unbind("mouseenter").unbind("mouseleave")}):e("[title]").each(function(){e(this).unbind("mouseenter").unbind("mouseleave")}))}var g,_,m,b,v,y;return e.extend(e.fn,{bizTooltip:function(t){t=t||{},t.el=this,p(t),this.each(function(){var n=e(this),a=n.attr("title");if(a){var r,o,h=!1;n.unbind("mouseenter").mouseenter(function(){var e=u("delay",t,n,300);clearTimeout(o),o=setTimeout(function(){var e=u("margin",t,n,12),o=u("slide",t,n,10),l=u("direction",t,n,"top"),f=n.attr("title");f&&(a=f),n.removeAttr("title"),c(n,t.html||a),r=i(n,t),s(r,l,e,o),d(r,t,n,function(){h=!1}),h=!0},e)}),n.unbind("mouseleave").mouseleave(function(){clearTimeout(o),r&&(h?g.fadeOut(100,function(){h=!1}):l(r,t,n,function(){h=!1}),r=null,h=!0)})}})}}),p}),s("ui/Tab",["require"],function(t){function i(t,i){if(t instanceof jQuery){if(!(t.length>0))return;t=t[0]}if(s(t)){this.main=t,this.$main=e(this.main);var n={event:"click",selectedIndex:0};this.options=e.extend(n,i||{}),this.init(this.options)}}function s(e){return 1===e.nodeType&&"div"===e.tagName.toLowerCase()}var n="biz-tab";i.prototype={init:function(t){this.skin=t.skin?" "+t.skin:"",this.$main.addClass(n+this.skin),this.tabs=this.$main.find("ul li"),this.contents=this.$main.children("div").children("div").hide(),this.select(t.selectedIndex);var i=this;this.$main.on(t.event+".bizTab","ul li",function(s){var n=e(s.target);if(!n.hasClass("active")){var a;e.each(i.tabs,function(e,t){t===s.target&&(a=e)}),i.select(a),t.onChange&&t.onChange.call(i,{title:n.text(),index:a},s)}})},select:function(t){return"undefined"==typeof t?this.options.selectedIndex:(this.tabs.removeClass("active"),this.contents.hide(),this.options.selectedIndex=t,e(this.tabs[t]).addClass("active"),e(this.contents[t]).show(),void 0)},destroy:function(){this.$main.removeClass(n+this.skin),this.$main.off(this.options.event+".bizTab")}};var a="bizTab";return e.extend(e.fn,{bizTab:function(t,n){var r;switch(t){case"destroy":this.each(function(){r=e(this).data(a),r&&(r.destroy(),e(this).data(a,null))});break;case"select":var o;return this.each(function(){r=e(this).data(a),r&&(o=r.select(n))}),o;default:this.each(function(){!e(this).data(a)&&s(this)&&e(this).data(a,new i(this,t))})}return this}}),i}),s("dep/jquery.simplePagination",["require"],function(t){var i={init:function(t){var s=e.extend({items:1,itemsOnPage:1,pages:0,displayedPages:5,edges:2,currentPage:0,hrefTextPrefix:"#page-",hrefTextSuffix:"",prevText:"Prev",nextText:"Next",ellipseText:"&hellip;",cssStyle:"light-theme",listStyle:"",labelMap:[],selectOnClick:!0,nextAtFront:!1,invertPageOrder:!1,useStartEdge:!0,useEndEdge:!0,onPageClick:function(e,t){},onInit:function(){}},t||{}),n=this;return s.pages=s.pages?s.pages:Math.ceil(s.items/s.itemsOnPage)?Math.ceil(s.items/s.itemsOnPage):1,s.currentPage?s.currentPage=s.currentPage-1:s.currentPage=s.invertPageOrder?s.pages-1:0,s.halfDisplayed=s.displayedPages/2,this.each(function(){n.addClass(s.cssStyle+" simple-pagination").data("pagination",s),i._draw.call(n)}),s.onInit(),this},selectPage:function(e){return i._selectPage.call(this,e-1),this},prevPage:function(){var e=this.data("pagination");return e.invertPageOrder?e.currentPage<e.pages-1&&i._selectPage.call(this,e.currentPage+1):e.currentPage>0&&i._selectPage.call(this,e.currentPage-1),this},nextPage:function(){var e=this.data("pagination");return e.invertPageOrder?e.currentPage>0&&i._selectPage.call(this,e.currentPage-1):e.currentPage<e.pages-1&&i._selectPage.call(this,e.currentPage+1),this},getPagesCount:function(){return this.data("pagination").pages},setPagesCount:function(e){this.data("pagination").pages=e},getCurrentPage:function(){return this.data("pagination").currentPage+1},destroy:function(){return this.empty(),this},drawPage:function(e){var t=this.data("pagination");return t.currentPage=e-1,this.data("pagination",t),i._draw.call(this),this},redraw:function(){return i._draw.call(this),this},disable:function(){var e=this.data("pagination");return e.disabled=!0,this.data("pagination",e),i._draw.call(this),this},enable:function(){var e=this.data("pagination");return e.disabled=!1,this.data("pagination",e),i._draw.call(this),this},updateItems:function(e){var t=this.data("pagination");t.items=e,t.pages=i._getPages(t),this.data("pagination",t),i._draw.call(this)},updateItemsOnPage:function(e){var t=this.data("pagination");return t.itemsOnPage=e,t.pages=i._getPages(t),this.data("pagination",t),this},getItemsOnPage:function(){return this.data("pagination").itemsOnPage},_draw:function(){var t,s,n,a,r=this.data("pagination"),o=i._getInterval(r);i.destroy.call(this),s="function"==typeof this.prop?this.prop("tagName"):this.attr("tagName");var d="UL"===s?this:e("<ul"+(r.listStyle?' class="'+r.listStyle+'"':"")+"></ul>").appendTo(this);if(r.prevText&&i._appendItem.call(this,r.invertPageOrder?r.currentPage+1:r.currentPage-1,{text:r.prevText,classes:"prev"}),r.nextText&&r.nextAtFront&&i._appendItem.call(this,r.invertPageOrder?r.currentPage-1:r.currentPage+1,{text:r.nextText,classes:"next"}),r.invertPageOrder){if(o.end<r.pages&&r.edges>0){if(r.useStartEdge)for(n=Math.max(r.pages-r.edges,o.end),t=r.pages-1;t>=n;t--)i._appendItem.call(this,t);r.pages-r.edges>o.end&&r.pages-r.edges-o.end!=1?d.append('<li class="disabled"><span class="ellipse">'+r.ellipseText+"</span></li>"):r.pages-r.edges-o.end==1&&i._appendItem.call(this,o.end)}}else if(o.start>0&&r.edges>0){if(r.useStartEdge)for(a=Math.min(r.edges,o.start),t=0;a>t;t++)i._appendItem.call(this,t);r.edges<o.start&&o.start-r.edges!=1?d.append('<li class="disabled"><span class="ellipse">'+r.ellipseText+"</span></li>"):o.start-r.edges==1&&i._appendItem.call(this,r.edges)}if(r.invertPageOrder)for(t=o.end-1;t>=o.start;t--)i._appendItem.call(this,t);else for(t=o.start;t<o.end;t++)i._appendItem.call(this,t);if(r.invertPageOrder){if(o.start>0&&r.edges>0&&(r.edges<o.start&&o.start-r.edges!=1?d.append('<li class="disabled"><span class="ellipse">'+r.ellipseText+"</span></li>"):o.start-r.edges==1&&i._appendItem.call(this,r.edges),r.useEndEdge))for(a=Math.min(r.edges,o.start),t=a-1;t>=0;t--)i._appendItem.call(this,t)}else if(o.end<r.pages&&r.edges>0&&(r.pages-r.edges>o.end&&r.pages-r.edges-o.end!=1?d.append('<li class="disabled"><span class="ellipse">'+r.ellipseText+"</span></li>"):r.pages-r.edges-o.end==1&&i._appendItem.call(this,o.end),r.useEndEdge))for(n=Math.max(r.pages-r.edges,o.end),t=n;t<r.pages;t++)i._appendItem.call(this,t);r.nextText&&!r.nextAtFront&&i._appendItem.call(this,r.invertPageOrder?r.currentPage-1:r.currentPage+1,{text:r.nextText,classes:"next"})},_getPages:function(e){var t=Math.ceil(e.items/e.itemsOnPage);return t||1},_getInterval:function(e){return{start:Math.ceil(e.currentPage>e.halfDisplayed?Math.max(Math.min(e.currentPage-e.halfDisplayed,e.pages-e.displayedPages),0):0),end:Math.ceil(e.currentPage>e.halfDisplayed?Math.min(e.currentPage+e.halfDisplayed,e.pages):Math.min(e.displayedPages,e.pages))}},_appendItem:function(t,s){var n,a,r=this,o=r.data("pagination"),d=e("<li></li>"),l=r.find("ul");t=0>t?0:t<o.pages?t:o.pages-1,n={text:t+1,classes:""},o.labelMap.length&&o.labelMap[t]&&(n.text=o.labelMap[t]),n=e.extend(n,s||{}),t==o.currentPage||o.disabled?(o.disabled||"prev"===n.classes||"next"===n.classes?d.addClass("disabled"):d.addClass("active"),a=e('<span class="current">'+n.text+"</span>")):(a=e('<a href="javascript:void(0)" class="page-link">'+n.text+"</a>"),a.click(function(e){return i._selectPage.call(r,t,e)})),n.classes&&a.addClass(n.classes),d.append(a),l.length?l.append(d):r.append(d)},_selectPage:function(e,t){var s=this.data("pagination");return s.currentPage=e,s.selectOnClick&&i._draw.call(this),s.onPageClick(e+1,t)}};return e.fn.pagination=function(t){return i[t]&&"_"!=t.charAt(0)?i[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.pagination"):i.init.apply(this,arguments)},i}),s("ui/Page",["require","dep/jquery.simplePagination"],function(t){function i(t,i){i=e.extend({},i||{}),this.instance=n.init.call(e(t),{itemsOnPage:i.pageSize,currentPage:i.pageNumber,items:i.totalNumber,prevText:i.prevText||"◀",nextText:i.nextText||"▶",onPageClick:i.onPageClick})}function s(e){return 1===e.nodeType&&"div"===e.tagName.toLowerCase()}var n=t("dep/jquery.simplePagination");i.prototype={setPageSize:function(e){this.instance.pagination("updateItemsOnPage",e),this.instance.pagination("drawPage",1)},setPageNumber:function(e){this.instance.pagination("selectPage",e)},setTotalNumber:function(e){this.instance.pagination("updateItems",e),this.instance.pagination("drawPage",1)},getPageNumber:function(){return this.instance.pagination("getCurrentPage")},getPageCount:function(){return this.instance.pagination("getPagesCount")},destroy:function(){this.instance.pagination("destroy")}};var a="bizPage";return e.extend(e.fn,{bizPage:function(t,n){var r;switch(t){case"setPageSize":this.each(function(){r=e(this).data(a),r&&r.setPageSize(n)});break;case"setPageNumber":this.each(function(){r=e(this).data(a),r&&r.setPageNumber(n)});break;case"setTotalNumber":this.each(function(){r=e(this).data(a),r&&r.setTotalNumber(n)});break;case"getPageNumber":return this.data(a).getPageNumber();case"getPageCount":return this.data(a).getPageCount();case"destroy":this.each(function(){r=e(this).data(a),r&&(r.destroy(),e(this).data(a,null))});break;default:this.each(function(){!e(this).data(a)&&s(this)&&e(this).data(a,new i(this,t))})}return this}}),i}),s("dep/jquery.jstree",["require"],function(t){if(!e.jstree){var i,s,n=0,a=!1,r=!1,o=!1,d=[],l=e("script:last").attr("src"),h=window.document,c=h.createElement("LI");c.setAttribute("role","treeitem"),i=h.createElement("I"),i.className="jstree-icon jstree-ocl",i.setAttribute("role","presentation"),c.appendChild(i),i=h.createElement("A"),i.className="jstree-anchor",i.setAttribute("href","#"),i.setAttribute("tabindex","-1"),s=h.createElement("I"),s.className="jstree-icon jstree-themeicon",s.setAttribute("role","presentation"),i.appendChild(s),c.appendChild(i),i=s=null,e.jstree={version:"3.1.1",defaults:{plugins:[]},plugins:{},path:l&&-1!==l.indexOf("/")?l.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%?`]/g},e.jstree.create=function(t,i){var s=new e.jstree.core(++n),a=i;return i=e.extend(!0,{},e.jstree.defaults,i),a&&a.plugins&&(i.plugins=a.plugins),e.each(i.plugins,function(e,t){"core"!==e&&(s=s.plugin(t,i[t]))}),e(t).data("jstree",s),s.init(t,i),s},e.jstree.destroy=function(){e(".jstree:jstree").jstree("destroy"),e(h).off(".jstree")},e.jstree.core=function(e){this._id=e,this._cnt=0,this._wrk=null,this._data={core:{themes:{name:!1,dots:!1,icons:!1},selected:[],last_error:{},working:!1,worker_queue:[],focused:null}}},e.jstree.reference=function(t){var i=null,s=null;if(!t||!t.id||t.tagName&&t.nodeType||(t=t.id),!s||!s.length)try{s=e(t)}catch(n){}if(!s||!s.length)try{s=e("#"+t.replace(e.jstree.idregex,"\\$&"))}catch(n){}return s&&s.length&&(s=s.closest(".jstree")).length&&(s=s.data("jstree"))?i=s:e(".jstree").each(function(){var s=e(this).data("jstree");return s&&s._model.data[t]?(i=s,!1):void 0}),i},e.fn.jstree=function(t){var i="string"==typeof t,s=Array.prototype.slice.call(arguments,1),n=null;return t!==!0||this.length?(this.each(function(){var a=e.jstree.reference(this),r=i&&a?a[t]:null;return n=i&&r?r.apply(a,s):null,a||i||void 0!==t&&!e.isPlainObject(t)||e.jstree.create(this,t),(a&&!i||t===!0)&&(n=a||!1),null!==n&&void 0!==n?!1:void 0}),null!==n&&void 0!==n?n:this):!1},e.expr[":"].jstree=e.expr.createPseudo(function(t){return function(t){return e(t).hasClass("jstree")&&void 0!==e(t).data("jstree")}}),e.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,error:e.noop,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,stripes:!1,variant:!1,responsive:!1},expand_selected_onload:!0,worker:!0,force_text:!1,dblclick_toggle:!0},e.jstree.core.prototype={plugin:function(t,i){var s=e.jstree.plugins[t];return s?(this._data[t]={},s.prototype=this,new s(i,this)):this},init:function(t,i){this._model={data:{"#":{id:"#",parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}}},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}},this.element=e(t).addClass("jstree jstree-"+this._id),this.settings=i,this._data.core.ready=!1,this._data.core.loaded=!1,this._data.core.rtl="rtl"===this.element.css("direction"),this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl"),this.element.attr("role","tree"),this.settings.core.multiple&&this.element.attr("aria-multiselectable",!0),this.element.attr("tabindex")||this.element.attr("tabindex","0"),this.bind(),this.trigger("init"),this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0),this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return 3===this.nodeType&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove(),this.element.html("<ul class='jstree-container-ul jstree-children' role='group'><li id='j"+this._id+"_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='tree-item'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading"),this._data.core.li_height=this.get_container_ul().children("li").first().height()||24,this.trigger("loading"),this.load_node("#")},destroy:function(e){if(this._wrk)try{window.URL.revokeObjectURL(this._wrk),this._wrk=null}catch(t){}e||this.element.empty(),this.teardown()},teardown:function(){this.unbind(),this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),this.element=null},bind:function(){var t="",i=null,s=0;this.element.on("dblclick.jstree",function(){if(h.selection&&h.selection.empty)h.selection.empty();else if(window.getSelection){var e=window.getSelection();try{e.removeAllRanges(),e.collapse()}catch(t){}}}).on("mousedown.jstree",e.proxy(function(e){e.target===this.element[0]&&(e.preventDefault(),s=+new Date)},this)).on("mousedown.jstree",".jstree-ocl",function(e){e.preventDefault()}).on("click.jstree",".jstree-ocl",e.proxy(function(e){this.toggle_node(e.target)},this)).on("dblclick.jstree",".jstree-anchor",e.proxy(function(e){this.settings.core.dblclick_toggle&&this.toggle_node(e.target)},this)).on("click.jstree",".jstree-anchor",e.proxy(function(t){t.preventDefault(),t.currentTarget!==h.activeElement&&e(t.currentTarget).focus(),this.activate_node(t.currentTarget,t)},this)).on("keydown.jstree",".jstree-anchor",e.proxy(function(t){if("INPUT"===t.target.tagName)return!0;if(32!==t.which&&13!==t.which&&(t.shiftKey||t.ctrlKey||t.altKey||t.metaKey))return!0;var i=null;switch(this._data.core.rtl&&(37===t.which?t.which=39:39===t.which&&(t.which=37)),t.which){case 32:t.ctrlKey&&(t.type="click",e(t.currentTarget).trigger(t));break;case 13:t.type="click",e(t.currentTarget).trigger(t);break;case 37:t.preventDefault(),this.is_open(t.currentTarget)?this.close_node(t.currentTarget):(i=this.get_parent(t.currentTarget),i&&"#"!==i.id&&this.get_node(i,!0).children(".jstree-anchor").focus());break;case 38:t.preventDefault(),i=this.get_prev_dom(t.currentTarget),i&&i.length&&i.children(".jstree-anchor").focus();break;case 39:t.preventDefault(),this.is_closed(t.currentTarget)?this.open_node(t.currentTarget,function(e){this.get_node(e,!0).children(".jstree-anchor").focus()}):this.is_open(t.currentTarget)&&(i=this.get_node(t.currentTarget,!0).children(".jstree-children")[0],i&&e(this._firstChild(i)).children(".jstree-anchor").focus());break;case 40:t.preventDefault(),i=this.get_next_dom(t.currentTarget),i&&i.length&&i.children(".jstree-anchor").focus();break;case 106:this.open_all();break;case 36:t.preventDefault(),i=this._firstChild(this.get_container_ul()[0]),i&&e(i).children(".jstree-anchor").filter(":visible").focus();break;case 35:t.preventDefault(),this.element.find(".jstree-anchor").filter(":visible").last().focus()}},this)).on("load_node.jstree",e.proxy(function(t,i){i.status&&("#"!==i.node.id||this._data.core.loaded||(this._data.core.loaded=!0,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.trigger("loaded")),this._data.core.ready||setTimeout(e.proxy(function(){if(this.element&&!this.get_container_ul().find(".jstree-loading").length){if(this._data.core.ready=!0,this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var t,i,s=[];for(t=0,i=this._data.core.selected.length;i>t;t++)s=s.concat(this._model.data[this._data.core.selected[t]].parents);for(s=e.vakata.array_unique(s),t=0,i=s.length;i>t;t++)this.open_node(s[t],!1,0)}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}this.trigger("ready")}},this),0))},this)).on("keypress.jstree",e.proxy(function(s){if("INPUT"===s.target.tagName)return!0;i&&clearTimeout(i),i=setTimeout(function(){t=""},500);var n=String.fromCharCode(s.which).toLowerCase(),a=this.element.find(".jstree-anchor").filter(":visible"),r=a.index(h.activeElement)||0,o=!1;if(t+=n,t.length>1){if(a.slice(r).each(e.proxy(function(i,s){return 0===e(s).text().toLowerCase().indexOf(t)?(e(s).focus(),o=!0,!1):void 0},this)),o)return;if(a.slice(0,r).each(e.proxy(function(i,s){return 0===e(s).text().toLowerCase().indexOf(t)?(e(s).focus(),o=!0,!1):void 0},this)),o)return}if(new RegExp("^"+n+"+$").test(t)){if(a.slice(r+1).each(e.proxy(function(t,i){return e(i).text().toLowerCase().charAt(0)===n?(e(i).focus(),o=!0,!1):void 0},this)),o)return;if(a.slice(0,r+1).each(e.proxy(function(t,i){return e(i).text().toLowerCase().charAt(0)===n?(e(i).focus(),o=!0,!1):void 0},this)),o)return}},this)).on("init.jstree",e.proxy(function(){var e=this.settings.core.themes;this._data.core.themes.dots=e.dots,this._data.core.themes.stripes=e.stripes,this._data.core.themes.icons=e.icons,this.set_theme(e.name||"default",e.url),this.set_theme_variant(e.variant)},this)).on("loading.jstree",e.proxy(function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"](),this[this._data.core.themes.icons?"show_icons":"hide_icons"](),this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"]()},this)).on("blur.jstree",".jstree-anchor",e.proxy(function(t){this._data.core.focused=null,e(t.currentTarget).filter(".jstree-hovered").mouseleave(),this.element.attr("tabindex","0")},this)).on("focus.jstree",".jstree-anchor",e.proxy(function(t){var i=this.get_node(t.currentTarget);i&&i.id&&(this._data.core.focused=i.id),this.element.find(".jstree-hovered").not(t.currentTarget).mouseleave(),e(t.currentTarget).mouseenter(),this.element.attr("tabindex","-1")},this)).on("focus.jstree",e.proxy(function(){if(+new Date-s>500&&!this._data.core.focused){s=0;var e=this.get_node(this.element.attr("aria-activedescendant"),!0);e&&e.find("> .jstree-anchor").focus()}},this)).on("mouseenter.jstree",".jstree-anchor",e.proxy(function(e){this.hover_node(e.currentTarget)},this)).on("mouseleave.jstree",".jstree-anchor",e.proxy(function(e){this.dehover_node(e.currentTarget)},this))},unbind:function(){this.element.off(".jstree"),e(h).off(".jstree-"+this._id)},trigger:function(e,t){t||(t={}),t.instance=this,this.element.triggerHandler(e.replace(".jstree","")+".jstree",t)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children").first()},get_string:function(t){var i=this.settings.core.strings;return e.isFunction(i)?i.call(this,t):i&&i[t]?i[t]:t},_firstChild:function(e){for(e=e?e.firstChild:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_nextSibling:function(e){for(e=e?e.nextSibling:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;
return e},_previousSibling:function(e){for(e=e?e.previousSibling:null;null!==e&&1!==e.nodeType;)e=e.previousSibling;return e},get_node:function(t,i){t&&t.id&&(t=t.id);var s;try{if(this._model.data[t])t=this._model.data[t];else if("string"==typeof t&&this._model.data[t.replace(/^#/,"")])t=this._model.data[t.replace(/^#/,"")];else if("string"==typeof t&&(s=e("#"+t.replace(e.jstree.idregex,"\\$&"),this.element)).length&&this._model.data[s.closest(".jstree-node").attr("id")])t=this._model.data[s.closest(".jstree-node").attr("id")];else if((s=e(t,this.element)).length&&this._model.data[s.closest(".jstree-node").attr("id")])t=this._model.data[s.closest(".jstree-node").attr("id")];else{if(!(s=e(t,this.element)).length||!s.hasClass("jstree"))return!1;t=this._model.data["#"]}return i&&(t="#"===t.id?this.element:e("#"+t.id.replace(e.jstree.idregex,"\\$&"),this.element)),t}catch(n){return!1}},get_path:function(e,t,i){if(e=e.parents?e:this.get_node(e),!e||"#"===e.id||!e.parents)return!1;var s,n,a=[];for(a.push(i?e.id:e.text),s=0,n=e.parents.length;n>s;s++)a.push(i?e.parents[s]:this.get_text(e.parents[s]));return a=a.reverse().slice(1),t?a.join(t):a},get_next_dom:function(t,i){var s;if(t=this.get_node(t,!0),t[0]===this.element[0]){for(s=this._firstChild(this.get_container_ul()[0]);s&&0===s.offsetHeight;)s=this._nextSibling(s);return s?e(s):!1}if(!t||!t.length)return!1;if(i){s=t[0];do s=this._nextSibling(s);while(s&&0===s.offsetHeight);return s?e(s):!1}if(t.hasClass("jstree-open")){for(s=this._firstChild(t.children(".jstree-children")[0]);s&&0===s.offsetHeight;)s=this._nextSibling(s);if(null!==s)return e(s)}s=t[0];do s=this._nextSibling(s);while(s&&0===s.offsetHeight);return null!==s?e(s):t.parentsUntil(".jstree",".jstree-node").nextAll(".jstree-node:visible").first()},get_prev_dom:function(t,i){var s;if(t=this.get_node(t,!0),t[0]===this.element[0]){for(s=this.get_container_ul()[0].lastChild;s&&0===s.offsetHeight;)s=this._previousSibling(s);return s?e(s):!1}if(!t||!t.length)return!1;if(i){s=t[0];do s=this._previousSibling(s);while(s&&0===s.offsetHeight);return s?e(s):!1}s=t[0];do s=this._previousSibling(s);while(s&&0===s.offsetHeight);if(null!==s){for(t=e(s);t.hasClass("jstree-open");)t=t.children(".jstree-children").first().children(".jstree-node:visible:last");return t}return s=t[0].parentNode.parentNode,s&&s.className&&-1!==s.className.indexOf("jstree-node")?e(s):!1},get_parent:function(e){return e=this.get_node(e),e&&"#"!==e.id?e.parent:!1},get_children_dom:function(e){return e=this.get_node(e,!0),e[0]===this.element[0]?this.get_container_ul().children(".jstree-node"):e&&e.length?e.children(".jstree-children").children(".jstree-node"):!1},is_parent:function(e){return e=this.get_node(e),e&&(e.state.loaded===!1||e.children.length>0)},is_loaded:function(e){return e=this.get_node(e),e&&e.state.loaded},is_loading:function(e){return e=this.get_node(e),e&&e.state&&e.state.loading},is_open:function(e){return e=this.get_node(e),e&&e.state.opened},is_closed:function(e){return e=this.get_node(e),e&&this.is_parent(e)&&!e.state.opened},is_leaf:function(e){return!this.is_parent(e)},load_node:function(t,i){var s,n,a,r,o;if(e.isArray(t))return this._load_nodes(t.slice(),i),!0;if(t=this.get_node(t),!t)return i&&i.call(this,t,!1),!1;if(t.state.loaded){for(t.state.loaded=!1,s=0,n=t.children_d.length;n>s;s++){for(a=0,r=t.parents.length;r>a;a++)this._model.data[t.parents[a]].children_d=e.vakata.array_remove_item(this._model.data[t.parents[a]].children_d,t.children_d[s]);this._model.data[t.children_d[s]].state.selected&&(o=!0,this._data.core.selected=e.vakata.array_remove_item(this._data.core.selected,t.children_d[s])),delete this._model.data[t.children_d[s]]}t.children=[],t.children_d=[],o&&this.trigger("changed",{action:"load_node",node:t,selected:this._data.core.selected})}return t.state.failed=!1,t.state.loading=!0,this.get_node(t,!0).addClass("jstree-loading").attr("aria-busy",!0),this._load_node(t,e.proxy(function(e){t=this._model.data[t.id],t.state.loading=!1,t.state.loaded=e,t.state.failed=!t.state.loaded;var s=this.get_node(t,!0);t.state.loaded&&!t.children.length&&s&&s.length&&!s.hasClass("jstree-leaf")&&s.removeClass("jstree-closed jstree-open").addClass("jstree-leaf"),s.removeClass("jstree-loading").attr("aria-busy",!1),this.trigger("load_node",{node:t,status:e}),i&&i.call(this,t,e)},this)),!0},_load_nodes:function(e,t,i){var s,n,a=!0,r=function(){this._load_nodes(e,t,!0)},o=this._model.data,d=[];for(s=0,n=e.length;n>s;s++)!o[e[s]]||(o[e[s]].state.loaded||o[e[s]].state.failed)&&i||(this.is_loading(e[s])||this.load_node(e[s],r),a=!1);if(a){for(s=0,n=e.length;n>s;s++)o[e[s]]&&o[e[s]].state.loaded&&d.push(e[s]);t&&!t.done&&(t.call(this,d),t.done=!0)}},load_all:function(e,t){if(e||(e="#"),e=this.get_node(e),!e)return!1;var i,s,n=[],a=this._model.data,r=a[e.id].children_d;for(e.state&&!e.state.loaded&&n.push(e.id),i=0,s=r.length;s>i;i++)a[r[i]]&&a[r[i]].state&&!a[r[i]].state.loaded&&n.push(r[i]);n.length?this._load_nodes(n,function(){this.load_all(e,t)}):(t&&t.call(this,e),this.trigger("load_all",{node:e}))},_load_node:function(t,i){var s,n=this.settings.core.data;return n?e.isFunction(n)?n.call(this,t,e.proxy(function(s){s===!1&&i.call(this,!1),this["string"==typeof s?"_append_html_data":"_append_json_data"](t,"string"==typeof s?e(e.parseHTML(s)).filter(function(){return 3!==this.nodeType}):s,function(e){i.call(this,e)})},this)):"object"==typeof n?n.url?(n=e.extend(!0,{},n),e.isFunction(n.url)&&(n.url=n.url.call(this,t)),e.isFunction(n.data)&&(n.data=n.data.call(this,t)),e.ajax(n).done(e.proxy(function(s,n,a){var r=a.getResponseHeader("Content-Type");return r&&-1!==r.indexOf("json")||"object"==typeof s?this._append_json_data(t,s,function(e){i.call(this,e)}):r&&-1!==r.indexOf("html")||"string"==typeof s?this._append_html_data(t,e(e.parseHTML(s)).filter(function(){return 3!==this.nodeType}),function(e){i.call(this,e)}):(this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:t.id,xhr:a})},this.settings.core.error.call(this,this._data.core.last_error),i.call(this,!1))},this)).fail(e.proxy(function(e){i.call(this,!1),this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:t.id,xhr:e})},this.settings.core.error.call(this,this._data.core.last_error)},this))):(s=e.isArray(n)||e.isPlainObject(n)?JSON.parse(JSON.stringify(n)):n,"#"===t.id?this._append_json_data(t,s,function(e){i.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:t.id})},this.settings.core.error.call(this,this._data.core.last_error),i.call(this,!1))):"string"==typeof n?"#"===t.id?this._append_html_data(t,e(e.parseHTML(n)).filter(function(){return 3!==this.nodeType}),function(e){i.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:t.id})},this.settings.core.error.call(this,this._data.core.last_error),i.call(this,!1)):i.call(this,!1):"#"===t.id?this._append_html_data(t,this._data.core.original_container_html.clone(!0),function(e){i.call(this,e)}):i.call(this,!1)},_node_changed:function(e){e=this.get_node(e),e&&this._model.changed.push(e.id)},_append_html_data:function(t,i,s){t=this.get_node(t),t.children=[],t.children_d=[];var n,a,r,o=i.is("ul")?i.children():i,d=t.id,l=[],h=[],c=this._model.data,u=c[d],f=this._data.core.selected.length;for(o.each(e.proxy(function(t,i){n=this._parse_model_from_html(e(i),d,u.parents.concat()),n&&(l.push(n),h.push(n),c[n].children_d.length&&(h=h.concat(c[n].children_d)))},this)),u.children=l,u.children_d=h,a=0,r=u.parents.length;r>a;a++)c[u.parents[a]].children_d=c[u.parents[a]].children_d.concat(h);this.trigger("model",{nodes:h,parent:d}),"#"!==d?(this._node_changed(d),this.redraw()):(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0)),this._data.core.selected.length!==f&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),s.call(this,!0)},_append_json_data:function(t,i,s,n){if(null!==this.element){t=this.get_node(t),t.children=[],t.children_d=[],i.d&&(i=i.d,"string"==typeof i&&(i=JSON.parse(i))),e.isArray(i)||(i=[i]);var a=null,r={df:this._model.default_state,dat:i,par:t.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},o=function(e,t){e.data&&(e=e.data);var i,s,n,a,r=e.dat,o=e.par,d=[],l=[],h=[],c=e.df,u=e.t_id,f=e.t_cnt,p=e.m,g=p[o],_=e.sel,m=function(e,i,s){s=s?s.concat():[],i&&s.unshift(i);var n,a,r,o,d=e.id.toString(),l={id:d,text:e.text||"",icon:e.icon!==t?e.icon:!0,parent:i,parents:s,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(n in c)c.hasOwnProperty(n)&&(l.state[n]=c[n]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(l.icon=e.data.jstree.icon),(l.icon===t||null===l.icon||""===l.icon)&&(l.icon=!0),e&&e.data&&(l.data=e.data,e.data.jstree))for(n in e.data.jstree)e.data.jstree.hasOwnProperty(n)&&(l.state[n]=e.data.jstree[n]);if(e&&"object"==typeof e.state)for(n in e.state)e.state.hasOwnProperty(n)&&(l.state[n]=e.state[n]);if(e&&"object"==typeof e.li_attr)for(n in e.li_attr)e.li_attr.hasOwnProperty(n)&&(l.li_attr[n]=e.li_attr[n]);if(l.li_attr.id||(l.li_attr.id=d),e&&"object"==typeof e.a_attr)for(n in e.a_attr)e.a_attr.hasOwnProperty(n)&&(l.a_attr[n]=e.a_attr[n]);for(e&&e.children&&e.children===!0&&(l.state.loaded=!1,l.children=[],l.children_d=[]),p[l.id]=l,n=0,a=l.children.length;a>n;n++)r=m(p[l.children[n]],l.id,s),o=p[r],l.children_d.push(r),o.children_d.length&&(l.children_d=l.children_d.concat(o.children_d));return delete e.data,delete e.children,p[l.id].original=e,l.state.selected&&h.push(l.id),l.id},b=function(e,i,s){s=s?s.concat():[],i&&s.unshift(i);var n,a,r,o,d,l=!1;do l="j"+u+"_"+ ++f;while(p[l]);d={id:!1,text:"string"==typeof e?e:"",icon:"object"==typeof e&&e.icon!==t?e.icon:!0,parent:i,parents:s,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(n in c)c.hasOwnProperty(n)&&(d.state[n]=c[n]);if(e&&e.id&&(d.id=e.id.toString()),e&&e.text&&(d.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(d.icon=e.data.jstree.icon),(d.icon===t||null===d.icon||""===d.icon)&&(d.icon=!0),e&&e.data&&(d.data=e.data,e.data.jstree))for(n in e.data.jstree)e.data.jstree.hasOwnProperty(n)&&(d.state[n]=e.data.jstree[n]);if(e&&"object"==typeof e.state)for(n in e.state)e.state.hasOwnProperty(n)&&(d.state[n]=e.state[n]);if(e&&"object"==typeof e.li_attr)for(n in e.li_attr)e.li_attr.hasOwnProperty(n)&&(d.li_attr[n]=e.li_attr[n]);if(d.li_attr.id&&!d.id&&(d.id=d.li_attr.id.toString()),d.id||(d.id=l),d.li_attr.id||(d.li_attr.id=d.id),e&&"object"==typeof e.a_attr)for(n in e.a_attr)e.a_attr.hasOwnProperty(n)&&(d.a_attr[n]=e.a_attr[n]);if(e&&e.children&&e.children.length){for(n=0,a=e.children.length;a>n;n++)r=b(e.children[n],d.id,s),o=p[r],d.children.push(r),o.children_d.length&&(d.children_d=d.children_d.concat(o.children_d));d.children_d=d.children_d.concat(d.children)}return e&&e.children&&e.children===!0&&(d.state.loaded=!1,d.children=[],d.children_d=[]),delete e.data,delete e.children,d.original=e,p[d.id]=d,d.state.selected&&h.push(d.id),d.id};if(r.length&&r[0].id!==t&&r[0].parent!==t){for(s=0,n=r.length;n>s;s++)r[s].children||(r[s].children=[]),p[r[s].id.toString()]=r[s];for(s=0,n=r.length;n>s;s++)p[r[s].parent.toString()].children.push(r[s].id.toString()),g.children_d.push(r[s].id.toString());for(s=0,n=g.children.length;n>s;s++)i=m(p[g.children[s]],o,g.parents.concat()),l.push(i),p[i].children_d.length&&(l=l.concat(p[i].children_d));for(s=0,n=g.parents.length;n>s;s++)p[g.parents[s]].children_d=p[g.parents[s]].children_d.concat(l);a={cnt:f,mod:p,sel:_,par:o,dpc:l,add:h}}else{for(s=0,n=r.length;n>s;s++)i=b(r[s],o,g.parents.concat()),i&&(d.push(i),l.push(i),p[i].children_d.length&&(l=l.concat(p[i].children_d)));for(g.children=d,g.children_d=l,s=0,n=g.parents.length;n>s;s++)p[g.parents[s]].children_d=p[g.parents[s]].children_d.concat(l);a={cnt:f,mod:p,sel:_,par:o,dpc:l,add:h}}return"undefined"!=typeof window&&"undefined"!=typeof window.document?a:void postMessage(a)},d=function(t,i){if(null!==this.element){if(this._cnt=t.cnt,this._model.data=t.mod,i){var n,a,r=t.add,o=t.sel,d=this._data.core.selected.slice(),l=this._model.data;if(o.length!==d.length||e.vakata.array_unique(o.concat(d)).length!==o.length){for(n=0,a=o.length;a>n;n++)-1===e.inArray(o[n],r)&&-1===e.inArray(o[n],d)&&(l[o[n]].state.selected=!1);for(n=0,a=d.length;a>n;n++)-1===e.inArray(d[n],o)&&(l[d[n]].state.selected=!0)}}t.add.length&&(this._data.core.selected=this._data.core.selected.concat(t.add)),this.trigger("model",{nodes:t.dpc,parent:t.par}),"#"!==t.par?(this._node_changed(t.par),this.redraw()):this.redraw(!0),t.add.length&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),s.call(this,!0)}};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker)try{null===this._wrk&&(this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+o.toString()],{type:"text/javascript"}))),!this._data.core.working||n?(this._data.core.working=!0,a=new window.Worker(this._wrk),a.onmessage=e.proxy(function(e){d.call(this,e.data,!0);try{a.terminate(),a=null}catch(t){}this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1},this),r.par?a.postMessage(r):this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1):this._data.core.worker_queue.push([t,i,s,!0])}catch(l){d.call(this,o(r),!1),this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}else d.call(this,o(r),!1)}},_parse_model_from_html:function(t,i,s){s=s?[].concat(s):[],i&&s.unshift(i);var n,a,r,o,d,l=this._model.data,h={id:!1,text:!1,icon:!0,parent:i,parents:s,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(r in this._model.default_state)this._model.default_state.hasOwnProperty(r)&&(h.state[r]=this._model.default_state[r]);if(o=e.vakata.attributes(t,!0),e.each(o,function(t,i){return i=e.trim(i),i.length?(h.li_attr[t]=i,void("id"===t&&(h.id=i.toString()))):!0}),o=t.children("a").first(),o.length&&(o=e.vakata.attributes(o,!0),e.each(o,function(t,i){i=e.trim(i),i.length&&(h.a_attr[t]=i)})),o=t.children("a").first().length?t.children("a").first().clone():t.clone(),o.children("ins, i, ul").remove(),o=o.html(),o=e("<div />").html(o),h.text=this.settings.core.force_text?o.text():o.html(),o=t.data(),h.data=o?e.extend(!0,{},o):null,h.state.opened=t.hasClass("jstree-open"),h.state.selected=t.children("a").hasClass("jstree-clicked"),h.state.disabled=t.children("a").hasClass("jstree-disabled"),h.data&&h.data.jstree)for(r in h.data.jstree)h.data.jstree.hasOwnProperty(r)&&(h.state[r]=h.data.jstree[r]);o=t.children("a").children(".jstree-themeicon"),o.length&&(h.icon=o.hasClass("jstree-themeicon-hidden")?!1:o.attr("rel")),void 0!==h.state.icon&&(h.icon=h.state.icon),(void 0===h.icon||null===h.icon||""===h.icon)&&(h.icon=!0),o=t.children("ul").children("li");do d="j"+this._id+"_"+ ++this._cnt;while(l[d]);return h.id=h.li_attr.id?h.li_attr.id.toString():d,o.length?(o.each(e.proxy(function(t,i){n=this._parse_model_from_html(e(i),h.id,s),a=this._model.data[n],h.children.push(n),a.children_d.length&&(h.children_d=h.children_d.concat(a.children_d))},this)),h.children_d=h.children_d.concat(h.children)):t.hasClass("jstree-closed")&&(h.state.loaded=!1),h.li_attr["class"]&&(h.li_attr["class"]=h.li_attr["class"].replace("jstree-closed","").replace("jstree-open","")),h.a_attr["class"]&&(h.a_attr["class"]=h.a_attr["class"].replace("jstree-clicked","").replace("jstree-disabled","")),l[h.id]=h,h.state.selected&&this._data.core.selected.push(h.id),h.id},_parse_model_from_flat_json:function(e,t,i){i=i?i.concat():[],t&&i.unshift(t);var s,n,a,r,o=e.id.toString(),d=this._model.data,l=this._model.default_state,h={id:o,text:e.text||"",icon:void 0!==e.icon?e.icon:!0,parent:t,parents:i,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(s in l)l.hasOwnProperty(s)&&(h.state[s]=l[s]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(h.icon=e.data.jstree.icon),(void 0===h.icon||null===h.icon||""===h.icon)&&(h.icon=!0),e&&e.data&&(h.data=e.data,e.data.jstree))for(s in e.data.jstree)e.data.jstree.hasOwnProperty(s)&&(h.state[s]=e.data.jstree[s]);if(e&&"object"==typeof e.state)for(s in e.state)e.state.hasOwnProperty(s)&&(h.state[s]=e.state[s]);if(e&&"object"==typeof e.li_attr)for(s in e.li_attr)e.li_attr.hasOwnProperty(s)&&(h.li_attr[s]=e.li_attr[s]);if(h.li_attr.id||(h.li_attr.id=o),e&&"object"==typeof e.a_attr)for(s in e.a_attr)e.a_attr.hasOwnProperty(s)&&(h.a_attr[s]=e.a_attr[s]);for(e&&e.children&&e.children===!0&&(h.state.loaded=!1,h.children=[],h.children_d=[]),d[h.id]=h,s=0,n=h.children.length;n>s;s++)a=this._parse_model_from_flat_json(d[h.children[s]],h.id,i),r=d[a],h.children_d.push(a),r.children_d.length&&(h.children_d=h.children_d.concat(r.children_d));return delete e.data,delete e.children,d[h.id].original=e,h.state.selected&&this._data.core.selected.push(h.id),h.id},_parse_model_from_json:function(e,t,i){i=i?i.concat():[],t&&i.unshift(t);var s,n,a,r,o,d=!1,l=this._model.data,h=this._model.default_state;do d="j"+this._id+"_"+ ++this._cnt;while(l[d]);o={id:!1,text:"string"==typeof e?e:"",icon:"object"==typeof e&&void 0!==e.icon?e.icon:!0,parent:t,parents:i,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(s in h)h.hasOwnProperty(s)&&(o.state[s]=h[s]);if(e&&e.id&&(o.id=e.id.toString()),e&&e.text&&(o.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(o.icon=e.data.jstree.icon),(void 0===o.icon||null===o.icon||""===o.icon)&&(o.icon=!0),e&&e.data&&(o.data=e.data,e.data.jstree))for(s in e.data.jstree)e.data.jstree.hasOwnProperty(s)&&(o.state[s]=e.data.jstree[s]);if(e&&"object"==typeof e.state)for(s in e.state)e.state.hasOwnProperty(s)&&(o.state[s]=e.state[s]);if(e&&"object"==typeof e.li_attr)for(s in e.li_attr)e.li_attr.hasOwnProperty(s)&&(o.li_attr[s]=e.li_attr[s]);if(o.li_attr.id&&!o.id&&(o.id=o.li_attr.id.toString()),o.id||(o.id=d),o.li_attr.id||(o.li_attr.id=o.id),e&&"object"==typeof e.a_attr)for(s in e.a_attr)e.a_attr.hasOwnProperty(s)&&(o.a_attr[s]=e.a_attr[s]);if(e&&e.children&&e.children.length){for(s=0,n=e.children.length;n>s;s++)a=this._parse_model_from_json(e.children[s],o.id,i),r=l[a],o.children.push(a),r.children_d.length&&(o.children_d=o.children_d.concat(r.children_d));o.children_d=o.children_d.concat(o.children)}return e&&e.children&&e.children===!0&&(o.state.loaded=!1,o.children=[],o.children_d=[]),delete e.data,delete e.children,o.original=e,l[o.id]=o,o.state.selected&&this._data.core.selected.push(o.id),o.id},_redraw:function(){var e,t,i,s=this._model.force_full_redraw?this._model.data["#"].children.concat([]):this._model.changed.concat([]),n=h.createElement("UL"),a=this._data.core.focused;for(t=0,i=s.length;i>t;t++)e=this.redraw_node(s[t],!0,this._model.force_full_redraw),e&&this._model.force_full_redraw&&n.appendChild(e);this._model.force_full_redraw&&(n.className=this.get_container_ul()[0].className,n.setAttribute("role","group"),this.element.empty().append(n)),null!==a&&(e=this.get_node(a,!0),e&&e.length&&e.children(".jstree-anchor")[0]!==h.activeElement?e.children(".jstree-anchor").focus():this._data.core.focused=null),this._model.force_full_redraw=!1,this._model.changed=[],this.trigger("redraw",{nodes:s})},redraw:function(e){e&&(this._model.force_full_redraw=!0),this._redraw()},draw_children:function(e){var t=this.get_node(e),i=!1,s=!1,n=!1,a=h;if(!t)return!1;if("#"===t.id)return this.redraw(!0);if(e=this.get_node(e,!0),!e||!e.length)return!1;if(e.children(".jstree-children").remove(),e=e[0],t.children.length&&t.state.loaded){for(n=a.createElement("UL"),n.setAttribute("role","group"),n.className="jstree-children",i=0,s=t.children.length;s>i;i++)n.appendChild(this.redraw_node(t.children[i],!0,!0));e.appendChild(n)}},redraw_node:function(t,i,s,n){var a=this.get_node(t),r=!1,o=!1,d=!1,l=!1,u=!1,f=!1,p="",g=h,_=this._model.data,m=!1,b=null,v=0,y=0;if(!a)return!1;if("#"===a.id)return this.redraw(!0);if(i=i||0===a.children.length,t=h.querySelector?this.element[0].querySelector("#"+(-1!=="0123456789".indexOf(a.id[0])?"\\3"+a.id[0]+" "+a.id.substr(1).replace(e.jstree.idregex,"\\$&"):a.id.replace(e.jstree.idregex,"\\$&"))):h.getElementById(a.id))t=e(t),s||(r=t.parent().parent()[0],r===this.element[0]&&(r=null),o=t.index()),i||!a.children.length||t.children(".jstree-children").length||(i=!0),i||(d=t.children(".jstree-children")[0]),m=t.children(".jstree-anchor")[0]===h.activeElement,t.remove();else if(i=!0,!s){if(r="#"!==a.parent?e("#"+a.parent.replace(e.jstree.idregex,"\\$&"),this.element)[0]:null,!(null===r||r&&_[a.parent].state.opened))return!1;o=e.inArray(a.id,null===r?_["#"].children:_[a.parent].children)}t=c.cloneNode(!0),p="jstree-node ";for(l in a.li_attr)if(a.li_attr.hasOwnProperty(l)){if("id"===l)continue;"class"!==l?t.setAttribute(l,a.li_attr[l]):p+=a.li_attr[l]}a.a_attr.id||(a.a_attr.id=a.id+"_anchor"),t.setAttribute("aria-selected",!!a.state.selected),t.setAttribute("aria-level",a.parents.length),t.setAttribute("aria-labelledby",a.a_attr.id),a.state.disabled&&t.setAttribute("aria-disabled",!0),a.state.loaded&&!a.children.length?p+=" jstree-leaf":(p+=a.state.opened&&a.state.loaded?" jstree-open":" jstree-closed",t.setAttribute("aria-expanded",a.state.opened&&a.state.loaded)),null!==a.parent&&_[a.parent].children[_[a.parent].children.length-1]===a.id&&(p+=" jstree-last"),t.id=a.id,t.className=p,p=(a.state.selected?" jstree-clicked":"")+(a.state.disabled?" jstree-disabled":"");for(u in a.a_attr)if(a.a_attr.hasOwnProperty(u)){if("href"===u&&"#"===a.a_attr[u])continue;"class"!==u?t.childNodes[1].setAttribute(u,a.a_attr[u]):p+=" "+a.a_attr[u]}if(p.length&&(t.childNodes[1].className="jstree-anchor "+p),(a.icon&&a.icon!==!0||a.icon===!1)&&(a.icon===!1?t.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":-1===a.icon.indexOf("/")&&-1===a.icon.indexOf(".")?t.childNodes[1].childNodes[0].className+=" "+a.icon+" jstree-themeicon-custom":(t.childNodes[1].childNodes[0].style.backgroundImage="url("+a.icon+")",t.childNodes[1].childNodes[0].style.backgroundPosition="center center",t.childNodes[1].childNodes[0].style.backgroundSize="auto",t.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom")),this.settings.core.force_text?t.childNodes[1].appendChild(g.createTextNode(a.text)):t.childNodes[1].innerHTML+=a.text,i&&a.children.length&&(a.state.opened||n)&&a.state.loaded){for(f=g.createElement("UL"),f.setAttribute("role","group"),f.className="jstree-children",l=0,u=a.children.length;u>l;l++)f.appendChild(this.redraw_node(a.children[l],i,!0));t.appendChild(f)}if(d&&t.appendChild(d),!s){for(r||(r=this.element[0]),l=0,u=r.childNodes.length;u>l;l++)if(r.childNodes[l]&&r.childNodes[l].className&&-1!==r.childNodes[l].className.indexOf("jstree-children")){b=r.childNodes[l];break}b||(b=g.createElement("UL"),b.setAttribute("role","group"),b.className="jstree-children",r.appendChild(b)),r=b,o<r.childNodes.length?r.insertBefore(t,r.childNodes[o]):r.appendChild(t),m&&(v=this.element[0].scrollTop,y=this.element[0].scrollLeft,t.childNodes[1].focus(),this.element[0].scrollTop=v,this.element[0].scrollLeft=y)}return a.state.opened&&!a.state.loaded&&(a.state.opened=!1,setTimeout(e.proxy(function(){this.open_node(a.id,!1,0)},this),0)),t},open_node:function(t,i,s){var n,a,r,o;if(e.isArray(t)){for(t=t.slice(),n=0,a=t.length;a>n;n++)this.open_node(t[n],i,s);return!0}if(t=this.get_node(t),!t||"#"===t.id)return!1;if(s=void 0===s?this.settings.core.animation:s,!this.is_closed(t))return i&&i.call(this,t,!1),!1;if(this.is_loaded(t))r=this.get_node(t,!0),o=this,r.length&&(s&&r.children(".jstree-children").length&&r.children(".jstree-children").stop(!0,!0),t.children.length&&!this._firstChild(r.children(".jstree-children")[0])&&this.draw_children(t),s?(this.trigger("before_open",{node:t}),r.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",!0).children(".jstree-children").stop(!0,!0).slideDown(s,function(){this.style.display="",o.trigger("after_open",{node:t})})):(this.trigger("before_open",{node:t}),r[0].className=r[0].className.replace("jstree-closed","jstree-open"),r[0].setAttribute("aria-expanded",!0))),t.state.opened=!0,i&&i.call(this,t,!0),r.length||this.trigger("before_open",{node:t}),this.trigger("open_node",{node:t}),s&&r.length||this.trigger("after_open",{node:t});else{if(this.is_loading(t))return setTimeout(e.proxy(function(){this.open_node(t,i,s)},this),500);this.load_node(t,function(e,t){return t?this.open_node(e,i,s):i?i.call(this,e,!1):!1})}},_open_to:function(t){if(t=this.get_node(t),!t||"#"===t.id)return!1;var i,s,n=t.parents;for(i=0,s=n.length;s>i;i+=1)"#"!==i&&this.open_node(n[i],!1,0);return e("#"+t.id.replace(e.jstree.idregex,"\\$&"),this.element)},close_node:function(t,i){var s,n,a,r;if(e.isArray(t)){for(t=t.slice(),s=0,n=t.length;n>s;s++)this.close_node(t[s],i);return!0}return t=this.get_node(t),t&&"#"!==t.id?this.is_closed(t)?!1:(i=void 0===i?this.settings.core.animation:i,a=this,r=this.get_node(t,!0),r.length&&(i?r.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",!1).children(".jstree-children").stop(!0,!0).slideUp(i,function(){this.style.display="",r.children(".jstree-children").remove(),a.trigger("after_close",{node:t})}):(r[0].className=r[0].className.replace("jstree-open","jstree-closed"),r.attr("aria-expanded",!1).children(".jstree-children").remove())),t.state.opened=!1,this.trigger("close_node",{node:t}),void(i&&r.length||this.trigger("after_close",{node:t}))):!1},toggle_node:function(t){var i,s;if(e.isArray(t)){for(t=t.slice(),i=0,s=t.length;s>i;i++)this.toggle_node(t[i]);return!0}return this.is_closed(t)?this.open_node(t):this.is_open(t)?this.close_node(t):void 0},open_all:function(e,t,i){if(e||(e="#"),e=this.get_node(e),!e)return!1;var s,n,a,r="#"===e.id?this.get_container_ul():this.get_node(e,!0);if(!r.length){for(s=0,n=e.children_d.length;n>s;s++)this.is_closed(this._model.data[e.children_d[s]])&&(this._model.data[e.children_d[s]].state.opened=!0);return this.trigger("open_all",{node:e})}i=i||r,a=this,r=this.is_closed(e)?r.find(".jstree-closed").addBack():r.find(".jstree-closed"),r.each(function(){a.open_node(this,function(e,s){s&&this.is_parent(e)&&this.open_all(e,t,i)},t||0)}),0===i.find(".jstree-closed").length&&this.trigger("open_all",{node:this.get_node(i)})},close_all:function(t,i){if(t||(t="#"),t=this.get_node(t),!t)return!1;var s,n,a="#"===t.id?this.get_container_ul():this.get_node(t,!0),r=this;if(!a.length){for(s=0,n=t.children_d.length;n>s;s++)this._model.data[t.children_d[s]].state.opened=!1;return this.trigger("close_all",{node:t})}a=this.is_open(t)?a.find(".jstree-open").addBack():a.find(".jstree-open"),e(a.get().reverse()).each(function(){r.close_node(this,i||0)}),this.trigger("close_all",{node:t})},is_disabled:function(e){return e=this.get_node(e),e&&e.state&&e.state.disabled},enable_node:function(t){var i,s;if(e.isArray(t)){for(t=t.slice(),i=0,s=t.length;s>i;i++)this.enable_node(t[i]);return!0}return t=this.get_node(t),t&&"#"!==t.id?(t.state.disabled=!1,this.get_node(t,!0).children(".jstree-anchor").removeClass("jstree-disabled").attr("aria-disabled",!1),void this.trigger("enable_node",{node:t})):!1},disable_node:function(t){var i,s;if(e.isArray(t)){for(t=t.slice(),i=0,s=t.length;s>i;i++)this.disable_node(t[i]);return!0}return t=this.get_node(t),t&&"#"!==t.id?(t.state.disabled=!0,this.get_node(t,!0).children(".jstree-anchor").addClass("jstree-disabled").attr("aria-disabled",!0),void this.trigger("disable_node",{node:t})):!1},activate_node:function(e,t){if(this.is_disabled(e))return!1;if(this._data.core.last_clicked=this._data.core.last_clicked&&void 0!==this._data.core.last_clicked.id?this.get_node(this._data.core.last_clicked.id):null,this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected&&(this._data.core.last_clicked=null),!this._data.core.last_clicked&&this._data.core.selected.length&&(this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])),this.settings.core.multiple&&(t.metaKey||t.ctrlKey||t.shiftKey)&&(!t.shiftKey||this._data.core.last_clicked&&this.get_parent(e)&&this.get_parent(e)===this._data.core.last_clicked.parent))if(t.shiftKey){var i,s,n=this.get_node(e).id,a=this._data.core.last_clicked.id,r=this.get_node(this._data.core.last_clicked.parent).children,o=!1;for(i=0,s=r.length;s>i;i+=1)r[i]===n&&(o=!o),r[i]===a&&(o=!o),this.is_disabled(r[i])||!o&&r[i]!==n&&r[i]!==a?this.deselect_node(r[i],!0,t):this.select_node(r[i],!0,!1,t);this.trigger("changed",{action:"select_node",node:this.get_node(e),selected:this._data.core.selected,event:t})}else this.is_selected(e)?this.deselect_node(e,!1,t):this.select_node(e,!1,!1,t);else!this.settings.core.multiple&&(t.metaKey||t.ctrlKey||t.shiftKey)&&this.is_selected(e)?this.deselect_node(e,!1,t):(this.deselect_all(!0),this.select_node(e,!1,!1,t),this._data.core.last_clicked=this.get_node(e));this.trigger("activate_node",{node:this.get_node(e)})},hover_node:function(e){if(e=this.get_node(e,!0),!e||!e.length||e.children(".jstree-hovered").length)return!1;var t=this.element.find(".jstree-hovered"),i=this.element;t&&t.length&&this.dehover_node(t),e.children(".jstree-anchor").addClass("jstree-hovered"),this.trigger("hover_node",{node:this.get_node(e)}),setTimeout(function(){i.attr("aria-activedescendant",e[0].id)},0)},dehover_node:function(e){return e=this.get_node(e,!0),e&&e.length&&e.children(".jstree-hovered").length?(e.children(".jstree-anchor").removeClass("jstree-hovered"),void this.trigger("dehover_node",{node:this.get_node(e)})):!1},select_node:function(t,i,s,n){var a,r,o;if(e.isArray(t)){for(t=t.slice(),r=0,o=t.length;o>r;r++)this.select_node(t[r],i,s,n);return!0}return t=this.get_node(t),t&&"#"!==t.id?(a=this.get_node(t,!0),void(t.state.selected||(t.state.selected=!0,this._data.core.selected.push(t.id),s||(a=this._open_to(t)),a&&a.length&&a.attr("aria-selected",!0).children(".jstree-anchor").addClass("jstree-clicked"),this.trigger("select_node",{node:t,selected:this._data.core.selected,event:n}),i||this.trigger("changed",{action:"select_node",node:t,selected:this._data.core.selected,event:n})))):!1},deselect_node:function(t,i,s){var n,a,r;if(e.isArray(t)){for(t=t.slice(),n=0,a=t.length;a>n;n++)this.deselect_node(t[n],i,s);return!0}return t=this.get_node(t),t&&"#"!==t.id?(r=this.get_node(t,!0),void(t.state.selected&&(t.state.selected=!1,this._data.core.selected=e.vakata.array_remove_item(this._data.core.selected,t.id),r.length&&r.attr("aria-selected",!1).children(".jstree-anchor").removeClass("jstree-clicked"),this.trigger("deselect_node",{node:t,selected:this._data.core.selected,event:s}),i||this.trigger("changed",{action:"deselect_node",node:t,selected:this._data.core.selected,event:s})))):!1},select_all:function(e){var t,i,s=this._data.core.selected.concat([]);for(this._data.core.selected=this._model.data["#"].children_d.concat(),t=0,i=this._data.core.selected.length;i>t;t++)this._model.data[this._data.core.selected[t]]&&(this._model.data[this._data.core.selected[t]].state.selected=!0);this.redraw(!0),this.trigger("select_all",{selected:this._data.core.selected}),e||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:s})},deselect_all:function(e){var t,i,s=this._data.core.selected.concat([]);for(t=0,i=this._data.core.selected.length;i>t;t++)this._model.data[this._data.core.selected[t]]&&(this._model.data[this._data.core.selected[t]].state.selected=!1);
this._data.core.selected=[],this.element.find(".jstree-clicked").removeClass("jstree-clicked").parent().attr("aria-selected",!1),this.trigger("deselect_all",{selected:this._data.core.selected,node:s}),e||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:s})},is_selected:function(e){return e=this.get_node(e),e&&"#"!==e.id?e.state.selected:!1},get_selected:function(t){return t?e.map(this._data.core.selected,e.proxy(function(e){return this.get_node(e)},this)):this._data.core.selected.slice()},get_top_selected:function(t){var i,s,n,a,r=this.get_selected(!0),o={};for(i=0,s=r.length;s>i;i++)o[r[i].id]=r[i];for(i=0,s=r.length;s>i;i++)for(n=0,a=r[i].children_d.length;a>n;n++)o[r[i].children_d[n]]&&delete o[r[i].children_d[n]];r=[];for(i in o)o.hasOwnProperty(i)&&r.push(i);return t?e.map(r,e.proxy(function(e){return this.get_node(e)},this)):r},get_bottom_selected:function(t){var i,s,n=this.get_selected(!0),a=[];for(i=0,s=n.length;s>i;i++)n[i].children.length||a.push(n[i].id);return t?e.map(a,e.proxy(function(e){return this.get_node(e)},this)):a},get_state:function(){var e,t={core:{open:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},selected:[]}};for(e in this._model.data)this._model.data.hasOwnProperty(e)&&"#"!==e&&(this._model.data[e].state.opened&&t.core.open.push(e),this._model.data[e].state.selected&&t.core.selected.push(e));return t},set_state:function(t,i){if(t){if(t.core){var s,n;if(t.core.open)return e.isArray(t.core.open)&&t.core.open.length?this._load_nodes(t.core.open,function(e){this.open_node(e,!1,0),delete t.core.open,this.set_state(t,i)},!0):(delete t.core.open,this.set_state(t,i)),!1;if(t.core.scroll)return t.core.scroll&&void 0!==t.core.scroll.left&&this.element.scrollLeft(t.core.scroll.left),t.core.scroll&&void 0!==t.core.scroll.top&&this.element.scrollTop(t.core.scroll.top),delete t.core.scroll,this.set_state(t,i),!1;if(t.core.selected)return s=this,this.deselect_all(),e.each(t.core.selected,function(e,t){s.select_node(t,!1,!0)}),delete t.core.selected,this.set_state(t,i),!1;for(n in t)t.hasOwnProperty(n)&&"core"!==n&&-1===e.inArray(n,this.settings.plugins)&&delete t[n];if(e.isEmptyObject(t.core))return delete t.core,this.set_state(t,i),!1}return e.isEmptyObject(t)?(t=null,i&&i.call(this),this.trigger("set_state"),!1):!0}return!1},refresh:function(t,i){this._data.core.state=i===!0?{}:this.get_state(),i&&e.isFunction(i)&&(this._data.core.state=i.call(this,this._data.core.state)),this._cnt=0,this._model.data={"#":{id:"#",parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}}};var s=this.get_container_ul()[0].className;t||(this.element.html("<ul class='"+s+"' role='group'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='treeitem' id='j"+this._id+"_loading'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading")),this.load_node("#",function(t,i){i&&(this.get_container_ul()[0].className=s,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.set_state(e.extend(!0,{},this._data.core.state),function(){this.trigger("refresh")})),this._data.core.state=null})},refresh_node:function(t){if(t=this.get_node(t),!t||"#"===t.id)return!1;var i=[],s=[];this._data.core.selected.concat([]);s.push(t.id),t.state.opened===!0&&i.push(t.id),this.get_node(t,!0).find(".jstree-open").each(function(){i.push(this.id)}),this._load_nodes(s,e.proxy(function(e){this.open_node(i,!1,0),this.select_node(this._data.core.selected),this.trigger("refresh_node",{node:t,nodes:e})},this))},set_id:function(t,i){if(t=this.get_node(t),!t||"#"===t.id)return!1;var s,n,a=this._model.data;for(i=i.toString(),a[t.parent].children[e.inArray(t.id,a[t.parent].children)]=i,s=0,n=t.parents.length;n>s;s++)a[t.parents[s]].children_d[e.inArray(t.id,a[t.parents[s]].children_d)]=i;for(s=0,n=t.children.length;n>s;s++)a[t.children[s]].parent=i;for(s=0,n=t.children_d.length;n>s;s++)a[t.children_d[s]].parents[e.inArray(t.id,a[t.children_d[s]].parents)]=i;return s=e.inArray(t.id,this._data.core.selected),-1!==s&&(this._data.core.selected[s]=i),s=this.get_node(t.id,!0),s&&(s.attr("id",i).children(".jstree-anchor").attr("id",i+"_anchor").end().attr("aria-labelledby",i+"_anchor"),this.element.attr("aria-activedescendant")===t.id&&this.element.attr("aria-activedescendant",i)),delete a[t.id],t.id=i,t.li_attr.id=i,a[i]=t,!0},get_text:function(e){return e=this.get_node(e),e&&"#"!==e.id?e.text:!1},set_text:function(t,i){var s,n;if(e.isArray(t)){for(t=t.slice(),s=0,n=t.length;n>s;s++)this.set_text(t[s],i);return!0}return t=this.get_node(t),t&&"#"!==t.id?(t.text=i,this.get_node(t,!0).length&&this.redraw_node(t.id),this.trigger("set_text",{obj:t,text:i}),!0):!1},get_json:function(t,i,s){if(t=this.get_node(t||"#"),!t)return!1;i&&i.flat&&!s&&(s=[]);var n,a,r={id:t.id,text:t.text,icon:this.get_icon(t),li_attr:e.extend(!0,{},t.li_attr),a_attr:e.extend(!0,{},t.a_attr),state:{},data:i&&i.no_data?!1:e.extend(!0,{},t.data)};if(i&&i.flat?r.parent=t.parent:r.children=[],!i||!i.no_state)for(n in t.state)t.state.hasOwnProperty(n)&&(r.state[n]=t.state[n]);if(i&&i.no_id&&(delete r.id,r.li_attr&&r.li_attr.id&&delete r.li_attr.id,r.a_attr&&r.a_attr.id&&delete r.a_attr.id),i&&i.flat&&"#"!==t.id&&s.push(r),!i||!i.no_children)for(n=0,a=t.children.length;a>n;n++)i&&i.flat?this.get_json(t.children[n],i,s):r.children.push(this.get_json(t.children[n],i));return i&&i.flat?s:"#"===t.id?r.children:r},create_node:function(t,i,s,n,a){if(null===t&&(t="#"),t=this.get_node(t),!t)return!1;if(s=void 0===s?"last":s,!s.toString().match(/^(before|after)$/)&&!a&&!this.is_loaded(t))return this.load_node(t,function(){this.create_node(t,i,s,n,!0)});i||(i={text:this.get_string("New node")}),"string"==typeof i&&(i={text:i}),void 0===i.text&&(i.text=this.get_string("New node"));var r,o,d,l;switch("#"===t.id&&("before"===s&&(s="first"),"after"===s&&(s="last")),s){case"before":r=this.get_node(t.parent),s=e.inArray(t.id,r.children),t=r;break;case"after":r=this.get_node(t.parent),s=e.inArray(t.id,r.children)+1,t=r;break;case"inside":case"first":s=0;break;case"last":s=t.children.length;break;default:s||(s=0)}if(s>t.children.length&&(s=t.children.length),i.id||(i.id=!0),!this.check("create_node",i,t,s))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(i.id===!0&&delete i.id,i=this._parse_model_from_json(i,t.id,t.parents.concat()),!i)return!1;for(r=this.get_node(i),o=[],o.push(i),o=o.concat(r.children_d),this.trigger("model",{nodes:o,parent:t.id}),t.children_d=t.children_d.concat(o),d=0,l=t.parents.length;l>d;d++)this._model.data[t.parents[d]].children_d=this._model.data[t.parents[d]].children_d.concat(o);for(i=r,r=[],d=0,l=t.children.length;l>d;d++)r[d>=s?d+1:d]=t.children[d];return r[s]=i.id,t.children=r,this.redraw_node(t,!0),n&&n.call(this,this.get_node(i)),this.trigger("create_node",{node:this.get_node(i),parent:t.id,position:s}),i.id},rename_node:function(t,i){var s,n,a;if(e.isArray(t)){for(t=t.slice(),s=0,n=t.length;n>s;s++)this.rename_node(t[s],i);return!0}return t=this.get_node(t),t&&"#"!==t.id?(a=t.text,this.check("rename_node",t,this.get_parent(t),i)?(this.set_text(t,i),this.trigger("rename_node",{node:t,text:i,old:a}),!0):(this.settings.core.error.call(this,this._data.core.last_error),!1)):!1},delete_node:function(t){var i,s,n,a,r,o,d,l,h,c;if(e.isArray(t)){for(t=t.slice(),i=0,s=t.length;s>i;i++)this.delete_node(t[i]);return!0}if(t=this.get_node(t),!t||"#"===t.id)return!1;if(n=this.get_node(t.parent),a=e.inArray(t.id,n.children),c=!1,!this.check("delete_node",t,n,a))return this.settings.core.error.call(this,this._data.core.last_error),!1;for(-1!==a&&(n.children=e.vakata.array_remove(n.children,a)),r=t.children_d.concat([]),r.push(t.id),l=0,h=r.length;h>l;l++){for(o=0,d=t.parents.length;d>o;o++)a=e.inArray(r[l],this._model.data[t.parents[o]].children_d),-1!==a&&(this._model.data[t.parents[o]].children_d=e.vakata.array_remove(this._model.data[t.parents[o]].children_d,a));this._model.data[r[l]].state.selected&&(c=!0,a=e.inArray(r[l],this._data.core.selected),-1!==a&&(this._data.core.selected=e.vakata.array_remove(this._data.core.selected,a)))}for(this.trigger("delete_node",{node:t,parent:n.id}),c&&this.trigger("changed",{action:"delete_node",node:t,selected:this._data.core.selected,parent:n.id}),l=0,h=r.length;h>l;l++)delete this._model.data[r[l]];return this.redraw_node(n,!0),!0},check:function(t,i,s,n,a){i=i&&i.id?i:this.get_node(i),s=s&&s.id?s:this.get_node(s);var r=t.match(/^move_node|copy_node|create_node$/i)?s:i,o=this.settings.core.check_callback;return"move_node"!==t&&"copy_node"!==t||a&&a.is_multi||i.id!==s.id&&e.inArray(i.id,s.children)!==n&&-1===e.inArray(s.id,i.children_d)?(r&&r.data&&(r=r.data),r&&r.functions&&(r.functions[t]===!1||r.functions[t]===!0)?(r.functions[t]===!1&&(this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+t,data:JSON.stringify({chk:t,pos:n,obj:i&&i.id?i.id:!1,par:s&&s.id?s.id:!1})}),r.functions[t]):o===!1||e.isFunction(o)&&o.call(this,t,i,s,n,a)===!1||o&&o[t]===!1?(this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+t,data:JSON.stringify({chk:t,pos:n,obj:i&&i.id?i.id:!1,par:s&&s.id?s.id:!1})},!1):!0):(this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:t,pos:n,obj:i&&i.id?i.id:!1,par:s&&s.id?s.id:!1})},!1)},last_error:function(){return this._data.core.last_error},move_node:function(t,i,s,n,a,r,o){var d,l,h,c,u,f,p,g,_,m,b,v,y,x;if(i=this.get_node(i),s=void 0===s?0:s,!i)return!1;if(!s.toString().match(/^(before|after)$/)&&!a&&!this.is_loaded(i))return this.load_node(i,function(){this.move_node(t,i,s,n,!0,!1,o)});if(e.isArray(t)){if(1!==t.length){for(d=0,l=t.length;l>d;d++)(_=this.move_node(t[d],i,s,n,a,!1,o))&&(i=_,s="after");return this.redraw(),!0}t=t[0]}if(t=t&&t.id?t:this.get_node(t),!t||"#"===t.id)return!1;if(h=(t.parent||"#").toString(),u=s.toString().match(/^(before|after)$/)&&"#"!==i.id?this.get_node(i.parent):i,f=o?o:this._model.data[t.id]?this:e.jstree.reference(t.id),p=!f||!f._id||this._id!==f._id,c=f&&f._id&&h&&f._model.data[h]&&f._model.data[h].children?e.inArray(t.id,f._model.data[h].children):-1,f&&f._id&&(t=f._model.data[t.id]),p)return(_=this.copy_node(t,i,s,n,a,!1,o))?(f&&f.delete_node(t),_):!1;switch("#"===i.id&&("before"===s&&(s="first"),"after"===s&&(s="last")),s){case"before":s=e.inArray(i.id,u.children);break;case"after":s=e.inArray(i.id,u.children)+1;break;case"inside":case"first":s=0;break;case"last":s=u.children.length;break;default:s||(s=0)}if(s>u.children.length&&(s=u.children.length),!this.check("move_node",t,u,s,{core:!0,origin:o,is_multi:f&&f._id&&f._id!==this._id,is_foreign:!f||!f._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(t.parent===u.id){for(g=u.children.concat(),_=e.inArray(t.id,g),-1!==_&&(g=e.vakata.array_remove(g,_),s>_&&s--),_=[],m=0,b=g.length;b>m;m++)_[m>=s?m+1:m]=g[m];_[s]=t.id,u.children=_,this._node_changed(u.id),this.redraw("#"===u.id)}else{for(_=t.children_d.concat(),_.push(t.id),m=0,b=t.parents.length;b>m;m++){for(g=[],x=f._model.data[t.parents[m]].children_d,v=0,y=x.length;y>v;v++)-1===e.inArray(x[v],_)&&g.push(x[v]);f._model.data[t.parents[m]].children_d=g}for(f._model.data[h].children=e.vakata.array_remove_item(f._model.data[h].children,t.id),m=0,b=u.parents.length;b>m;m++)this._model.data[u.parents[m]].children_d=this._model.data[u.parents[m]].children_d.concat(_);for(g=[],m=0,b=u.children.length;b>m;m++)g[m>=s?m+1:m]=u.children[m];for(g[s]=t.id,u.children=g,u.children_d.push(t.id),u.children_d=u.children_d.concat(t.children_d),t.parent=u.id,_=u.parents.concat(),_.unshift(u.id),x=t.parents.length,t.parents=_,_=_.concat(),m=0,b=t.children_d.length;b>m;m++)this._model.data[t.children_d[m]].parents=this._model.data[t.children_d[m]].parents.slice(0,-1*x),Array.prototype.push.apply(this._model.data[t.children_d[m]].parents,_);("#"===h||"#"===u.id)&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||(this._node_changed(h),this._node_changed(u.id)),r||this.redraw()}return n&&n.call(this,t,u,s),this.trigger("move_node",{node:t,parent:u.id,position:s,old_parent:h,old_position:c,is_multi:f&&f._id&&f._id!==this._id,is_foreign:!f||!f._id,old_instance:f,new_instance:this}),t.id},copy_node:function(t,i,s,n,a,r,o){var d,l,h,c,u,f,p,g,_,m,b;if(i=this.get_node(i),s=void 0===s?0:s,!i)return!1;if(!s.toString().match(/^(before|after)$/)&&!a&&!this.is_loaded(i))return this.load_node(i,function(){this.copy_node(t,i,s,n,!0,!1,o)});if(e.isArray(t)){if(1!==t.length){for(d=0,l=t.length;l>d;d++)(c=this.copy_node(t[d],i,s,n,a,!0,o))&&(i=c,s="after");return this.redraw(),!0}t=t[0]}if(t=t&&t.id?t:this.get_node(t),!t||"#"===t.id)return!1;switch(g=(t.parent||"#").toString(),_=s.toString().match(/^(before|after)$/)&&"#"!==i.id?this.get_node(i.parent):i,m=o?o:this._model.data[t.id]?this:e.jstree.reference(t.id),b=!m||!m._id||this._id!==m._id,m&&m._id&&(t=m._model.data[t.id]),"#"===i.id&&("before"===s&&(s="first"),"after"===s&&(s="last")),s){case"before":s=e.inArray(i.id,_.children);break;case"after":s=e.inArray(i.id,_.children)+1;break;case"inside":case"first":s=0;break;case"last":s=_.children.length;break;default:s||(s=0)}if(s>_.children.length&&(s=_.children.length),!this.check("copy_node",t,_,s,{core:!0,origin:o,is_multi:m&&m._id&&m._id!==this._id,is_foreign:!m||!m._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(p=m?m.get_json(t,{no_id:!0,no_data:!0,no_state:!0}):t,!p)return!1;if(p.id===!0&&delete p.id,p=this._parse_model_from_json(p,_.id,_.parents.concat()),!p)return!1;for(c=this.get_node(p),t&&t.state&&t.state.loaded===!1&&(c.state.loaded=!1),h=[],h.push(p),h=h.concat(c.children_d),this.trigger("model",{nodes:h,parent:_.id}),u=0,f=_.parents.length;f>u;u++)this._model.data[_.parents[u]].children_d=this._model.data[_.parents[u]].children_d.concat(h);for(h=[],u=0,f=_.children.length;f>u;u++)h[u>=s?u+1:u]=_.children[u];return h[s]=c.id,_.children=h,_.children_d.push(c.id),_.children_d=_.children_d.concat(c.children_d),"#"===_.id&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||this._node_changed(_.id),r||this.redraw("#"===_.id),n&&n.call(this,c,_,s),this.trigger("copy_node",{node:c,original:t,parent:_.id,position:s,old_parent:g,old_position:m&&m._id&&g&&m._model.data[g]&&m._model.data[g].children?e.inArray(t.id,m._model.data[g].children):-1,is_multi:m&&m._id&&m._id!==this._id,is_foreign:!m||!m._id,old_instance:m,new_instance:this}),c.id},cut:function(t){if(t||(t=this._data.core.selected.concat()),e.isArray(t)||(t=[t]),!t.length)return!1;var i,s,n,d=[];for(s=0,n=t.length;n>s;s++)i=this.get_node(t[s]),i&&i.id&&"#"!==i.id&&d.push(i);return d.length?(a=d,o=this,r="move_node",void this.trigger("cut",{node:t})):!1},copy:function(t){if(t||(t=this._data.core.selected.concat()),e.isArray(t)||(t=[t]),!t.length)return!1;var i,s,n,d=[];for(s=0,n=t.length;n>s;s++)i=this.get_node(t[s]),i&&i.id&&"#"!==i.id&&d.push(i);return d.length?(a=d,o=this,r="copy_node",void this.trigger("copy",{node:t})):!1},get_buffer:function(){return{mode:r,node:a,inst:o}},can_paste:function(){return r!==!1&&a!==!1},paste:function(e,t){return e=this.get_node(e),e&&r&&r.match(/^(copy_node|move_node)$/)&&a?(this[r](a,e,t,!1,!1,!1,o)&&this.trigger("paste",{parent:e.id,node:a,mode:r}),a=!1,r=!1,void(o=!1)):!1},clear_buffer:function(){a=!1,r=!1,o=!1,this.trigger("clear_buffer")},edit:function(t,i,s){var n,a,r,o,d,l,h,c,u;return(t=this.get_node(t))?this.settings.core.check_callback===!1?(this._data.core.last_error={error:"check",plugin:"core",id:"core_07",reason:"Could not edit node because of check_callback"},this.settings.core.error.call(this,this._data.core.last_error),!1):(u=t,i="string"==typeof i?i:t.text,this.set_text(t,""),t=this._open_to(t),u.text=i,n=this._data.core.rtl,a=this.element.width(),r=t.children(".jstree-anchor"),o=e("<span>"),d=i,l=e("<div />",{css:{position:"absolute",top:"-200px",left:n?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),h=e("<input />",{value:d,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:e.proxy(function(){var i,n=o.children(".jstree-rename-input"),a=n.val(),h=this.settings.core.force_text;""===a&&(a=d),l.remove(),o.replaceWith(r),o.remove(),d=h?d:e("<div></div>").append(e.parseHTML(d)).html(),this.set_text(t,d),i=!!this.rename_node(t,h?e("<div></div>").text(a).text():e("<div></div>").append(e.parseHTML(a)).html()),i||this.set_text(t,d),s&&s.call(this,u,i)},this),keydown:function(e){var t=e.which;27===t&&(this.value=d),(27===t||13===t||37===t||38===t||39===t||40===t||32===t)&&e.stopImmediatePropagation(),(27===t||13===t)&&(e.preventDefault(),this.blur())},click:function(e){e.stopImmediatePropagation()},mousedown:function(e){e.stopImmediatePropagation()},keyup:function(e){h.width(Math.min(l.text("pW"+this.value).width(),a))},keypress:function(e){return 13===e.which?!1:void 0}}),c={fontFamily:r.css("fontFamily")||"",fontSize:r.css("fontSize")||"",fontWeight:r.css("fontWeight")||"",fontStyle:r.css("fontStyle")||"",fontStretch:r.css("fontStretch")||"",fontVariant:r.css("fontVariant")||"",letterSpacing:r.css("letterSpacing")||"",wordSpacing:r.css("wordSpacing")||""},o.attr("class",r.attr("class")).append(r.contents().clone()).append(h),r.replaceWith(o),l.css(c),void h.css(c).width(Math.min(l.text("pW"+h[0].value).width(),a))[0].select()):!1},set_theme:function(t,i){if(!t)return!1;if(i===!0){var s=this.settings.core.themes.dir;s||(s=e.jstree.path+"/themes"),i=s+"/"+t+"/style.css"}i&&-1===e.inArray(i,d)&&(e("head").append('<link rel="stylesheet" href="'+i+'" type="text/css" />'),d.push(i)),this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name),this._data.core.themes.name=t,this.element.addClass("jstree-"+t),this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+t+"-responsive"),this.trigger("set_theme",{theme:t})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(e){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant),this._data.core.themes.variant=e,e&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=!0,this.get_container_ul().addClass("jstree-striped")},hide_stripes:function(){this._data.core.themes.stripes=!1,this.get_container_ul().removeClass("jstree-striped")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0,this.get_container_ul().removeClass("jstree-no-dots")},hide_dots:function(){this._data.core.themes.dots=!1,this.get_container_ul().addClass("jstree-no-dots")},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0,this.get_container_ul().removeClass("jstree-no-icons")},hide_icons:function(){this._data.core.themes.icons=!1,this.get_container_ul().addClass("jstree-no-icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},set_icon:function(t,i){var s,n,a,r;if(e.isArray(t)){for(t=t.slice(),s=0,n=t.length;n>s;s++)this.set_icon(t[s],i);return!0}return t=this.get_node(t),t&&"#"!==t.id?(r=t.icon,t.icon=i===!0||null===i||void 0===i||""===i?!0:i,a=this.get_node(t,!0).children(".jstree-anchor").children(".jstree-themeicon"),i===!1?this.hide_icon(t):i===!0||null===i||void 0===i||""===i?(a.removeClass("jstree-themeicon-custom "+r).css("background","").removeAttr("rel"),r===!1&&this.show_icon(t)):-1===i.indexOf("/")&&-1===i.indexOf(".")?(a.removeClass(r).css("background",""),a.addClass(i+" jstree-themeicon-custom").attr("rel",i),r===!1&&this.show_icon(t)):(a.removeClass(r).css("background",""),a.addClass("jstree-themeicon-custom").css("background","url('"+i+"') center center no-repeat").attr("rel",i),r===!1&&this.show_icon(t)),!0):!1},get_icon:function(e){return e=this.get_node(e),e&&"#"!==e.id?e.icon:!1},hide_icon:function(t){var i,s;if(e.isArray(t)){for(t=t.slice(),i=0,s=t.length;s>i;i++)this.hide_icon(t[i]);return!0}return t=this.get_node(t),t&&"#"!==t?(t.icon=!1,this.get_node(t,!0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),!0):!1},show_icon:function(t){var i,s,n;if(e.isArray(t)){for(t=t.slice(),i=0,s=t.length;s>i;i++)this.show_icon(t[i]);return!0}return t=this.get_node(t),t&&"#"!==t?(n=this.get_node(t,!0),t.icon=n.length?n.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"):!0,t.icon||(t.icon=!0),n.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),!0):!1}},e.vakata={},e.vakata.attributes=function(t,i){t=e(t)[0];var s=i?{}:[];return t&&t.attributes&&e.each(t.attributes,function(t,n){-1===e.inArray(n.name.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])&&null!==n.value&&""!==e.trim(n.value)&&(i?s[n.name]=n.value:s.push(n.name))}),s},e.vakata.array_unique=function(e){var t,i,s=[],n={};for(t=0,i=e.length;i>t;t++)void 0===n[e[t]]&&(s.push(e[t]),n[e[t]]=!0);return s},e.vakata.array_remove=function(e,t,i){var s=e.slice((i||t)+1||e.length);return e.length=0>t?e.length+t:t,e.push.apply(e,s),e},e.vakata.array_remove_item=function(t,i){var s=e.inArray(i,t);return-1!==s?e.vakata.array_remove(t,s):t};var u=h.createElement("I");u.className="jstree-icon jstree-checkbox",u.setAttribute("role","presentation"),e.jstree.defaults.checkbox={visible:!0,three_state:!0,whole_node:!0,keep_selected_style:!0,cascade:"",tie_selection:!0},e.jstree.plugins.checkbox=function(t,i){this.bind=function(){i.bind.call(this),this._data.checkbox.uto=!1,this._data.checkbox.selected=[],this.settings.checkbox.three_state&&(this.settings.checkbox.cascade="up+down+undetermined"),this.element.on("init.jstree",e.proxy(function(){this._data.checkbox.visible=this.settings.checkbox.visible,this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked"),this.settings.checkbox.tie_selection&&this.element.addClass("jstree-checkbox-selection")},this)).on("loading.jstree",e.proxy(function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()},this)),-1!==this.settings.checkbox.cascade.indexOf("undetermined")&&this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",e.proxy(function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)},this)),this.settings.checkbox.tie_selection||this.element.on("model.jstree",e.proxy(function(e,t){var i,s,n=this._model.data,a=(n[t.parent],t.nodes);for(i=0,s=a.length;s>i;i++)n[a[i]].state.checked=n[a[i]].original&&n[a[i]].original.state&&n[a[i]].original.state.checked,n[a[i]].state.checked&&this._data.checkbox.selected.push(a[i])},this)),(-1!==this.settings.checkbox.cascade.indexOf("up")||-1!==this.settings.checkbox.cascade.indexOf("down"))&&this.element.on("model.jstree",e.proxy(function(t,i){var s,n,a,r,o,d,l=this._model.data,h=l[i.parent],c=i.nodes,u=[],f=this.settings.checkbox.cascade,p=this.settings.checkbox.tie_selection;if(-1!==f.indexOf("down"))if(h.state[p?"selected":"checked"]){for(n=0,a=c.length;a>n;n++)l[c[n]].state[p?"selected":"checked"]=!0;this._data[p?"core":"checkbox"].selected=this._data[p?"core":"checkbox"].selected.concat(c)}else for(n=0,a=c.length;a>n;n++)if(l[c[n]].state[p?"selected":"checked"]){for(r=0,o=l[c[n]].children_d.length;o>r;r++)l[l[c[n]].children_d[r]].state[p?"selected":"checked"]=!0;this._data[p?"core":"checkbox"].selected=this._data[p?"core":"checkbox"].selected.concat(l[c[n]].children_d)}if(-1!==f.indexOf("up")){for(n=0,a=h.children_d.length;a>n;n++)l[h.children_d[n]].children.length||u.push(l[h.children_d[n]].parent);for(u=e.vakata.array_unique(u),r=0,o=u.length;o>r;r++)for(h=l[u[r]];h&&"#"!==h.id;){for(s=0,n=0,a=h.children.length;a>n;n++)s+=l[h.children[n]].state[p?"selected":"checked"];if(s!==a)break;h.state[p?"selected":"checked"]=!0,this._data[p?"core":"checkbox"].selected.push(h.id),d=this.get_node(h,!0),d&&d.length&&d.attr("aria-selected",!0).children(".jstree-anchor").addClass(p?"jstree-clicked":"jstree-checked"),h=this.get_node(h.parent)}}this._data[p?"core":"checkbox"].selected=e.vakata.array_unique(this._data[p?"core":"checkbox"].selected)},this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",e.proxy(function(t,i){var s,n,a,r,o=i.node,d=this._model.data,l=this.get_node(o.parent),h=this.get_node(o,!0),c=this.settings.checkbox.cascade,u=this.settings.checkbox.tie_selection;if(-1!==c.indexOf("down"))for(this._data[u?"core":"checkbox"].selected=e.vakata.array_unique(this._data[u?"core":"checkbox"].selected.concat(o.children_d)),s=0,n=o.children_d.length;n>s;s++)r=d[o.children_d[s]],r.state[u?"selected":"checked"]=!0,r&&r.original&&r.original.state&&r.original.state.undetermined&&(r.original.state.undetermined=!1);if(-1!==c.indexOf("up"))for(;l&&"#"!==l.id;){for(a=0,s=0,n=l.children.length;n>s;s++)a+=d[l.children[s]].state[u?"selected":"checked"];if(a!==n)break;l.state[u?"selected":"checked"]=!0,this._data[u?"core":"checkbox"].selected.push(l.id),r=this.get_node(l,!0),r&&r.length&&r.attr("aria-selected",!0).children(".jstree-anchor").addClass(u?"jstree-clicked":"jstree-checked"),l=this.get_node(l.parent)}-1!==c.indexOf("down")&&h.length&&h.find(".jstree-anchor").addClass(u?"jstree-clicked":"jstree-checked").parent().attr("aria-selected",!0)},this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",e.proxy(function(e,t){var i,s,n,a=this.get_node("#"),r=this._model.data;for(i=0,s=a.children_d.length;s>i;i++)n=r[a.children_d[i]],n&&n.original&&n.original.state&&n.original.state.undetermined&&(n.original.state.undetermined=!1)},this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",e.proxy(function(t,i){var s,n,a,r=i.node,o=this.get_node(r,!0),d=this.settings.checkbox.cascade,l=this.settings.checkbox.tie_selection;if(r&&r.original&&r.original.state&&r.original.state.undetermined&&(r.original.state.undetermined=!1),-1!==d.indexOf("down"))for(s=0,n=r.children_d.length;n>s;s++)a=this._model.data[r.children_d[s]],a.state[l?"selected":"checked"]=!1,a&&a.original&&a.original.state&&a.original.state.undetermined&&(a.original.state.undetermined=!1);if(-1!==d.indexOf("up"))for(s=0,n=r.parents.length;n>s;s++)a=this._model.data[r.parents[s]],a.state[l?"selected":"checked"]=!1,a&&a.original&&a.original.state&&a.original.state.undetermined&&(a.original.state.undetermined=!1),a=this.get_node(r.parents[s],!0),a&&a.length&&a.attr("aria-selected",!1).children(".jstree-anchor").removeClass(l?"jstree-clicked":"jstree-checked");for(a=[],s=0,n=this._data[l?"core":"checkbox"].selected.length;n>s;s++)-1!==d.indexOf("down")&&-1!==e.inArray(this._data[l?"core":"checkbox"].selected[s],r.children_d)||-1!==d.indexOf("up")&&-1!==e.inArray(this._data[l?"core":"checkbox"].selected[s],r.parents)||a.push(this._data[l?"core":"checkbox"].selected[s]);this._data[l?"core":"checkbox"].selected=e.vakata.array_unique(a),-1!==d.indexOf("down")&&o.length&&o.find(".jstree-anchor").removeClass(l?"jstree-clicked":"jstree-checked").parent().attr("aria-selected",!1)},this)),-1!==this.settings.checkbox.cascade.indexOf("up")&&this.element.on("delete_node.jstree",e.proxy(function(e,t){for(var i,s,n,a,r=this.get_node(t.parent),o=this._model.data,d=this.settings.checkbox.tie_selection;r&&"#"!==r.id;){for(n=0,i=0,s=r.children.length;s>i;i++)n+=o[r.children[i]].state[d?"selected":"checked"];if(n!==s)break;r.state[d?"selected":"checked"]=!0,this._data[d?"core":"checkbox"].selected.push(r.id),a=this.get_node(r,!0),a&&a.length&&a.attr("aria-selected",!0).children(".jstree-anchor").addClass(d?"jstree-clicked":"jstree-checked"),r=this.get_node(r.parent)}},this)).on("move_node.jstree",e.proxy(function(t,i){var s,n,a,r,o,d=i.is_multi,l=i.old_parent,h=this.get_node(i.parent),c=this._model.data,u=this.settings.checkbox.tie_selection;if(!d)for(s=this.get_node(l);s&&"#"!==s.id;){for(n=0,a=0,r=s.children.length;r>a;a++)n+=c[s.children[a]].state[u?"selected":"checked"];if(n!==r)break;s.state[u?"selected":"checked"]=!0,this._data[u?"core":"checkbox"].selected.push(s.id),o=this.get_node(s,!0),o&&o.length&&o.attr("aria-selected",!0).children(".jstree-anchor").addClass(u?"jstree-clicked":"jstree-checked"),s=this.get_node(s.parent)}for(s=h;s&&"#"!==s.id;){for(n=0,a=0,r=s.children.length;r>a;a++)n+=c[s.children[a]].state[u?"selected":"checked"];if(n===r)s.state[u?"selected":"checked"]||(s.state[u?"selected":"checked"]=!0,this._data[u?"core":"checkbox"].selected.push(s.id),o=this.get_node(s,!0),o&&o.length&&o.attr("aria-selected",!0).children(".jstree-anchor").addClass(u?"jstree-clicked":"jstree-checked"));else{if(!s.state[u?"selected":"checked"])break;s.state[u?"selected":"checked"]=!1,this._data[u?"core":"checkbox"].selected=e.vakata.array_remove_item(this._data[u?"core":"checkbox"].selected,s.id),o=this.get_node(s,!0),o&&o.length&&o.attr("aria-selected",!1).children(".jstree-anchor").removeClass(u?"jstree-clicked":"jstree-checked")}s=this.get_node(s.parent)}},this))},this._undetermined=function(){if(null!==this.element){var e,t,i,s,n={},a=this._model.data,r=this.settings.checkbox.tie_selection,o=this._data[r?"core":"checkbox"].selected,d=[],l=this;for(e=0,t=o.length;t>e;e++)if(a[o[e]]&&a[o[e]].parents)for(i=0,s=a[o[e]].parents.length;s>i;i++)void 0===n[a[o[e]].parents[i]]&&"#"!==a[o[e]].parents[i]&&(n[a[o[e]].parents[i]]=!0,d.push(a[o[e]].parents[i]));for(this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var r,o=l.get_node(this);if(o.state.loaded){for(e=0,t=o.children_d.length;t>e;e++)if(r=a[o.children_d[e]],!r.state.loaded&&r.original&&r.original.state&&r.original.state.undetermined&&r.original.state.undetermined===!0)for(void 0===n[r.id]&&"#"!==r.id&&(n[r.id]=!0,d.push(r.id)),i=0,s=r.parents.length;s>i;i++)void 0===n[r.parents[i]]&&"#"!==r.parents[i]&&(n[r.parents[i]]=!0,d.push(r.parents[i]))}else if(o.original&&o.original.state&&o.original.state.undetermined&&o.original.state.undetermined===!0)for(void 0===n[o.id]&&"#"!==o.id&&(n[o.id]=!0,d.push(o.id)),i=0,s=o.parents.length;s>i;i++)void 0===n[o.parents[i]]&&"#"!==o.parents[i]&&(n[o.parents[i]]=!0,d.push(o.parents[i]))}),this.element.find(".jstree-undetermined").removeClass("jstree-undetermined"),e=0,t=d.length;t>e;e++)a[d[e]].state[r?"selected":"checked"]||(o=this.get_node(d[e],!0),o&&o.length&&o.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined"))}},this.redraw_node=function(t,s,n,a){if(t=i.redraw_node.apply(this,arguments)){var r,o,d=null;for(r=0,o=t.childNodes.length;o>r;r++)if(t.childNodes[r]&&t.childNodes[r].className&&-1!==t.childNodes[r].className.indexOf("jstree-anchor")){d=t.childNodes[r];break}d&&(!this.settings.checkbox.tie_selection&&this._model.data[t.id].state.checked&&(d.className+=" jstree-checked"),d.insertBefore(u.cloneNode(!1),d.childNodes[0]))}return n||-1===this.settings.checkbox.cascade.indexOf("undetermined")||(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)),
t},this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0,this.get_container_ul().removeClass("jstree-no-checkboxes")},this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1,this.get_container_ul().addClass("jstree-no-checkboxes")},this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()},this.is_undetermined=function(t){t=this.get_node(t);var i,s,n=this.settings.checkbox.cascade,a=this.settings.checkbox.tie_selection,r=this._data[a?"core":"checkbox"].selected,o=this._model.data;if(!t||t.state[a?"selected":"checked"]===!0||-1===n.indexOf("undetermined")||-1===n.indexOf("down")&&-1===n.indexOf("up"))return!1;if(!t.state.loaded&&t.original.state.undetermined===!0)return!0;for(i=0,s=t.children_d.length;s>i;i++)if(-1!==e.inArray(t.children_d[i],r)||!o[t.children_d[i]].state.loaded&&o[t.children_d[i]].original.state.undetermined)return!0;return!1},this.activate_node=function(t,s){return this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||e(s.target).hasClass("jstree-checkbox"))&&(s.ctrlKey=!0),this.settings.checkbox.tie_selection||!this.settings.checkbox.whole_node&&!e(s.target).hasClass("jstree-checkbox")?i.activate_node.call(this,t,s):this.is_disabled(t)?!1:(this.is_checked(t)?this.uncheck_node(t,s):this.check_node(t,s),void this.trigger("activate_node",{node:this.get_node(t)}))},this.check_node=function(t,i){if(this.settings.checkbox.tie_selection)return this.select_node(t,!1,!0,i);var s,n,a;if(e.isArray(t)){for(t=t.slice(),n=0,a=t.length;a>n;n++)this.check_node(t[n],i);return!0}return t=this.get_node(t),t&&"#"!==t.id?(s=this.get_node(t,!0),void(t.state.checked||(t.state.checked=!0,this._data.checkbox.selected.push(t.id),s&&s.length&&s.children(".jstree-anchor").addClass("jstree-checked"),this.trigger("check_node",{node:t,selected:this._data.checkbox.selected,event:i})))):!1},this.uncheck_node=function(t,i){if(this.settings.checkbox.tie_selection)return this.deselect_node(t,!1,i);var s,n,a;if(e.isArray(t)){for(t=t.slice(),s=0,n=t.length;n>s;s++)this.uncheck_node(t[s],i);return!0}return t=this.get_node(t),t&&"#"!==t.id?(a=this.get_node(t,!0),void(t.state.checked&&(t.state.checked=!1,this._data.checkbox.selected=e.vakata.array_remove_item(this._data.checkbox.selected,t.id),a.length&&a.children(".jstree-anchor").removeClass("jstree-checked"),this.trigger("uncheck_node",{node:t,selected:this._data.checkbox.selected,event:i})))):!1},this.check_all=function(){if(this.settings.checkbox.tie_selection)return this.select_all();var e,t;this._data.checkbox.selected.concat([]);for(this._data.checkbox.selected=this._model.data["#"].children_d.concat(),e=0,t=this._data.checkbox.selected.length;t>e;e++)this._model.data[this._data.checkbox.selected[e]]&&(this._model.data[this._data.checkbox.selected[e]].state.checked=!0);this.redraw(!0),this.trigger("check_all",{selected:this._data.checkbox.selected})},this.uncheck_all=function(){if(this.settings.checkbox.tie_selection)return this.deselect_all();var e,t,i=this._data.checkbox.selected.concat([]);for(e=0,t=this._data.checkbox.selected.length;t>e;e++)this._model.data[this._data.checkbox.selected[e]]&&(this._model.data[this._data.checkbox.selected[e]].state.checked=!1);this._data.checkbox.selected=[],this.element.find(".jstree-checked").removeClass("jstree-checked"),this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:i})},this.is_checked=function(e){return this.settings.checkbox.tie_selection?this.is_selected(e):(e=this.get_node(e),e&&"#"!==e.id?e.state.checked:!1)},this.get_checked=function(t){return this.settings.checkbox.tie_selection?this.get_selected(t):t?e.map(this._data.checkbox.selected,e.proxy(function(e){return this.get_node(e)},this)):this._data.checkbox.selected},this.get_top_checked=function(t){if(this.settings.checkbox.tie_selection)return this.get_top_selected(t);var i,s,n,a,r=this.get_checked(!0),o={};for(i=0,s=r.length;s>i;i++)o[r[i].id]=r[i];for(i=0,s=r.length;s>i;i++)for(n=0,a=r[i].children_d.length;a>n;n++)o[r[i].children_d[n]]&&delete o[r[i].children_d[n]];r=[];for(i in o)o.hasOwnProperty(i)&&r.push(i);return t?e.map(r,e.proxy(function(e){return this.get_node(e)},this)):r},this.get_bottom_checked=function(t){if(this.settings.checkbox.tie_selection)return this.get_bottom_selected(t);var i,s,n=this.get_checked(!0),a=[];for(i=0,s=n.length;s>i;i++)n[i].children.length||a.push(n[i].id);return t?e.map(a,e.proxy(function(e){return this.get_node(e)},this)):a},this.load_node=function(t,s){var n,a,r,o;if(!e.isArray(t)&&!this.settings.checkbox.tie_selection&&(o=this.get_node(t),o&&o.state.loaded))for(n=0,a=o.children_d.length;a>n;n++)this._model.data[o.children_d[n]].state.checked&&(r=!0,this._data.checkbox.selected=e.vakata.array_remove_item(this._data.checkbox.selected,o.children_d[n]));return i.load_node.apply(this,arguments)},this.get_state=function(){var e=i.get_state.apply(this,arguments);return this.settings.checkbox.tie_selection?e:(e.checkbox=this._data.checkbox.selected.slice(),e)},this.set_state=function(t,s){var n=i.set_state.apply(this,arguments);if(n&&t.checkbox){if(!this.settings.checkbox.tie_selection){this.uncheck_all();var a=this;e.each(t.checkbox,function(e,t){a.check_node(t)})}return delete t.checkbox,this.set_state(t,s),!1}return n}};var f=h.createElement("DIV");if(f.setAttribute("unselectable","on"),f.setAttribute("role","presentation"),f.className="jstree-wholerow",f.innerHTML="&#160;",e.jstree.plugins.wholerow=function(t,i){this.bind=function(){i.bind.call(this),this.element.on("ready.jstree set_state.jstree",e.proxy(function(){this.hide_dots()},this)).on("init.jstree loading.jstree ready.jstree",e.proxy(function(){this.get_container_ul().addClass("jstree-wholerow-ul")},this)).on("deselect_all.jstree",e.proxy(function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")},this)).on("changed.jstree",e.proxy(function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");var i,s,n=!1;for(i=0,s=t.selected.length;s>i;i++)n=this.get_node(t.selected[i],!0),n&&n.length&&n.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("open_node.jstree",e.proxy(function(e,t){this.get_node(t.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("hover_node.jstree dehover_node.jstree",e.proxy(function(e,t){"hover_node"===e.type&&this.is_disabled(t.node)||this.get_node(t.node,!0).children(".jstree-wholerow")["hover_node"===e.type?"addClass":"removeClass"]("jstree-wholerow-hovered")},this)).on("contextmenu.jstree",".jstree-wholerow",e.proxy(function(t){t.preventDefault();var i=e.Event("contextmenu",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,pageX:t.pageX,pageY:t.pageY});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(i)},this)).on("click.jstree",".jstree-wholerow",function(t){t.stopImmediatePropagation();var i=e.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(i).focus()}).on("click.jstree",".jstree-leaf > .jstree-ocl",e.proxy(function(t){t.stopImmediatePropagation();var i=e.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(i).focus()},this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",e.proxy(function(e){return e.stopImmediatePropagation(),this.is_disabled(e.currentTarget)||this.hover_node(e.currentTarget),!1},this)).on("mouseleave.jstree",".jstree-node",e.proxy(function(e){this.dehover_node(e.currentTarget)},this))},this.teardown=function(){this.settings.wholerow&&this.element.find(".jstree-wholerow").remove(),i.teardown.call(this)},this.redraw_node=function(t,s,n,a){if(t=i.redraw_node.apply(this,arguments)){var r=f.cloneNode(!0);-1!==e.inArray(t.id,this._data.core.selected)&&(r.className+=" jstree-wholerow-clicked"),this._data.core.focused&&this._data.core.focused===t.id&&(r.className+=" jstree-wholerow-hovered"),t.insertBefore(r,t.childNodes[0])}return t}},h.registerElement&&Object&&Object.create){var p=Object.create(HTMLElement.prototype);p.createdCallback=function(){var t,i={core:{},plugins:[]};for(t in e.jstree.plugins)e.jstree.plugins.hasOwnProperty(t)&&this.attributes[t]&&(i.plugins.push(t),this.getAttribute(t)&&JSON.parse(this.getAttribute(t))&&(i[t]=JSON.parse(this.getAttribute(t))));for(t in e.jstree.defaults.core)e.jstree.defaults.core.hasOwnProperty(t)&&this.attributes[t]&&(i.core[t]=JSON.parse(this.getAttribute(t))||this.getAttribute(t));e(this).jstree(i)};try{h.registerElement("vakata-jstree",{prototype:p})}catch(g){}}return e.jstree}}),s("ui/Tree",["require","dep/jquery.jstree"],function(t){function i(e,t){this.instance=n.create(e,t)}function s(e){return 1===e.nodeType&&"div"===e.tagName.toLowerCase()}var n=t("dep/jquery.jstree");i.prototype={ins:function(){return this.instance},destroy:function(){this.instance.destroy()}};var a="bizTree";return e.extend(e.fn,{bizTree:function(t,n){var r;switch(t){case"ins":return this.data(a).ins();case"destroy":this.each(function(){r=e(this).data(a),r&&(r.destroy(),e(this).data(a,null))});break;default:this.each(function(){!e(this).data(a)&&s(this)&&e(this).data(a,new i(this,t))})}return this}}),i}),s("dep/jquery.datepicker",["require"],function(t){function i(){return new Date(Date.UTC.apply(Date,arguments))}function s(){var e=new Date;return i(e.getFullYear(),e.getMonth(),e.getDate())}function n(e,t){return e.getUTCFullYear()===t.getUTCFullYear()&&e.getUTCMonth()===t.getUTCMonth()&&e.getUTCDate()===t.getUTCDate()}function a(e){return function(){return this[e].apply(this,arguments)}}function r(t,i){function s(e,t){return t.toLowerCase()}var n,a=e(t).data(),r={},o=new RegExp("^"+i.toLowerCase()+"([A-Z])");i=new RegExp("^"+i.toLowerCase());for(var d in a)i.test(d)&&(n=d.replace(o,s),r[n]=a[d]);return r}function o(t){var i={};if(g[t]||(t=t.split("-")[0],g[t])){var s=g[t];return e.each(p,function(e,t){t in s&&(i[t]=s[t])}),i}}var d=function(){var t={get:function(e){return this.slice(e)[0]},contains:function(e){for(var t=e&&e.valueOf(),i=0,s=this.length;s>i;i++)if(this[i].valueOf()===t)return i;return-1},remove:function(e){this.splice(e,1)},replace:function(t){t&&(e.isArray(t)||(t=[t]),this.clear(),this.push.apply(this,t))},clear:function(){this.length=0},copy:function(){var e=new d;return e.replace(this),e}};return function(){var i=[];return i.push.apply(i,arguments),e.extend(i,t),i}}(),l=function(t,i){this._process_options(i),this.dates=new d,this.viewDate=this.o.defaultViewDate,this.focusDate=null,this.element=e(t),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.hasClass("date")?this.element.find(".add-on, .input-group-addon, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=e(_.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot .today, tfoot .clear").attr("colspan",function(e,t){return parseInt(t)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.setDatesDisabled(this.o.datesDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};l.prototype={constructor:l,_process_options:function(t){this._o=e.extend({},this._o,t);var n=this.o=e.extend({},this._o),a=n.language;switch(g[a]||(a=a.split("-")[0],g[a]||(a=f.language)),n.language=a,n.startView){case 2:case"decade":n.startView=2;break;case 1:case"year":n.startView=1;break;default:n.startView=0}switch(n.minViewMode){case 1:case"months":n.minViewMode=1;break;case 2:case"years":n.minViewMode=2;break;default:n.minViewMode=0}n.startView=Math.max(n.startView,n.minViewMode),n.multidate!==!0&&(n.multidate=Number(n.multidate)||!1,n.multidate!==!1&&(n.multidate=Math.max(0,n.multidate))),n.multidateSeparator=String(n.multidateSeparator),n.weekStart%=7,n.weekEnd=(n.weekStart+6)%7;var r=_.parseFormat(n.format);if(n.startDate!==-(1/0)&&(n.startDate?n.startDate instanceof Date?n.startDate=this._local_to_utc(this._zero_time(n.startDate)):n.startDate=_.parseDate(n.startDate,r,n.language):n.startDate=-(1/0)),n.endDate!==1/0&&(n.endDate?n.endDate instanceof Date?n.endDate=this._local_to_utc(this._zero_time(n.endDate)):n.endDate=_.parseDate(n.endDate,r,n.language):n.endDate=1/0),n.daysOfWeekDisabled=n.daysOfWeekDisabled||[],e.isArray(n.daysOfWeekDisabled)||(n.daysOfWeekDisabled=n.daysOfWeekDisabled.split(/[,\s]*/)),n.daysOfWeekDisabled=e.map(n.daysOfWeekDisabled,function(e){return parseInt(e,10)}),n.datesDisabled=n.datesDisabled||[],!e.isArray(n.datesDisabled)){var o=[];o.push(_.parseDate(n.datesDisabled,r,n.language)),n.datesDisabled=o}n.datesDisabled=e.map(n.datesDisabled,function(e){return _.parseDate(e,r,n.language)});var d=String(n.orientation).toLowerCase().split(/\s+/g),l=n.orientation.toLowerCase();if(d=e.grep(d,function(e){return/^auto|left|right|top|bottom$/.test(e)}),n.orientation={x:"auto",y:"auto"},l&&"auto"!==l)if(1===d.length)switch(d[0]){case"top":case"bottom":n.orientation.y=d[0];break;case"left":case"right":n.orientation.x=d[0]}else l=e.grep(d,function(e){return/^left|right$/.test(e)}),n.orientation.x=l[0]||"auto",l=e.grep(d,function(e){return/^top|bottom$/.test(e)}),n.orientation.y=l[0]||"auto";else;if(n.defaultViewDate){var h=n.defaultViewDate.year||(new Date).getFullYear(),c=n.defaultViewDate.month||0,u=n.defaultViewDate.day||1;n.defaultViewDate=i(h,c,u)}else n.defaultViewDate=s();n.showOnFocus=void 0!==n.showOnFocus?n.showOnFocus:!0},_events:[],_secondaryEvents:[],_applyEvents:function(e){for(var t,i,s,n=0;n<e.length;n++)t=e[n][0],2===e[n].length?(i=void 0,s=e[n][1]):3===e[n].length&&(i=e[n][1],s=e[n][2]),t.on(s,i)},_unapplyEvents:function(e){for(var t,i,s,n=0;n<e.length;n++)t=e[n][0],2===e[n].length?(s=void 0,i=e[n][1]):3===e[n].length&&(s=e[n][1],i=e[n][2]),t.off(i,s)},_buildEvents:function(){var t={keyup:e.proxy(function(t){-1===e.inArray(t.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:e.proxy(this.keydown,this)};this.o.showOnFocus===!0&&(t.focus=e.proxy(this.show,this)),this.isInput?this._events=[[this.element,t]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),t],[this.component,{click:e.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:e.proxy(this.show,this)}]],this._events.push([this.element,"*",{blur:e.proxy(function(e){this._focused_from=e.target},this)}],[this.element,{blur:e.proxy(function(e){this._focused_from=e.target},this)}]),this._secondaryEvents=[[this.picker,{click:e.proxy(this.click,this)}],[e(window),{resize:e.proxy(this.place,this)}],[e(document),{"mousedown touchstart":e.proxy(function(e){this.element.is(e.target)||this.element.find(e.target).length||this.picker.is(e.target)||this.picker.find(e.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,i){var s=i||this.dates.get(-1),n=this._utc_to_local(s);this.element.trigger({type:t,date:n,dates:e.map(this.dates,this._utc_to_local),format:e.proxy(function(e,t){0===arguments.length?(e=this.dates.length-1,t=this.o.format):"string"==typeof e&&(t=e,e=this.dates.length-1),t=t||this.o.format;var i=this.dates.get(e);return _.formatDate(i,t,this.o.language)},this)})},show:function(){return this.element.attr("readonly")&&this.o.enableOnReadonly===!1?void 0:(this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&e(this.element).blur(),this)},hide:function(){return this.isInline?this:this.picker.is(":visible")?(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"),this):this},remove:function(){return this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date,this},_utc_to_local:function(e){return e&&new Date(e.getTime()+6e4*e.getTimezoneOffset())},_local_to_utc:function(e){return e&&new Date(e.getTime()-6e4*e.getTimezoneOffset())},_zero_time:function(e){return e&&new Date(e.getFullYear(),e.getMonth(),e.getDate())},_zero_utc_time:function(e){return e&&new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()))},getDates:function(){return e.map(this.dates,this._utc_to_local)},getUTCDates:function(){return e.map(this.dates,function(e){return new Date(e)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var e=this.dates.get(-1);return"undefined"!=typeof e?new Date(e):null},clearDates:function(){var e;this.isInput?e=this.element:this.component&&(e=this.element.find("input")),e&&e.val("").change(),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()},setDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,t),this._trigger("changeDate"),this.setValue(),this},setUTCDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,e.map(t,this._utc_to_local)),this._trigger("changeDate"),this.setValue(),this},setDate:a("setDates"),setUTCDate:a("setUTCDates"),setValue:function(){var e=this.getFormattedDate();return this.isInput?this.element.val(e).change():this.component&&this.element.find("input").val(e).change(),this},getFormattedDate:function(t){void 0===t&&(t=this.o.format);var i=this.o.language;return e.map(this.dates,function(e){return _.formatDate(e,t,i)}).join(this.o.multidateSeparator)},setStartDate:function(e){return this._process_options({startDate:e}),this.update(),this.updateNavArrows(),this},setEndDate:function(e){return this._process_options({endDate:e}),this.update(),this.updateNavArrows(),this},setDaysOfWeekDisabled:function(e){return this._process_options({daysOfWeekDisabled:e}),this.update(),this.updateNavArrows(),this},setDatesDisabled:function(e){this._process_options({datesDisabled:e}),this.update(),this.updateNavArrows()},place:function(){if(this.isInline)return this;var t=this.picker.outerWidth(),i=this.picker.outerHeight(),s=10,n=e(this.o.container).width(),a=e(this.o.container).height(),r=e(this.o.container).scrollTop(),o=e(this.o.container).offset(),d=[];this.element.parents().each(function(){var t=e(this).css("z-index");"auto"!==t&&0!==t&&d.push(parseInt(t))});var l=Math.max.apply(Math,d)+10,h=this.component?this.component.parent().offset():this.element.offset(),c=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),u=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),f=h.left-o.left,p=h.top-o.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(f-=t-u)):h.left<0?(this.picker.addClass("datepicker-orient-left"),f-=h.left-s):f+t>n?(this.picker.addClass("datepicker-orient-right"),f=h.left+u-t):this.picker.addClass("datepicker-orient-left");var g,_,m=this.o.orientation.y;if("auto"===m&&(g=-r+p-i,_=r+a-(p+c+i),m=Math.max(g,_)===_?"top":"bottom"),this.picker.addClass("datepicker-orient-"+m),"top"===m?p+=c:p-=i+parseInt(this.picker.css("padding-top")),this.o.rtl){var b=n-(f+u);this.picker.css({top:p,right:b,zIndex:l})}else this.picker.css({top:p,left:f,zIndex:l});return this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var t=this.dates.copy(),i=[],s=!1;return arguments.length?(e.each(arguments,e.proxy(function(e,t){t instanceof Date&&(t=this._local_to_utc(t)),i.push(t)},this)),s=!0):(i=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),i=i&&this.o.multidate?i.split(this.o.multidateSeparator):[i],delete this.element.data().date),i=e.map(i,e.proxy(function(e){return _.parseDate(e,this.o.format,this.o.language)},this)),i=e.grep(i,e.proxy(function(e){return e<this.o.startDate||e>this.o.endDate||!e},this),!0),this.dates.replace(i),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate&&(this.viewDate=new Date(this.o.endDate)),s?this.setValue():i.length&&String(t)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&t.length&&this._trigger("clearDate"),this.fill(),this},fillDow:function(){var e=this.o.weekStart,t="<tr>";if(this.o.calendarWeeks){this.picker.find(".datepicker-days thead tr:first-child .datepicker-switch").attr("colspan",function(e,t){return parseInt(t)+1});var i='<th class="cw">&#160;</th>';t+=i}for(;e<this.o.weekStart+7;)t+='<th class="dow">'+g[this.o.language].daysMin[e++%7]+"</th>";t+="</tr>",this.picker.find(".datepicker-days thead").append(t)},fillMonths:function(){for(var e="",t=0;12>t;)e+='<span class="month">'+g[this.o.language].monthsShort[t++]+"</span>";this.picker.find(".datepicker-months td").html(e)},setRange:function(t){t&&t.length?this.range=e.map(t,function(e){return e.valueOf()}):delete this.range,this.fill()},getClassNames:function(t){var i=[],s=this.viewDate.getUTCFullYear(),a=this.viewDate.getUTCMonth(),r=new Date;return t.getUTCFullYear()<s||t.getUTCFullYear()===s&&t.getUTCMonth()<a?i.push("old"):(t.getUTCFullYear()>s||t.getUTCFullYear()===s&&t.getUTCMonth()>a)&&i.push("new"),this.focusDate&&t.valueOf()===this.focusDate.valueOf()&&i.push("focused"),this.o.todayHighlight&&t.getUTCFullYear()===r.getFullYear()&&t.getUTCMonth()===r.getMonth()&&t.getUTCDate()===r.getDate()&&i.push("today"),-1!==this.dates.contains(t)&&i.push("active"),(t.valueOf()<this.o.startDate||t.valueOf()>this.o.endDate||-1!==e.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled))&&i.push("disabled"),this.o.datesDisabled.length>0&&e.grep(this.o.datesDisabled,function(e){return n(t,e)}).length>0&&i.push("disabled","disabled-date"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&i.push("range"),-1!==e.inArray(t.valueOf(),this.range)&&i.push("selected")),i},fill:function(){var t,s=new Date(this.viewDate),n=s.getUTCFullYear(),a=s.getUTCMonth(),r=this.o.startDate!==-(1/0)?this.o.startDate.getUTCFullYear():-(1/0),o=this.o.startDate!==-(1/0)?this.o.startDate.getUTCMonth():-(1/0),d=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,l=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,h=g[this.o.language].today||g.en.today||"",c=g[this.o.language].clear||g.en.clear||"";if(!isNaN(n)&&!isNaN(a)){this.picker.find(".datepicker-days thead .datepicker-switch").text(g[this.o.language].months[a]+" "+n),this.picker.find("tfoot .today").text(h).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot .clear").text(c).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var u=i(n,a-1,28),f=_.getDaysInMonth(u.getUTCFullYear(),u.getUTCMonth());u.setUTCDate(f),u.setUTCDate(f-(u.getUTCDay()-this.o.weekStart+7)%7);var p=new Date(u);p.setUTCDate(p.getUTCDate()+42),p=p.valueOf();for(var m,b=[];u.valueOf()<p;){if(u.getUTCDay()===this.o.weekStart&&(b.push("<tr>"),this.o.calendarWeeks)){var v=new Date(+u+(this.o.weekStart-u.getUTCDay()-7)%7*864e5),y=new Date(Number(v)+(11-v.getUTCDay())%7*864e5),x=new Date(Number(x=i(y.getUTCFullYear(),0,1))+(11-x.getUTCDay())%7*864e5),w=(y-x)/864e5/7+1;b.push('<td class="cw">'+w+"</td>")}if(m=this.getClassNames(u),m.push("day"),this.o.beforeShowDay!==e.noop){var k=this.o.beforeShowDay(this._utc_to_local(u));void 0===k?k={}:"boolean"==typeof k?k={enabled:k}:"string"==typeof k&&(k={classes:k}),k.enabled===!1&&m.push("disabled"),k.classes&&(m=m.concat(k.classes.split(/\s+/))),k.tooltip&&(t=k.tooltip)}m=e.unique(m),b.push('<td class="'+m.join(" ")+'"'+(t?' title="'+t+'"':"")+">"+u.getUTCDate()+"</td>"),t=null,u.getUTCDay()===this.o.weekEnd&&b.push("</tr>"),u.setUTCDate(u.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(b.join(""));var C=this.picker.find(".datepicker-months").find("th:eq(1)").text(n).end().find("span").removeClass("active");if(e.each(this.dates,function(e,t){t.getUTCFullYear()===n&&C.eq(t.getUTCMonth()).addClass("active")}),(r>n||n>d)&&C.addClass("disabled"),n===r&&C.slice(0,o).addClass("disabled"),n===d&&C.slice(l+1).addClass("disabled"),this.o.beforeShowMonth!==e.noop){var j=this;e.each(C,function(t,i){if(!e(i).hasClass("disabled")){var s=new Date(n,t,1),a=j.o.beforeShowMonth(s);a===!1&&e(i).addClass("disabled")}})}b="",n=10*parseInt(n/10,10);var T=this.picker.find(".datepicker-years").find("th:eq(1)").text(n+"-"+(n+9)).end().find("td");n-=1;for(var D,$=e.map(this.dates,function(e){return e.getUTCFullYear()}),S=-1;11>S;S++)D=["year"],-1===S?D.push("old"):10===S&&D.push("new"),-1!==e.inArray(n,$)&&D.push("active"),(r>n||n>d)&&D.push("disabled"),b+='<span class="'+D.join(" ")+'">'+n+"</span>",n+=1;T.html(b)}},updateNavArrows:function(){if(this._allow_update){var e=new Date(this.viewDate),t=e.getUTCFullYear(),i=e.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-(1/0)&&t<=this.o.startDate.getUTCFullYear()&&i<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&t>=this.o.endDate.getUTCFullYear()&&i>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-(1/0)&&t<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&t>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(t){t.preventDefault();var s,n,a,r=e(t.target).closest("span, td, th");if(1===r.length)switch(r[0].nodeName.toLowerCase()){case"th":switch(r[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var o=_.modes[this.viewMode].navStep*("prev"===r[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,o),this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,o),1===this.viewMode&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":var d=new Date;d=i(d.getFullYear(),d.getMonth(),d.getDate(),0,0,0),this.showMode(-2);var l="linked"===this.o.todayBtn?null:"view";this._setDate(d,l);break;case"clear":this.clearDates()}break;case"span":r.hasClass("disabled")||(this.viewDate.setUTCDate(1),r.hasClass("month")?(a=1,n=r.parent().find("span").index(r),s=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(n),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(i(s,n,a))):(a=1,n=0,s=parseInt(r.text(),10)||0,this.viewDate.setUTCFullYear(s),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(i(s,n,a))),this.showMode(-1),this.fill());break;case"td":r.hasClass("day")&&!r.hasClass("disabled")&&(a=parseInt(r.text(),10)||1,s=this.viewDate.getUTCFullYear(),n=this.viewDate.getUTCMonth(),r.hasClass("old")?0===n?(n=11,s-=1):n-=1:r.hasClass("new")&&(11===n?(n=0,s+=1):n+=1),this._setDate(i(s,n,a)))}this.picker.is(":visible")&&this._focused_from&&e(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(e){var t=this.dates.contains(e);if(e||this.dates.clear(),-1!==t?(this.o.multidate===!0||this.o.multidate>1||this.o.toggleActive)&&this.dates.remove(t):this.o.multidate===!1?(this.dates.clear(),this.dates.push(e)):this.dates.push(e),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(e,t){t&&"date"!==t||this._toggle_multidate(e&&new Date(e)),t&&"view"!==t||(this.viewDate=e&&new Date(e)),this.fill(),this.setValue(),t&&"view"===t||this._trigger("changeDate");var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input")),i&&i.change(),!this.o.autoclose||t&&"date"!==t||this.hide()},moveMonth:function(e,t){if(e){if(!t)return e;var i,s,n=new Date(e.valueOf()),a=n.getUTCDate(),r=n.getUTCMonth(),o=Math.abs(t);if(t=t>0?1:-1,1===o)s=-1===t?function(){return n.getUTCMonth()===r}:function(){return n.getUTCMonth()!==i},i=r+t,n.setUTCMonth(i),(0>i||i>11)&&(i=(i+12)%12);else{for(var d=0;o>d;d++)n=this.moveMonth(n,t);i=n.getUTCMonth(),n.setUTCDate(a),s=function(){return i!==n.getUTCMonth()}}for(;s();)n.setUTCDate(--a),n.setUTCMonth(i);return n}},moveYear:function(e,t){return this.moveMonth(e,12*t)},dateWithinRange:function(e){return e>=this.o.startDate&&e<=this.o.endDate},keydown:function(e){if(!this.picker.is(":visible"))return void(27===e.keyCode&&this.show());var t,i,n,a=!1,r=this.focusDate||this.viewDate;switch(e.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),e.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;t=37===e.keyCode?-1:1,e.ctrlKey?(i=this.moveYear(this.dates.get(-1)||s(),t),n=this.moveYear(r,t),this._trigger("changeYear",this.viewDate)):e.shiftKey?(i=this.moveMonth(this.dates.get(-1)||s(),t),n=this.moveMonth(r,t),this._trigger("changeMonth",this.viewDate)):(i=new Date(this.dates.get(-1)||s()),i.setUTCDate(i.getUTCDate()+t),n=new Date(r),n.setUTCDate(r.getUTCDate()+t)),this.dateWithinRange(n)&&(this.focusDate=this.viewDate=n,this.setValue(),this.fill(),e.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;t=38===e.keyCode?-1:1,e.ctrlKey?(i=this.moveYear(this.dates.get(-1)||s(),t),n=this.moveYear(r,t),this._trigger("changeYear",this.viewDate)):e.shiftKey?(i=this.moveMonth(this.dates.get(-1)||s(),t),n=this.moveMonth(r,t),this._trigger("changeMonth",this.viewDate)):(i=new Date(this.dates.get(-1)||s()),i.setUTCDate(i.getUTCDate()+7*t),n=new Date(r),n.setUTCDate(r.getUTCDate()+7*t)),this.dateWithinRange(n)&&(this.focusDate=this.viewDate=n,this.setValue(),this.fill(),e.preventDefault());break;case 32:break;case 13:r=this.focusDate||this.dates.get(-1)||this.viewDate,this.o.keyboardNavigation&&(this._toggle_multidate(r),a=!0),this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(e.preventDefault(),"function"==typeof e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}if(a){this.dates.length?this._trigger("changeDate"):this._trigger("clearDate");var o;this.isInput?o=this.element:this.component&&(o=this.element.find("input")),o&&o.change()}},showMode:function(e){e&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+e))),this.picker.children("div").hide().filter(".datepicker-"+_.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var h=function(t,i){
this.element=e(t),this.inputs=e.map(i.inputs,function(e){return e.jquery?e[0]:e}),delete i.inputs,u.call(e(this.inputs),i).bind("changeDate",e.proxy(this.dateUpdated,this)),this.pickers=e.map(this.inputs,function(t){return e(t).data("datepicker")}),this.updateDates()};h.prototype={updateDates:function(){this.dates=e.map(this.pickers,function(e){return e.getUTCDate()}),this.updateRanges()},updateRanges:function(){var t=e.map(this.dates,function(e){return e.valueOf()});e.each(this.pickers,function(e,i){i.setRange(t)})},dateUpdated:function(t){if(!this.updating){this.updating=!0;var i=e(t.target).data("datepicker"),s=i.getUTCDate(),n=e.inArray(t.target,this.inputs),a=n-1,r=n+1,o=this.inputs.length;if(-1!==n){if(e.each(this.pickers,function(e,t){t.getUTCDate()||t.setUTCDate(s)}),s<this.dates[a])for(;a>=0&&s<this.dates[a];)this.pickers[a--].setUTCDate(s);else if(s>this.dates[r])for(;o>r&&s>this.dates[r];)this.pickers[r++].setUTCDate(s);this.updateDates(),delete this.updating}}},remove:function(){e.map(this.pickers,function(e){e.remove()}),delete this.element.data().datepicker}};var c=e.fn.datepicker,u=function(t){var i=Array.apply(null,arguments);i.shift();var s;return this.each(function(){var n=e(this),a=n.data("datepicker"),d="object"==typeof t&&t;if(!a){var c=r(this,"date"),u=e.extend({},f,c,d),p=o(u.language),g=e.extend({},f,p,c,d);if(n.hasClass("biz-range")||g.inputs){var _={inputs:g.inputs||n.find("input").toArray()};n.data("datepicker",a=new h(this,e.extend(g,_)))}else n.data("datepicker",a=new l(this,g))}return"string"==typeof t&&"function"==typeof a[t]&&(s=a[t].apply(a,i),void 0!==s)?!1:void 0}),void 0!==s?s:this};e.fn.datepicker=u;var f=e.fn.datepicker.defaults={autoclose:!1,beforeShowDay:e.noop,beforeShowMonth:e.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],datesDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-(1/0),startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,container:"body"},p=e.fn.datepicker.locale_opts=["format","rtl","weekStart"];e.fn.datepicker.Constructor=l;var g=e.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},_={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,_.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(e){var t=e.replace(this.validParts,"\x00").split("\x00"),i=e.match(this.validParts);if(!t||!t.length||!i||0===i.length)throw new Error("Invalid date format.");return{separators:t,parts:i}},parseDate:function(t,s,n){function a(){var e=this.slice(0,c[d].length),t=c[d].slice(0,e.length);return e.toLowerCase()===t.toLowerCase()}if(t){if(t instanceof Date)return t;"string"==typeof s&&(s=_.parseFormat(s));var r,o,d,h=/([\-+]\d+)([dmwy])/,c=t.match(/([\-+]\d+)([dmwy])/g);if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(t)){for(t=new Date,d=0;d<c.length;d++)switch(r=h.exec(c[d]),o=parseInt(r[1]),r[2]){case"d":t.setUTCDate(t.getUTCDate()+o);break;case"m":t=l.prototype.moveMonth.call(l.prototype,t,o);break;case"w":t.setUTCDate(t.getUTCDate()+7*o);break;case"y":t=l.prototype.moveYear.call(l.prototype,t,o)}return i(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),0,0,0)}c=t&&t.match(this.nonpunctuation)||[],t=new Date;var u,f,p={},m=["yyyy","yy","M","MM","m","mm","d","dd"],b={yyyy:function(e,t){return e.setUTCFullYear(t)},yy:function(e,t){return e.setUTCFullYear(2e3+t)},m:function(e,t){if(isNaN(e))return e;for(t-=1;0>t;)t+=12;for(t%=12,e.setUTCMonth(t);e.getUTCMonth()!==t;)e.setUTCDate(e.getUTCDate()-1);return e},d:function(e,t){return e.setUTCDate(t)}};b.M=b.MM=b.mm=b.m,b.dd=b.d,t=i(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0);var v=s.parts.slice();if(c.length!==v.length&&(v=e(v).filter(function(t,i){return-1!==e.inArray(i,m)}).toArray()),c.length===v.length){var y;for(d=0,y=v.length;y>d;d++){if(u=parseInt(c[d],10),r=v[d],isNaN(u))switch(r){case"MM":f=e(g[n].months).filter(a),u=e.inArray(f[0],g[n].months)+1;break;case"M":f=e(g[n].monthsShort).filter(a),u=e.inArray(f[0],g[n].monthsShort)+1}p[r]=u}var x,w;for(d=0;d<m.length;d++)w=m[d],w in p&&!isNaN(p[w])&&(x=new Date(t),b[w](x,p[w]),isNaN(x)||(t=x))}return t}},formatDate:function(t,i,s){if(!t)return"";"string"==typeof i&&(i=_.parseFormat(i));var n={d:t.getUTCDate(),D:g[s].daysShort[t.getUTCDay()],DD:g[s].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:g[s].monthsShort[t.getUTCMonth()],MM:g[s].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()};n.dd=(n.d<10?"0":"")+n.d,n.mm=(n.m<10?"0":"")+n.m,t=[];for(var a=e.extend([],i.separators),r=0,o=i.parts.length;o>=r;r++)a.length&&t.push(a.shift()),t.push(n[i.parts[r]]);return t.join("")},headTemplate:'<thead><tr><th class="prev">◀</th><th colspan="5" class="datepicker-switch"></th><th class="next">▶</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};return _.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+_.headTemplate+"<tbody></tbody>"+_.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+_.headTemplate+_.contTemplate+_.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+_.headTemplate+_.contTemplate+_.footTemplate+"</table></div></div>",e.fn.datepicker.DPGlobal=_,e.fn.datepicker.noConflict=function(){return e.fn.datepicker=c,this},e.fn.datepicker.version="1.4.0",e.fn.datepicker.dates["zh-CN"]={days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六","星期日"],daysShort:["周日","周一","周二","周三","周四","周五","周六","周日"],daysMin:["日","一","二","三","四","五","六","日"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],today:"今日",clear:"清空",weekStart:1,format:"yyyy年mm月dd日"},e.fn.datepicker.dates.en={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",weekStart:1,format:"dd/mm/yyyy"},e(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var i=e(this);i.data("datepicker")||(t.preventDefault(),u.call(i,"show"))}),e(function(){u.call(e('[data-provide="datepicker-inline"]'))}),u}),s("ui/Calendar",["require","dep/jquery.datepicker","ui/Input"],function(t){function i(t,i){s(t)?(this.date=new a(e(t)),e(this.date.main).addClass(r).attr("maxlength",10)):(this.range=e(t).find(":text"),this.startDate=new a(this.range[0]),e(this.startDate.main).addClass(r).attr("maxlength",10),this.endDate=new a(this.range[1]),e(this.endDate.main).addClass(r).attr("maxlength",10)),i=e.extend({},i||{}),this.instance=n.call(e(t),{autoclose:!0,format:"yyyy-mm-dd",language:i.language||"zh-CN",orientation:"top left",weekStart:1,todayHighlight:i.todayHighlight,todayBtn:i.todayBtn,startDate:i.startDate,endDate:i.endDate});var o=this;i.onChange&&this.instance.on("changeDate",function(e){i.onChange.call(o,e)})}function s(e){return 1===e.nodeType&&"input"===e.tagName.toLowerCase()&&"text"===e.getAttribute("type").toLowerCase()}var n=t("dep/jquery.datepicker"),a=t("ui/Input"),r="biz-calendar";i.prototype={getDate:function(){return this.range?[e(this.range[0]).datepicker("getDate"),e(this.range[1]).datepicker("getDate")]:this.instance.datepicker("getDate")},setDate:function(t){this.range?(e(this.range[0]).datepicker("setDate",t[0]),e(this.range[1]).datepicker("setDate",t[1])):this.instance.datepicker("setDate",t)},enable:function(){this.date?this.date.enable():(this.startDate.enable(),this.endDate.enable())},disable:function(){this.date?this.date.disable():(this.startDate.disable(),this.endDate.disable())},destroy:function(){this.date?this.date.destroy():(this.startDate.destroy(),this.endDate.destroy()),this.instance.remove()}};var o="bizCalendar";return e.extend(e.fn,{bizCalendar:function(t,s){var n;switch(t){case"getDate":return this.data(o).getDate();case"setDate":this.each(function(){n=e(this).data(o),n&&n.setDate(s)});break;case"enable":this.each(function(){n=e(this).data(o),n&&n.enable()});break;case"disable":this.each(function(){n=e(this).data(o),n&&n.disable()});break;case"destroy":this.each(function(){n=e(this).data(o),n&&(n.destroy(),e(this).data(o,null))});break;default:this.each(function(){e(this).data(o)||e(this).data(o,new i(this,t))})}return this}}),i}),s("ui/util",["require"],function(e){var t={};return t.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},t.escapeHTML=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},t}),function n(e,t,s){function a(o,d){if(!t[o]){if(!e[o]){var l="function"==typeof i&&i;if(!d&&l)return l(o,!0);if(r)return r(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var c=t[o]={exports:{}};e[o][0].call(c.exports,function(t){var i=e[o][1][t];return a(i?i:t)},c,c.exports,n,e,t,s)}return t[o].exports}for(var r="function"==typeof i&&i,o=0;o<s.length;o++)a(s[o]);return a}({1:[function(t,i,s){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var a=t("./class"),r=n(a),o=t("./constants");e.fn.resizableColumns=function(t){for(var i=arguments.length,s=Array(i>1?i-1:0),n=1;i>n;n++)s[n-1]=arguments[n];return this.each(function(){var i=e(this),n=i.data(o.DATA_API);if(n){if("string"==typeof t)return n[t].apply(n,s)}else n=new r["default"](i,t),i.data(o.DATA_API,n)})},e.resizableColumns=r["default"]},{"./class":2,"./constants":3}],2:[function(t,i,s){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(s,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),r=t("./constants"),o=function(){function t(i,s){n(this,t),this.ns=".rc"+this.count++,this.options=e.extend({},t.defaults,s),this.$window=e(window),this.$ownerDocument=e(i[0].ownerDocument),this.$table=i,this.$content=i.parent().parent().find('.biz-table-body tr[class!="no-data"]:first td'),this.hasContent=0!==this.$content.length,this.refreshHeaders(),this.restoreColumnWidths(),this.syncHandleWidths(),this.bindEvents(this.$window,"resize",this.syncHandleWidths.bind(this)),this.options.start&&this.bindEvents(this.$table,r.EVENT_RESIZE_START,this.options.start),this.options.resize&&this.bindEvents(this.$table,r.EVENT_RESIZE,this.options.resize),this.options.stop&&this.bindEvents(this.$table,r.EVENT_RESIZE_STOP,this.options.stop)}return a(t,[{key:"refreshHeaders",value:function(){var e=this.options.selector;"function"==typeof e&&(e=e.call(this,this.$table)),this.$tableHeaders=this.$table.find(e),this.assignPercentageWidths(),this.createHandles()}},{key:"createHandles",value:function(){var t=this,i=this.$handleContainer;null!=i&&i.remove(),this.$handleContainer=e("<div class='"+r.CLASS_HANDLE_CONTAINER+"' />"),this.$table.before(this.$handleContainer),this.$tableHeaders.each(function(i,s){var n=t.$tableHeaders.eq(i),a=t.$tableHeaders.eq(i+1);if(0!==a.length&&!n.is(r.SELECTOR_UNRESIZABLE)&&!a.is(r.SELECTOR_UNRESIZABLE)){e("<div class='"+r.CLASS_HANDLE+"' />").data(r.DATA_TH,e(s)).appendTo(t.$handleContainer)}}),this.bindEvents(this.$handleContainer,["mousedown","touchstart"],"."+r.CLASS_HANDLE,this.onPointerDown.bind(this))}},{key:"assignPercentageWidths",value:function(){var t=this;this.$tableHeaders.each(function(i,s){var n=e(s),a=n.outerWidth()/t.$table.width()*100;t.setWidth(n[0],a),t.hasContent&&t.setWidth(t.$content[i],a)})}},{key:"syncHandleWidths",value:function(){var t=this,i=this.$handleContainer;i.width(this.$table.width()),i.find("."+r.CLASS_HANDLE).each(function(i,s){var n=e(s),a=t.options.resizeFromBody?t.$table.height():t.$table.find("thead").height(),o=n.data(r.DATA_TH).outerWidth()+(n.data(r.DATA_TH).offset().left-t.$handleContainer.offset().left);n.css({left:o,height:a})})}},{key:"saveColumnWidths",value:function(){var t=this;this.$tableHeaders.each(function(i,s){var n=e(s);t.options.store&&!n.is(r.SELECTOR_UNRESIZABLE)&&t.options.store.set(t.generateColumnId(n),t.parseWidth(s))})}},{key:"restoreColumnWidths",value:function(){var t=this;this.$tableHeaders.each(function(i,s){var n=e(s);if(t.options.store&&!n.is(r.SELECTOR_UNRESIZABLE)){var a=t.options.store.get(t.generateColumnId(n));null!=a&&t.setWidth(s,a)}})}},{key:"onPointerDown",value:function(t){if(1===t.which){this.operation&&this.onPointerUp(t);var i=e(t.currentTarget);if(!i.is(r.SELECTOR_UNRESIZABLE)){var s=i.index(),n=this.$tableHeaders.eq(s).not(r.SELECTOR_UNRESIZABLE),a=this.$tableHeaders.eq(s+1).not(r.SELECTOR_UNRESIZABLE),o=this.parseWidth(n[0]),d=this.parseWidth(a[0]);this.operation={$leftColumn:n,$rightColumn:a,$currentGrip:i,startX:this.getPointerX(t),widths:{left:o,right:d},newWidths:{left:o,right:d}},this.hasContent&&(this.operation.$leftContent=this.$content.eq(s),this.operation.$rightContent=this.$content.eq(s+1)),this.bindEvents(this.$ownerDocument,["mousemove","touchmove"],this.onPointerMove.bind(this)),this.bindEvents(this.$ownerDocument,["mouseup","touchend"],this.onPointerUp.bind(this)),this.$handleContainer.add(this.$table).addClass(r.CLASS_TABLE_RESIZING),n.add(a).add(i).addClass(r.CLASS_COLUMN_RESIZING),this.triggerEvent(r.EVENT_RESIZE_START,[n,a,o,d],t),t.preventDefault()}}}},{key:"onPointerMove",value:function(e){var t=this.operation;if(this.operation){var i=(this.getPointerX(e)-t.startX)/this.$table.width()*100;if(0!==i){var s=t.$leftColumn[0],n=t.$rightColumn[0];if(this.hasContent)var a=t.$leftContent[0],o=t.$rightContent[0];var d=void 0,l=void 0,h=(t.$leftColumn.data("width")+17)/this.$table.width()*100,c=(t.$rightColumn.data("width")+17)/this.$table.width()*100;return i>0?(d=this.constrainWidth(t.widths.left+(t.widths.right-t.newWidths.right)),l=Math.max(c,t.widths.right-i)):0>i&&(d=Math.max(h,t.widths.left+i),l=this.constrainWidth(t.widths.right+(t.widths.left-t.newWidths.left))),s&&(this.setWidth(s,d),this.hasContent&&this.setWidth(a,d)),n&&(this.setWidth(n,l),this.hasContent&&this.setWidth(o,l)),t.newWidths.left=d,t.newWidths.right=l,this.triggerEvent(r.EVENT_RESIZE,[t.$leftColumn,t.$rightColumn,d,l],e)}}}},{key:"onPointerUp",value:function(e){var t=this.operation;if(this.operation)return this.unbindEvents(this.$ownerDocument,["mouseup","touchend","mousemove","touchmove"]),this.$handleContainer.add(this.$table).removeClass(r.CLASS_TABLE_RESIZING),t.$leftColumn.add(t.$rightColumn).add(t.$currentGrip).removeClass(r.CLASS_COLUMN_RESIZING),this.syncHandleWidths(),this.saveColumnWidths(),this.operation=null,this.triggerEvent(r.EVENT_RESIZE_STOP,[t.$leftColumn,t.$rightColumn,t.newWidths.left,t.newWidths.right],e)}},{key:"destroy",value:function(){var e=this.$table,t=this.$handleContainer.find("."+r.CLASS_HANDLE);return this.unbindEvents(this.$window.add(this.$ownerDocument).add(this.$table).add(t)),t.removeData(r.DATA_TH),e.removeData(r.DATA_API),this.$handleContainer.remove(),this.$handleContainer=null,this.$tableHeaders=null,this.$table=null,e}},{key:"bindEvents",value:function(e,t,i,s){"string"==typeof t?t+=this.ns:t=t.join(this.ns+" ")+this.ns,arguments.length>3?e.on(t,i,s):e.on(t,i)}},{key:"unbindEvents",value:function(e,t){"string"==typeof t?t+=this.ns:t=null!=t?t.join(this.ns+" ")+this.ns:this.ns,e.off(t)}},{key:"triggerEvent",value:function(t,i,s){var n=e.Event(t);return n.originalEvent&&(n.originalEvent=e.extend({},s)),this.$table.trigger(n,[this].concat(i||[]))}},{key:"generateColumnId",value:function(e){return this.$table.data(r.DATA_COLUMNS_ID)+"-"+e.data(r.DATA_COLUMN_ID)}},{key:"parseWidth",value:function(e){return e?parseFloat(e.style.width.replace("%","")):0}},{key:"setWidth",value:function(e,t){t=t.toFixed(2),t=t>0?t:0,e.style.width=t+"%"}},{key:"constrainWidth",value:function(e){return void 0!=this.options.minWidth&&(e=Math.max(this.options.minWidth,e)),void 0!=this.options.maxWidth&&(e=Math.min(this.options.maxWidth,e)),e}},{key:"getPointerX",value:function(e){return 0===e.type.indexOf("touch")?(e.originalEvent.touches[0]||e.originalEvent.changedTouches[0]).pageX:e.pageX}}]),t}();s["default"]=o,o.defaults={selector:function(e){return e.find("thead").length?r.SELECTOR_TH:r.SELECTOR_TD},store:window.store,syncHandlers:!0,resizeFromBody:!0,maxWidth:null,minWidth:.01},o.count=0,i.exports=s["default"]},{"./constants":3}],3:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s="resizableColumns";i.DATA_API=s;var n="resizable-columns-id";i.DATA_COLUMNS_ID=n;var a="resizable-column-id";i.DATA_COLUMN_ID=a;var r="th";i.DATA_TH=r;var o="rc-table-resizing";i.CLASS_TABLE_RESIZING=o;var d="rc-column-resizing";i.CLASS_COLUMN_RESIZING=d;var l="rc-handle";i.CLASS_HANDLE=l;var h="rc-handle-container";i.CLASS_HANDLE_CONTAINER=h;var c="column:resize:start";i.EVENT_RESIZE_START=c;var u="column:resize";i.EVENT_RESIZE=u;var f="column:resize:stop";i.EVENT_RESIZE_STOP=f;var p="tr:first > th:visible";i.SELECTOR_TH=p;var g="tr:first > td:visible";i.SELECTOR_TD=g;var _="[data-noresize]";i.SELECTOR_UNRESIZABLE=_},{}],4:[function(e,t,i){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(i,"__esModule",{value:!0});var n=e("./class"),a=s(n),r=e("./adapter");s(r);i["default"]=a["default"],t.exports=i["default"]},{"./adapter":1,"./class":2}]},{},[4]),s("dep/jquery.resizableColumns",function(){}),s("dep/jquery.editabletable",["require"],function(t){e.fn.editableTableWidget=function(t){"use strict";return e(this).each(function(){var i,s=function(){var t=e.extend({},e.fn.editableTableWidget.defaultOptions);return t.editor=t.editor.clone(),t},n=e.extend(s(),t),a=37,r=38,o=39,d=40,l=13,h=27,c=9,u=e(this),f=n.editor.css("position","absolute").hide().appendTo(u.parent()),p=function(e){i=u.find("td:focus"),i.length&&(f.val(i.text()).removeClass("error").show().offset(i.offset()).css(i.css(n.cloneProperties)).width(i.width()).height(i.height()).focus(),e&&f.select())},g=function(){var t,s=e.trim(f.val()),n=e.Event("change");return!i||i.text()===s||f.hasClass("error")?!0:(t=i.html(),i.text(s).trigger(n,s),void(n.result===!1&&i.html(t)))},_=function(e,t){return t===o?e.next("td"):t===a?e.prev("td"):t===r?e.parent().prev().children().eq(e.index()):t===d?e.parent().next().children().eq(e.index()):[]};f.blur(function(){g(),f.hide()}).keydown(function(e){if(e.which===l)g(),f.hide(),i.focus(),e.preventDefault(),e.stopPropagation();else if(e.which===h)f.val(i.text()),e.preventDefault(),e.stopPropagation(),f.hide(),i.focus();else if(e.which===c)i.focus();else if(this.selectionEnd-this.selectionStart===this.value.length){var t=_(i,e.which);t.length>0&&(t.focus(),e.preventDefault(),e.stopPropagation())}}).on("input paste",function(){var t=e.Event("validate");i.trigger(t,e.trim(f.val())),t.result===!1?f.addClass("error"):f.removeClass("error")}),u.on("click.bizTableEdit","td[editable]",p),u.find("td").prop("tabindex",1),e(window).on("resize",function(){f.is(":visible")&&f.offset(i.offset()).width(i.width()).height(i.height())})})},e.fn.editableTableWidget.defaultOptions={cloneProperties:["padding","padding-top","padding-bottom","padding-left","padding-right","text-align","font","font-size","font-family","font-weight"],editor:e('<input class="biz-table-editor">')}}),s("ui/Table",["require","ui/util","dep/jquery.resizableColumns","dep/jquery.editabletable"],function(t){function i(t,i){if(t instanceof jQuery){if(!(t.length>0))return;t=t[0]}if(s(t)){this.main=t,this.$main=e(this.main);var n={data:[],selectable:!1,resizable:!1,topOffset:0,lockHead:!1};this.defaultClass="biz-table",this.selectPrefix="biz-table-select-row-"+Math.floor(10001*Math.random()+0)+"-",this.options=e.extend(!0,n,i||{}),this.init(this.options)}}function s(e){return 1===e.nodeType&&"div"===e.tagName.toLowerCase()}var n=t("ui/util");t("dep/jquery.resizableColumns"),t("dep/jquery.editabletable"),i.prototype={init:function(t){this.$main.html('<div class="biz-table-head-wrap"><table class="biz-table-head"></table></div><div class="biz-table-placeholder"></div><div class="biz-table-body-wrap"><table class="biz-table-body"></table></div>'),this.$headWrap=this.$main.find(".biz-table-head-wrap"),this.$bodyWrap=this.$main.find(".biz-table-body-wrap"),this.$placeholder=this.$main.find(".biz-table-placeholder"),this.$tableHead=this.$main.find(".biz-table-head"),this.$tableBody=this.$main.find(".biz-table-body");var i=t.skin?" "+t.skin:"";this.defaultSort=[];for(var s=t.column.length-1;s>=0;s--){var n=t.column[s];n.currentSort&&(this.defaultSort[this.defaultSort.length]={field:n.field,currentSort:n.currentSort})}this.$tableHead.html(this.createTableHead(t)).addClass(this.defaultClass+i),this.$tableBody.html(this.createTableBody(t)).addClass(this.defaultClass+i+(this.rowSpan>1?" biz-rowspan":"")),t.selectable&&(this.createSelect(),this.bindSelect()),t.data.length?("top"===t.foot&&this.$tableBody.find("tbody").prepend(this.createFoot(t)),"bottom"===t.foot&&this.$tableBody.find("tbody").append(this.createFoot(t))):t.noDataContent&&this.createNoDataContent(),this.syncWidth(),e(window).on("resize.bizTable",function(){a.syncWidth()});var a=this;if(this.$headWrap.on("scroll",function(){a.$bodyWrap[0].scrollLeft=this.scrollLeft}),this.$bodyWrap.on("scroll",function(){a.$headWrap[0].scrollLeft=this.scrollLeft}),t.lockHead){var r=this.$headWrap.height();e(window).on("scroll.bizTable",function(){var i=a.$main.offset().top-t.topOffset;e(window).scrollTop()>i?a.hasLocked||(a.$headWrap.css({position:"fixed",top:a.options.topOffset,width:a.$main.width()}),a.$placeholder.css({height:r+a.options.topOffset}),a.hasLocked=!0):a.hasLocked&&(a.$headWrap.css({position:"static",top:"auto",width:"auto"}),a.$placeholder.css({height:0}),a.hasLocked=!1)})}t.resizable&&(this.setMinWidth(),this.$tableHead.resizableColumns({start:function(){e(".biz-table-editor").blur()}})),t.onSort&&this.bindSort(),this.$tableBody.editableTableWidget(),t.onEdit&&this.bindEdit(),t.onValidate&&this.bindValidate()},syncWidth:function(){this.$headWrap.css({width:this.$main.width()}),this.$tableHead.css({width:this.$tableBody.width()})},setMinWidth:function(){var t=e.map(this.options.column,function(e,t){return"undefined"==typeof e.visible||e.visible?e.width+17:0}),i=this.options.selectable?37:0;e.each(t,function(e,t){i+=t}),this.$tableHead.css("min-width",i),this.$tableBody.css("min-width",i),this.syncWidth()},createTableHead:function(e){var t=["<thead><tr>"],i=e.column,s=i.length;this.rowSpan=1;for(var a=0;s>a;a++){var r=i[a];if("undefined"==typeof r.visible||r.visible){n.isArray(r.content)||(r.content=[r.content]),r.content.length>this.rowSpan&&(this.rowSpan=r.content.length);var o="undefined"!=typeof r.sortable&&r.sortable?" sortable":"",d=r.sortable&&"undefined"!=typeof r.currentSort?" "+r.currentSort:"",l=r.width?' width="'+r.width+'"':"",h="undefined"==typeof r.escapeTitle||r.escapeTitle?n.escapeHTML(r.title):r.title;t.push('<th nowrap data-width="'+r.width+'"'+l+o+d+' field="'+r.field+'">'+h+"</th>")}}return t.push("</tr></thead><tbody></tbody>"),t.join("")},createTableBody:function(e){for(var t=["<tbody>"],i=e.column,s=i.length,a=e.data,r=a.length,o=0;r>o;o++){t.push("<tr>");for(var d=0;s>d;d++){var l=i[d];if("undefined"==typeof l.visible||l.visible){var h=l.content.length>1||"undefined"==typeof l.editable||!l.editable?"":" editable",c=l.align?' align="'+l.align+'"':"",u=l.width?' width="'+(""!==h?l.width-22:l.width)+'"':"",f=this.rowSpan>1&&1===l.content.length?' rowspan="'+this.rowSpan+'"':"",p=l.content[0].apply(this,[a[o],o+1,l.field])+"",g="undefined"==typeof l.escapeContent||l.escapeContent?n.escapeHTML(p):p;t.push("<td"+u+f+h+c+">"+g+"</td>")}}if(t.push("</tr>"),this.rowSpan>1)for(var _=1;_<this.rowSpan;_++){t.push("<tr>");for(var m=1;s>m;m++){var b=i[m];if(("undefined"==typeof b.visible||b.visible)&&1!==b.content.length){var v=b.align?' align="'+b.align+'"':"",y=b.content[_].apply(this,[a[o],o+1,b.field])+"",x="undefined"==typeof b.escapeContent||b.escapeContent?n.escapeHTML(y):y;t.push("<td"+v+">"+x+"</td>")}}t.push("</tr>")}}return t.push("</tbody>"),t.join("")},createFoot:function(e){var t=['<tr class="sum">'],i=e.column,s=i.length;e.selectable&&t.push('<td width="20"></td>');for(var a=0;s>a;a++){var r=i[a];if("undefined"==typeof r.visible||r.visible){var o=r.align?' align="'+r.align+'"':"",d=r.width?' width="'+r.width+'"':"",l=r.footContent?r.footContent.call(this,r.field)+"":"",h="undefined"==typeof r.escapeContent||r.escapeContent?n.escapeHTML(l):l;t.push("<td"+d+o+">"+h+"</td>")}}return t.push("</tr>"),t.join("")},createNoDataContent:function(){var t=this.options.column.length;e.each(this.options.column,function(e,i){"undefined"==typeof i.visible||i.visible||(t-=1)}),this.options.selectable&&(t+=1),this.$tableBody.find("tbody").append('<tr class="no-data"><td colspan="'+t+'">'+this.options.noDataContent+"</td></tr>")},createSelect:function(){this.$tableHead.find("tr").prepend('<th nowrap data-width="20" width="20"><input type="checkbox" title=" " id="'+(this.selectPrefix+0)+'" /></th>');var t=this;if(1===this.rowSpan)this.$tableBody.find("tr").each(function(i,s){e(s).prepend('<td width="20" align="center"><input type="checkbox" title=" " id="'+(t.selectPrefix+(i+1))+'" /></td>')});else{var i=1;this.$tableBody.find("tr").each(function(s,n){(s+t.rowSpan)%t.rowSpan===0&&(e(n).prepend('<td width="20" align="center" rowspan="'+t.rowSpan+'"><input type="checkbox" title=" " id="'+(t.selectPrefix+i)+'" /></td>'),i+=1)})}this.$main.find(":checkbox").bizCheckbox()},bindSelect:function(){var t=this;this.$main.on("click.bizTableSelectAll",".biz-table-head th .biz-label",function(i){var s=e(i.target).hasClass("biz-checkbox-checked"),n=t.$tableBody.find(":checkbox"),a=t.$tableBody.find('tr[class!="sum"]');s?(n.bizCheckbox("check"),a.addClass("selected"),t.options.onSelect&&t.options.onSelect.call(t,t.options.data,i)):(n.bizCheckbox("uncheck"),a.removeClass("selected"),t.options.onSelect&&t.options.onSelect.call(t,[],i))}).on("click.bizTableSelectOne",".biz-table-body td .biz-label",function(i){var s=e(i.target).hasClass("biz-checkbox-checked"),n=t.$tableBody.find(".biz-checkbox-checked").length,a=t.$tableHead.find(":checkbox"),r=e(i.target).parent().parent(),o=t.options.data.length;n===o?a.bizCheckbox("check"):a.bizCheckbox("uncheck"),s?r.addClass("selected"):r.removeClass("selected"),t.options.onSelect&&t.options.onSelect.call(t,e.map(t.getSelectedIndex(),function(e,i){return t.options.data[e]}),i)})},getSelectedIndex:function(){var t=this;return e.map(this.$tableBody.find(".biz-checkbox-checked"),function(i,s){return parseInt(e(i).attr("for").replace(t.selectPrefix,""),10)-1})},bindSort:function(){var t=this;this.$main.on("click.bizTableSort",".biz-table-head th[sortable]",function(i){var s=e(i.currentTarget),n=s.attr("field");void 0!==s.attr("des")?s.removeAttr("des").attr("asc",""):void 0!==s.attr("asc")?s.removeAttr("asc").attr("des",""):(s.parent().children("th").removeAttr("des").removeAttr("asc"),s.attr("des","")),e.each(t.options.column,function(e,t){t.field===n?t.currentSort=void 0!==s.attr("des")?"des":"asc":t.currentSort&&delete t.currentSort}),t.options.onSort.call(t,{field:s.attr("field"),des:void 0!==s.attr("des"),asc:void 0!==s.attr("asc")},i)})},resetSort:function(){var e,t;if(this.defaultSort.length)for(e=0;e<this.options.column.length;e++){t=this.options.column[e],delete t.currentSort;for(var i=0;i<this.defaultSort.length;i++)t.field==this.defaultSort[i].field&&(t.currentSort=this.defaultSort[i].currentSort)}else for(e=0;e<this.options.column.length;e++)t=this.options.column[e],t.currentSort&&delete t.currentSort},bindValidate:function(){var t=this;this.$main.find("td[editable]").on("validate",function(i,s){var n=e(this).parent().find("td").index(e(this));return t.options.selectable&&(n-=1),t.options.onValidate.call(t,{newValue:s,field:t.options.column[n].field},i)})},bindEdit:function(){var t=this;this.$main.find("td[editable]").on("change",function(i,s){var n=parseInt(e(this).parent().find(":checkbox").attr("id").replace(t.selectPrefix,""),10),a=e(this).parent().find("td").index(e(this));t.options.selectable&&(a-=1);var r=t.options.column[a].field;t.options.data[n-1][r]=s,t.options.onEdit.call(t,{newValue:s,item:t.options.data[n-1],index:n,field:r},i)})},getData:function(){return this.options.data},updateData:function(t){this.options.data=e.map(t||[],function(e,t){return e}),this.refresh()},updateRow:function(t,i){this.options.data[t-1]=e.extend(!0,{},i),this.refresh()},updateCell:function(e,t,i){this.options.data[e-1][t]=i,this.refresh()},getSelected:function(){var t=this;return e.map(this.getSelectedIndex(),function(e,i){return t.options.data[e]})},setSelected:function(t,i){var s=this;0===t&&(t=e.map(this.options.data,function(e,t){return t+1})),n.isArray(t)||(t=[t]),e.each(t,function(e,t){var n=s.$main.find("#"+s.selectPrefix+t),a=n.parent().parent();i?(n.bizCheckbox("check"),a.addClass("selected")):(n.bizCheckbox("uncheck"),a.removeClass("selected"))});var a=this.$tableHead.find(":checkbox");this.$tableBody.find(".biz-checkbox-checked").length===this.options.data.length?a.bizCheckbox("check"):a.bizCheckbox("uncheck")},showColumn:function(e){this.setColumnVisible(e,!0)},hideColumn:function(e){this.setColumnVisible(e,!1)},setColumnVisible:function(t,i){n.isArray(t)||(t=[t]);var s=this;e.each(t,function(t,n){e.each(s.options.column,function(e,t){t.field===n&&(t.visible=i)})}),this.refresh()},refresh:function(){this.$main.find(":checkbox").bizCheckbox("destroy"),this.$tableBody.find("td[editable]").off(),this.$tableHead.html(this.createTableHead(this.options)),this.$tableBody.html(this.createTableBody(this.options)),this.options.selectable&&this.createSelect(),this.options.data.length?("top"===this.options.foot&&this.$tableBody.find("tbody").prepend(this.createFoot(this.options)),"bottom"===this.options.foot&&this.$tableBody.find("tbody").append(this.createFoot(this.options))):this.options.noDataContent&&this.createNoDataContent(),this.syncWidth(),this.$headWrap[0].scrollLeft=this.$bodyWrap[0].scrollLeft=0,this.options.resizable&&(this.setMinWidth(),this.$tableHead.resizableColumns("destroy").resizableColumns({start:function(){e(".biz-table-editor").blur()}})),this.$tableBody.find("td").prop("tabindex",1),this.options.onEdit&&this.bindEdit(),this.options.onValidate&&this.bindValidate()},destroy:function(){this.$main.find(":checkbox").bizCheckbox("destroy"),this.$tableBody.find("td[editable]").off(),e(".biz-table-editor").off().remove(),this.$main.off("click.bizTableSelectAll").off("click.bizTableSelectOne").off("click.bizTableSort"),this.options.resizable&&this.$tableHead.resizableColumns("destroy"),e(window).off("scroll.bizTable"),
this.$headWrap.off(),this.$bodyWrap.off(),this.$main.empty()}};var a="bizTable";return e.extend(e.fn,{bizTable:function(t,n){var r;switch(t){case"getData":return this.data(a).getData();case"updateData":this.each(function(){r=e(this).data(a),r&&r.updateData(n)});break;case"updateRow":this.each(function(){r=e(this).data(a),r&&r.updateRow(o[1],o[2])});break;case"updateCell":this.each(function(){r=e(this).data(a),r&&r.updateCell(o[1],o[2],o[3])});break;case"getSelected":return this.data(a).getSelected();case"setSelected":var o=arguments;this.each(function(){r=e(this).data(a),r&&r.setSelected(o[1],o[2])});break;case"showColumn":this.each(function(){r=e(this).data(a),r&&r.showColumn(n)});break;case"hideColumn":this.each(function(){r=e(this).data(a),r&&r.hideColumn(n)});break;case"resetSort":this.each(function(){r=e(this).data(a),r&&r.resetSort(n)});break;case"destroy":this.each(function(){r=e(this).data(a),r&&(r.destroy(),e(this).data(a,null))});break;default:this.each(function(){!e(this).data(a)&&s(this)&&e(this).data(a,new i(this,t))})}return this}}),i}),s("dep/jquery.treetable",["require"],function(t){var i,s,n;i=function(){function t(t,i,s){var n;this.row=t,this.tree=i,this.settings=s,this.id=this.row.data(this.settings.nodeIdAttr),n=this.row.data(this.settings.parentIdAttr),null!=n&&""!==n&&(this.parentId=n),this.treeCell=e(this.row.children(this.settings.columnElType)[this.settings.column]),this.expander=e(this.settings.expanderTemplate),this.indenter=e(this.settings.indenterTemplate),this.children=[],this.initialized=!1,this.treeCell.prepend(this.indenter)}return t.prototype.addChild=function(e){return this.children.push(e)},t.prototype.ancestors=function(){var e,t;for(t=this,e=[];t=t.parentNode();)e.push(t);return e},t.prototype.collapse=function(){return this.collapsed()?this:(this.row.removeClass("expanded").addClass("collapsed"),this._hideChildren(),this.expander.attr("title",this.settings.stringExpand),this.initialized&&null!=this.settings.onNodeCollapse&&this.settings.onNodeCollapse.apply(this),this)},t.prototype.collapsed=function(){return this.row.hasClass("collapsed")},t.prototype.expand=function(){return this.expanded()?this:(this.row.removeClass("collapsed").addClass("expanded"),this.initialized&&null!=this.settings.onNodeExpand&&this.settings.onNodeExpand.apply(this),e(this.row).is(":visible")&&this._showChildren(),this.expander.attr("title",this.settings.stringCollapse),this)},t.prototype.expanded=function(){return this.row.hasClass("expanded")},t.prototype.hide=function(){return this._hideChildren(),this.row.hide(),this},t.prototype.isBranchNode=function(){return this.children.length>0||this.row.data(this.settings.branchAttr)===!0?!0:!1},t.prototype.updateBranchLeafClass=function(){this.row.removeClass("branch"),this.row.removeClass("leaf"),this.row.addClass(this.isBranchNode()?"branch":"leaf")},t.prototype.level=function(){return this.ancestors().length},t.prototype.parentNode=function(){return null!=this.parentId?this.tree[this.parentId]:null},t.prototype.removeChild=function(t){var i=e.inArray(t,this.children);return this.children.splice(i,1)},t.prototype.render=function(){var t,i,s=this.settings;return s.expandable===!0&&this.isBranchNode()&&(t=function(t){return e(this).parents("table").treetable("node",e(this).parents("tr").data(s.nodeIdAttr)).toggle(),t.preventDefault()},this.indenter.html(this.expander),i=s.clickableNodeNames===!0?this.treeCell:this.expander,i.off("click.treetable").on("click.treetable",t),i.off("keydown.treetable").on("keydown.treetable",function(e){13==e.keyCode&&t.apply(this,[e])})),this.indenter[0].style.paddingLeft=""+this.level()*s.indent+"px",this},t.prototype.reveal=function(){return null!=this.parentId&&this.parentNode().reveal(),this.expand()},t.prototype.setParent=function(e){return null!=this.parentId&&this.tree[this.parentId].removeChild(this),this.parentId=e.id,this.row.data(this.settings.parentIdAttr,e.id),e.addChild(this)},t.prototype.show=function(){return this.initialized||this._initialize(),this.row.show(),this.expanded()&&this._showChildren(),this},t.prototype.toggle=function(){return this.expanded()?this.collapse():this.expand(),this},t.prototype._hideChildren=function(){var e,t,i,s,n;for(s=this.children,n=[],t=0,i=s.length;i>t;t++)e=s[t],n.push(e.hide());return n},t.prototype._initialize=function(){var e=this.settings;return this.render(),e.expandable===!0&&"collapsed"===e.initialState?this.collapse():this.expand(),null!=e.onNodeInitialized&&e.onNodeInitialized.apply(this),this.initialized=!0},t.prototype._showChildren=function(){var e,t,i,s,n;for(s=this.children,n=[],t=0,i=s.length;i>t;t++)e=s[t],n.push(e.show());return n},t}(),s=function(){function t(e,t){this.table=e,this.settings=t,this.tree={},this.nodes=[],this.roots=[]}return t.prototype.collapseAll=function(){var e,t,i,s,n;for(s=this.nodes,n=[],t=0,i=s.length;i>t;t++)e=s[t],n.push(e.collapse());return n},t.prototype.expandAll=function(){var e,t,i,s,n;for(s=this.nodes,n=[],t=0,i=s.length;i>t;t++)e=s[t],n.push(e.expand());return n},t.prototype.findLastNode=function(e){return e.children.length>0?this.findLastNode(e.children[e.children.length-1]):e},t.prototype.loadRows=function(t){var s,n,a;if(null!=t)for(a=0;a<t.length;a++)n=e(t[a]),null!=n.data(this.settings.nodeIdAttr)&&(s=new i(n,this.tree,this.settings),this.nodes.push(s),this.tree[s.id]=s,null!=s.parentId&&this.tree[s.parentId]?this.tree[s.parentId].addChild(s):this.roots.push(s));for(a=0;a<this.nodes.length;a++)s=this.nodes[a].updateBranchLeafClass();return this},t.prototype.move=function(t,i){var s=t.parentNode();return t!==i&&i.id!==t.parentId&&-1===e.inArray(t,i.ancestors())&&(t.setParent(i),this._moveRows(t,i),1===t.parentNode().children.length&&t.parentNode().render()),s&&s.updateBranchLeafClass(),t.parentNode()&&t.parentNode().updateBranchLeafClass(),t.updateBranchLeafClass(),this},t.prototype.removeNode=function(t){return this.unloadBranch(t),t.row.remove(),null!=t.parentId&&t.parentNode().removeChild(t),delete this.tree[t.id],this.nodes.splice(e.inArray(t,this.nodes),1),this},t.prototype.render=function(){var e,t,i,s;for(s=this.roots,t=0,i=s.length;i>t;t++)e=s[t],e.show();return this},t.prototype.sortBranch=function(e,t){return e.children.sort(t),this._sortChildRows(e),this},t.prototype.unloadBranch=function(e){var t,i=e.children.slice(0);for(t=0;t<i.length;t++)this.removeNode(i[t]);return e.children=[],e.updateBranchLeafClass(),this},t.prototype._moveRows=function(e,t){var i,s=e.children;for(e.row.insertAfter(t.row),e.render(),i=s.length-1;i>=0;i--)this._moveRows(s[i],e)},t.prototype._sortChildRows=function(e){return this._moveRows(e,e)},t}(),n={init:function(t,i){var n;return n=e.extend({branchAttr:"ttBranch",clickableNodeNames:!1,column:0,columnElType:"td",expandable:!1,expanderTemplate:"<a href='#'>&nbsp;</a>",indent:19,indenterTemplate:"<span class='indenter'></span>",initialState:"collapsed",nodeIdAttr:"ttId",parentIdAttr:"ttParentId",stringExpand:"Expand",stringCollapse:"Collapse",onInitialized:null,onNodeCollapse:null,onNodeExpand:null,onNodeInitialized:null},t),this.each(function(){var t,a=e(this);return(i||void 0===a.data("treetable"))&&(t=new s(this,n),t.loadRows(this.rows).render(),a.data("treetable",t),null!=n.onInitialized&&n.onInitialized.apply(t)),a})},destroy:function(){return this.each(function(){return e(this).removeData("treetable")})},collapseAll:function(){return this.data("treetable").collapseAll(),this},collapseNode:function(e){var t=this.data("treetable").tree[e];if(!t)throw new Error("Unknown node '"+e+"'");return t.collapse(),this},expandAll:function(){return this.data("treetable").expandAll(),this},expandNode:function(e){var t=this.data("treetable").tree[e];if(!t)throw new Error("Unknown node '"+e+"'");return t.initialized||t._initialize(),t.expand(),this},loadBranch:function(t,i){var s=this.data("treetable").settings,n=this.data("treetable").tree;if(i=e(i),null==t)this.append(i);else{var a=this.data("treetable").findLastNode(t);i.insertAfter(a.row)}return this.data("treetable").loadRows(i),i.filter("tr").each(function(){n[e(this).data(s.nodeIdAttr)].show()}),null!=t&&t.render().expand(),this},move:function(e,t){var i,s;return s=this.data("treetable").tree[e],i=this.data("treetable").tree[t],this.data("treetable").move(s,i),this},node:function(e){return this.data("treetable").tree[e]},removeNode:function(e){var t=this.data("treetable").tree[e];if(!t)throw new Error("Unknown node '"+e+"'");return this.data("treetable").removeNode(t),this},reveal:function(e){var t=this.data("treetable").tree[e];if(!t)throw new Error("Unknown node '"+e+"'");return t.reveal(),this},sortBranch:function(t,i){var s,n=this.data("treetable").settings;return i=i||n.column,s=i,e.isNumeric(i)&&(s=function(t,s){var n,a,r;return n=function(t){var s=t.row.find("td:eq("+i+")").text();return e.trim(s).toUpperCase()},a=n(t),r=n(s),r>a?-1:a>r?1:0}),this.data("treetable").sortBranch(t,s),this},unloadBranch:function(e){return this.data("treetable").unloadBranch(e),this}},e.fn.treetable=function(t){return n[t]?n[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?e.error("Method "+t+" does not exist on jQuery.treetable"):n.init.apply(this,arguments)}}),s("ui/TreeTable",["require","dep/jquery.resizableColumns","dep/jquery.treetable"],function(t){function i(t,i){if(t instanceof jQuery){if(!(t.length>0))return;t=t[0]}if(s(t)){this.main=t,this.$main=e(this.main);var n={resizable:!0,expanded:!0};this.options=e.extend(n,i||{}),this.init(this.options)}}function s(e){return 1===e.nodeType&&"table"===e.tagName.toLowerCase()}t("dep/jquery.resizableColumns"),t("dep/jquery.treetable");var n="biz-table biz-treetable";i.prototype={init:function(t){this.$main.addClass(n);var i=this;this.$main.treetable({expandable:!0,stringCollapse:"",stringExpand:"",initialState:t.expanded?"expanded":"collapsed",onInitialized:t.onLoad,onNodeCollapse:t.onCollapse,onNodeExpand:t.onExpand}).on("click.bizTreeTable","tbody tr",function(s){if(e(".tree-selected").not(this).removeClass("tree-selected"),e(this).toggleClass("tree-selected"),e(this).hasClass("tree-selected")&&t.onSelect){var n=i.$main.treetable("node",e(this).attr("data-tt-id"));t.onSelect.call(n)}}),t.resizable&&this.$main.resizableColumns()},collapseAll:function(){this.$main.treetable("collapseAll")},collapseNode:function(e){this.$main.treetable("collapseNode",e)},expandAll:function(){this.$main.treetable("expandAll")},expandNode:function(e){this.$main.treetable("expandNode",e)},selectNode:function(e){this.$main.treetable("reveal",e),this.$main.find('tr[data-tt-id="'+e+'"]').click()},destroy:function(){this.$main.removeClass(n).treetable("destroy").off("click.bizTreeTable"),this.$main.find("span.indenter a").off(),this.$main.find("span.indenter").remove(),this.$main.resizableColumns("destroy")}};var a="bizTreeTable";return e.extend(e.fn,{bizTreeTable:function(t,n){var r;switch(t){case"destroy":this.each(function(){r=e(this).data(a),r&&(r.destroy(),e(this).data(a,null))});break;case"collapseAll":this.each(function(){r=e(this).data(a),r&&r.collapseAll()});break;case"collapseNode":this.each(function(){r=e(this).data(a),r&&r.collapseNode(n)});break;case"expandAll":this.each(function(){r=e(this).data(a),r&&r.expandAll()});break;case"expandNode":this.each(function(){r=e(this).data(a),r&&r.expandNode(n)});break;case"selectNode":this.each(function(){r=e(this).data(a),r&&r.selectNode(n)});break;default:this.each(function(){!e(this).data(a)&&s(this)&&e(this).data(a,new i(this,t))})}return this}}),i}),s("ui/DropdownContext",[],function(){function t(t,i){if(t instanceof jQuery){if(!(t.length>0))return;t=t[0]}this.context=t,this.$context=e(t);var s={alignX:"left",alignY:"bottom",offsetX:0,offsetY:0,delay:0,event:"click",skin:"biz-dropdown-context"};this.options=e.extend(s,i||{}),this.hasShow=!1,this._init()}t.prototype._init=function(){this.options.trigger&&this.$context&&("click"==this.options.event&&(this.eventHandler=e.proxy(this,"toggle"),this.options.trigger.on(this.options.event,this.eventHandler)),this.$main=e('<div class="'+this.options.skin+'" style="display:none;"></div>'),this.$main.append(this.$context),this.$main.appendTo("body"))},t.prototype.toggle=function(){(this.hasShow?this.close:this.open).call(this)},t.prototype.open=function(){function t(){var e,t,i=this.options.trigger.position();this.$main.show(),this.$context.show(),"left"==this.options.alignX?t=i.left+this.options.offsetX:"right"==this.options.alignX&&(t=i.left+(this.options.trigger.outerWidth()-this.$main.outerWidth())+this.options.offsetX),"bottom"==this.options.alignY?e=i.top+this.options.trigger.outerHeight()+this.options.offsetY:"top"==this.options.alignY&&(e=i.top-this.$main.outerHeight()+this.options.offsetY),this.position(e,t),this.$main.css("z-index",this.options.zIndex||this.options.trigger.css("zIndex")),this.hasShow^=1}var i=!0;this.options.onBeforeOpen&&"function"==typeof this.options.onBeforeOpen&&(i=this.options.onBeforeOpen(),i===!1)||(this.options.delay>0?this.settimeout=setTimeout(e.proxy(t,this),this.options.delay):t.call(this))},t.prototype.close=function(){var e=!0;this.options.onBeforeClose&&"function"==typeof this.options.onBeforeClose&&(e=this.options.onBeforeClose(),e===!1)||(this.$main.hide(),this.hasShow^=1)},t.prototype.position=function(e,t){this.$main.css("top",e).css("left",t)},t.prototype.destroy=function(){this.settimeout&&clearTimeout(this.settimeout),this.$context.remove(),"click"==this.options.event&&this.options.trigger.off(this.options.event,this.eventHandler)};var i="bizDialog";return e.extend(e.fn,{bizDDContext:function(s){var n;switch(s){case"open":this.each(function(){n=e(this).data(i),n&&n.open()});break;case"close":this.each(function(){n=e(this).data(i),n&&n.close()});break;case"destroy":this.each(function(){n=e(this).data(i),n&&(n.destroy(),e(this).data(i,null))});break;default:this.each(function(){e(this).data(i)||e(this).data(i,new t(this,s))})}return this}}),t}),s("bizui",["require","ui/Button","ui/Input","ui/Textarea","ui/Textline","ui/Radio","ui/Checkbox","ui/Select","ui/Dialog","ui/Panel","ui/Tooltip","ui/Tab","ui/Page","ui/Tree","ui/Calendar","ui/Table","ui/TreeTable","ui/DropdownContext"],function(t){var i={};i.version="1.2.0";var s=window.bizui;return i.noConflict=function(){return window.bizui=s,this},e.extend(i,{Button:t("ui/Button"),Input:t("ui/Input"),Textarea:t("ui/Textarea"),Textline:t("ui/Textline"),Radio:t("ui/Radio"),Checkbox:t("ui/Checkbox"),Select:t("ui/Select"),Dialog:t("ui/Dialog"),Panel:t("ui/Panel"),Tooltip:t("ui/Tooltip"),Tab:t("ui/Tab"),Page:t("ui/Page"),Tree:t("ui/Tree"),Calendar:t("ui/Calendar"),Table:t("ui/Table"),TreeTable:t("ui/TreeTable"),DropdownContext:t("ui/DropdownContext")}),i}),i("bizui")});
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):this.bizui=e(jQuery)}(function(e){function t(e){var i=t.cache[e];if(!i){var s={};i=t.cache[e]={id:e,exports:s},t.modules[e].call(s,i,s)}return i.exports}var i;return t.cache=[],t.modules=[function(e,t){!function(s,a){"object"==typeof t?e.exports=a():"function"==typeof i&&i.amd?i([],a):s.Draggable=a()}(this,function(){"use strict";function e(e,t){var i=this,s=c.bind(i.start,i),a=c.bind(i.drag,i),r=c.bind(i.stop,i);if(!n(e))throw new TypeError("Draggable expects argument 0 to be an Element");t=c.assign({},l,t),c.assign(i,{element:e,handle:t.handle&&n(t.handle)?t.handle:e,handlers:{start:{mousedown:s,touchstart:s},move:{mousemove:a,mouseup:r,touchmove:a,touchend:r}},options:t}),i.initialize()}function t(e){return parseInt(e,10)}function i(e){return"currentStyle"in e?e.currentStyle:getComputedStyle(e)}function s(e){return e instanceof Array}function a(e){return void 0!==e&&null!==e}function n(e){return e instanceof Element||"undefined"!=typeof HTMLDocument&&e instanceof HTMLDocument}function r(e){return e instanceof Function}function o(){}var l={grid:0,filterTarget:null,limit:{x:null,y:null},threshold:0,setCursor:!1,setPosition:!0,smoothDrag:!0,useGPU:!0,onDrag:o,onDragStart:o,onDragEnd:o},d={transform:function(){for(var e=" -o- -ms- -moz- -webkit-".split(" "),t=document.body.style,i=e.length;i--;){var s=e[i]+"transform";if(s in t)return s}}()},c={assign:function(){for(var e=arguments[0],t=arguments.length,i=1;t>i;i++){var s=arguments[i];for(var a in s)e[a]=s[a]}return e},bind:function(e,t){return function(){e.apply(t,arguments)}},on:function(e,t,i){if(t&&i)c.addEvent(e,t,i);else if(t)for(var s in t)c.addEvent(e,s,t[s])},off:function(e,t,i){if(t&&i)c.removeEvent(e,t,i);else if(t)for(var s in t)c.removeEvent(e,s,t[s])},limit:function(e,t){return s(t)?(t=[+t[0],+t[1]],e<t[0]?e=t[0]:e>t[1]&&(e=t[1])):e=+t,e},addEvent:"attachEvent"in Element.prototype?function(e,t,i){e.attachEvent("on"+t,i)}:function(e,t,i){e.addEventListener(t,i,!1)},removeEvent:"attachEvent"in Element.prototype?function(e,t,i){e.detachEvent("on"+t,i)}:function(e,t,i){e.removeEventListener(t,i)}};return c.assign(e.prototype,{setOption:function(e,t){var i=this;return i.options[e]=t,i.initialize(),i},get:function(){var e=this.dragEvent;return{x:e.x,y:e.y}},set:function(e,t){var i=this,s=i.dragEvent;return s.original={x:s.x,y:s.y},i.move(e,t),i},dragEvent:{started:!1,x:0,y:0},initialize:function(){var e,t=this,s=t.element,a=(t.handle,s.style),n=i(s),r=t.options,o=d.transform,l=t._dimensions={height:s.offsetHeight,left:s.offsetLeft,top:s.offsetTop,width:s.offsetWidth};r.useGPU&&o&&(e=n[o],"none"===e&&(e=""),a[o]=e+" translate3d(0,0,0)"),r.setPosition&&(a.display="block",a.left=l.left+"px",a.top=l.top+"px",a.bottom=a.right="auto",a.margin=0,a.position="absolute"),r.setCursor&&(a.cursor="move"),t.setLimit(r.limit),c.assign(t.dragEvent,{x:l.left,y:l.top}),c.on(t.handle,t.handlers.start)},start:function(e){var t=this,i=t.getCursor(e),s=t.element;t.useTarget(e.target||e.srcElement)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,t.dragEvent.oldZindex=s.style.zIndex,s.style.zIndex=1e4,t.setCursor(i),t.setPosition(),t.setZoom(),c.on(document,t.handlers.move))},drag:function(e){var t=this,i=t.dragEvent,s=t.element,a=t._cursor,n=t._dimensions,r=t.options,o=n.zoom,l=t.getCursor(e),d=r.threshold,c=(l.x-a.x)/o+n.left,h=(l.y-a.y)/o+n.top;!i.started&&d&&Math.abs(a.x-l.x)<d&&Math.abs(a.y-l.y)<d||(i.original||(i.original={x:c,y:h}),i.started||(r.onDragStart(s,c,h,e),i.started=!0),t.move(c,h)&&r.onDrag(s,i.x,i.y,e))},move:function(e,t){var i=this,s=i.dragEvent,a=i.options,n=a.grid,r=i.element.style,o=i.limit(e,t,s.original.x,s.original.y);return!a.smoothDrag&&n&&(o=i.round(o,n)),(o.x!==s.x||o.y!==s.y)&&(s.x=o.x,s.y=o.y,r.left=o.x+"px",r.top=o.y+"px",!0)},stop:function(e){var t,i=this,s=i.dragEvent,a=i.element,n=i.options,r=n.grid;c.off(document,i.handlers.move),a.style.zIndex=s.oldZindex,n.smoothDrag&&r&&(t=i.round({x:s.x,y:s.y},r),i.move(t.x,t.y),c.assign(i.dragEvent,t)),i.dragEvent.started&&n.onDragEnd(a,s.x,s.y,e),i.reset()},reset:function(){this.dragEvent.started=!1},round:function(e){var t=this.options.grid;return{x:t*Math.round(e.x/t),y:t*Math.round(e.y/t)}},getCursor:function(e){return{x:(e.targetTouches?e.targetTouches[0]:e).clientX,y:(e.targetTouches?e.targetTouches[0]:e).clientY}},setCursor:function(e){this._cursor=e},setLimit:function(e){var t=this,i=function(e,t){return{x:e,y:t}};if(r(e))t.limit=e;else if(n(e)){var s=t._dimensions,o=e.scrollHeight-s.height,l=e.scrollWidth-s.width;t.limit=function(e,t){return{x:c.limit(e,[0,l]),y:c.limit(t,[0,o])}}}else if(e){var d={x:a(e.x),y:a(e.y)};t.limit=d.x||d.y?function(t,i){return{x:d.x?c.limit(t,e.x):t,y:d.y?c.limit(i,e.y):i}}:i}else t.limit=i},setPosition:function(){var e=this,i=e.element,s=i.style;c.assign(e._dimensions,{left:t(s.left)||i.offsetLeft,top:t(s.top)||i.offsetTop})},setZoom:function(){for(var e=this,t=e.element,s=1;t=t.offsetParent;){var a=i(t).zoom;if(a&&"normal"!==a){s=a;break}}e._dimensions.zoom=s},useTarget:function(e){var t=this.options.filterTarget;return!(t instanceof Function)||t(e)},destroy:function(){c.off(this.handle,this.handlers.start),c.off(document,this.handlers.move)}}),e})},function(e,t){!function(e){e.fn.datepicker.dates["zh-CN"]={days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],daysShort:["周日","周一","周二","周三","周四","周五","周六"],daysMin:["日","一","二","三","四","五","六"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],today:"今日",clear:"清除",format:"yyyy年mm月dd日",titleFormat:"yyyy年mm月",weekStart:1}}(jQuery)},function(e,s){!function(s){"function"==typeof i&&i.amd?i(["jquery"],s):s("object"==typeof e&&e.exports?t(3):jQuery)}(function(e){function t(t){var i={},s=/^jQuery\d+$/;return e.each(t.attributes,function(e,t){t.specified&&!s.test(t.name)&&(i[t.name]=t.value)}),i}function i(t,i){var s=this,n=e(this);if(s.value===n.attr(o?"placeholder-x":"placeholder")&&n.hasClass(f.customClass))if(s.value="",n.removeClass(f.customClass),n.data("placeholder-password")){if(n=n.hide().nextAll('input[type="password"]:first').show().attr("id",n.removeAttr("id").data("placeholder-id")),!0===t)return n[0].value=i,i;n.focus()}else s==a()&&s.select()}function s(s){var a,n=this,r=e(this),l=n.id;if(!s||"blur"!==s.type||!r.hasClass(f.customClass))if(""===n.value){if("password"===n.type){if(!r.data("placeholder-textinput")){try{a=r.clone().prop({type:"text"})}catch(i){a=e("<input>").attr(e.extend(t(this),{type:"text"}))}a.removeAttr("name").data({"placeholder-enabled":!0,"placeholder-password":r,"placeholder-id":l}).bind("focus.placeholder",i),r.data({"placeholder-textinput":a,"placeholder-id":l}).before(a)}n.value="",r=r.removeAttr("id").hide().prevAll('input[type="text"]:first').attr("id",r.data("placeholder-id")).show()}else{var d=r.data("placeholder-password");d&&(d[0].value="",r.attr("id",r.data("placeholder-id")).show().nextAll('input[type="password"]:last').hide().removeAttr("id"))}r.addClass(f.customClass),r[0].value=r.attr(o?"placeholder-x":"placeholder")}else r.removeClass(f.customClass)}function a(){try{return document.activeElement}catch(e){}}var n,r,o=!1,l="[object OperaMini]"===Object.prototype.toString.call(window.operamini),d="placeholder"in document.createElement("input")&&!l&&!o,c="placeholder"in document.createElement("textarea")&&!l&&!o,h=e.valHooks,u=e.propHooks,f={};d&&c?(r=e.fn.placeholder=function(){return this},r.input=!0,r.textarea=!0):(r=e.fn.placeholder=function(t){var a={customClass:"placeholder"};return f=e.extend({},a,t),this.filter((d?"textarea":":input")+"["+(o?"placeholder-x":"placeholder")+"]").not("."+f.customClass).not(":radio, :checkbox, [type=hidden]").bind({"focus.placeholder":i,"blur.placeholder":s}).data("placeholder-enabled",!0).trigger("blur.placeholder")},r.input=d,r.textarea=c,n={get:function(t){var i=e(t),s=i.data("placeholder-password");return s?s[0].value:i.data("placeholder-enabled")&&i.hasClass(f.customClass)?"":t.value},set:function(t,n){var r,o,l=e(t);return""!==n&&(r=l.data("placeholder-textinput"),o=l.data("placeholder-password"),r?(i.call(r[0],!0,n)||(t.value=n),r[0].value=n):o&&(i.call(t,!0,n)||(o[0].value=n),t.value=n)),l.data("placeholder-enabled")?(""===n?(t.value=n,t!=a()&&s.call(t)):(l.hasClass(f.customClass)&&i.call(t),t.value=n),l):(t.value=n,l)}},d||(h.input=n,u.value=n),c||(h.textarea=n,u.value=n),e(function(){e(document).delegate("form","submit.placeholder",function(){var t=e("."+f.customClass,this).each(function(){i.call(this,!0,"")});setTimeout(function(){t.each(s)},10)})}),e(window).bind("beforeunload.placeholder",function(){var t=!0;try{"javascript:void(0)"===document.activeElement.toString()&&(t=!1)}catch(e){}t&&e("."+f.customClass).each(function(){this.value=""})}))})},function(t,i){t.exports=e},function(e,s){!function(s){"use strict";"function"==typeof i&&i.amd?i(["jquery"],s):void 0!==e&&e.exports?e.exports=s(t(3)):s(jQuery)}(function(e,t){"use strict";if(!e.jstree){var i=0,s=!1,a=!1,n=!1,r=[],o=e("script:last").attr("src"),l=window.document;e.jstree={version:"3.3.4",defaults:{plugins:[]},plugins:{},path:o&&-1!==o.indexOf("/")?o.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%?`]/g,root:"#"},e.jstree.create=function(t,s){var a=new e.jstree.core(++i),n=s;return s=e.extend(!0,{},e.jstree.defaults,s),n&&n.plugins&&(s.plugins=n.plugins),e.each(s.plugins,function(e,t){"core"!==e&&(a=a.plugin(t,s[t]))}),e(t).data("jstree",a),a.init(t,s),a},e.jstree.destroy=function(){e(".jstree:jstree").jstree("destroy"),e(l).off(".jstree")},e.jstree.core=function(e){this._id=e,this._cnt=0,this._wrk=null,this._data={core:{themes:{name:!1,dots:!1,icons:!1,ellipsis:!1},selected:[],last_error:{},working:!1,worker_queue:[],focused:null}}},e.jstree.reference=function(t){var i=null,s=null;if(!t||!t.id||t.tagName&&t.nodeType||(t=t.id),!s||!s.length)try{s=e(t)}catch(e){}if(!s||!s.length)try{s=e("#"+t.replace(e.jstree.idregex,"\\$&"))}catch(e){}return s&&s.length&&(s=s.closest(".jstree")).length&&(s=s.data("jstree"))?i=s:e(".jstree").each(function(){var s=e(this).data("jstree");if(s&&s._model.data[t])return i=s,!1}),i},e.fn.jstree=function(i){var s="string"==typeof i,a=Array.prototype.slice.call(arguments,1),n=null;return!(!0===i&&!this.length)&&(this.each(function(){var r=e.jstree.reference(this),o=s&&r?r[i]:null;if(n=s&&o?o.apply(r,a):null,r||s||i!==t&&!e.isPlainObject(i)||e.jstree.create(this,i),(r&&!s||!0===i)&&(n=r||!1),null!==n&&n!==t)return!1}),null!==n&&n!==t?n:this)},e.expr.pseudos.jstree=e.expr.createPseudo(function(i){return function(i){return e(i).hasClass("jstree")&&e(i).data("jstree")!==t}}),e.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,error:e.noop,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,ellipsis:!1,stripes:!1,variant:!1,responsive:!1},expand_selected_onload:!0,worker:!0,force_text:!1,dblclick_toggle:!0},e.jstree.core.prototype={plugin:function(t,i){var s=e.jstree.plugins[t];return s?(this._data[t]={},s.prototype=this,new s(i,this)):this},init:function(t,i){this._model={data:{},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}},this._model.data[e.jstree.root]={id:e.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this.element=e(t).addClass("jstree jstree-"+this._id),this.settings=i,this._data.core.ready=!1,this._data.core.loaded=!1,this._data.core.rtl="rtl"===this.element.css("direction"),this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl"),this.element.attr("role","tree"),this.settings.core.multiple&&this.element.attr("aria-multiselectable",!0),this.element.attr("tabindex")||this.element.attr("tabindex","0"),this.bind(),this.trigger("init"),this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0),this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return 3===this.nodeType&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove(),this.element.html("<ul class='jstree-container-ul jstree-children' role='group'><li id='j"+this._id+"_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='tree-item'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading"),this._data.core.li_height=this.get_container_ul().children("li").first().outerHeight()||24,this._data.core.node=this._create_prototype_node(),this.trigger("loading"),this.load_node(e.jstree.root)},destroy:function(e){if(this.trigger("destroy"),this._wrk)try{window.URL.revokeObjectURL(this._wrk),this._wrk=null}catch(e){}e||this.element.empty(),this.teardown()},_create_prototype_node:function(){var e,t,i=l.createElement("LI");return i.setAttribute("role","treeitem"),e=l.createElement("I"),e.className="jstree-icon jstree-ocl",e.setAttribute("role","presentation"),i.appendChild(e),e=l.createElement("A"),e.className="jstree-anchor",e.setAttribute("href","#"),e.setAttribute("tabindex","-1"),t=l.createElement("I"),t.className="jstree-icon jstree-themeicon",t.setAttribute("role","presentation"),e.appendChild(t),i.appendChild(e),e=t=null,i},teardown:function(){this.unbind(),this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),this.element=null},bind:function(){var t="",i=null,s=0;this.element.on("dblclick.jstree",function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;if(l.selection&&l.selection.empty)l.selection.empty();else if(window.getSelection){var t=window.getSelection();try{t.removeAllRanges(),t.collapse()}catch(e){}}}).on("mousedown.jstree",e.proxy(function(e){e.target===this.element[0]&&(e.preventDefault(),s=+new Date)},this)).on("mousedown.jstree",".jstree-ocl",function(e){e.preventDefault()}).on("click.jstree",".jstree-ocl",e.proxy(function(e){this.toggle_node(e.target)},this)).on("dblclick.jstree",".jstree-anchor",e.proxy(function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;this.settings.core.dblclick_toggle&&this.toggle_node(e.target)},this)).on("click.jstree",".jstree-anchor",e.proxy(function(t){t.preventDefault(),t.currentTarget!==l.activeElement&&e(t.currentTarget).focus(),this.activate_node(t.currentTarget,t)},this)).on("keydown.jstree",".jstree-anchor",e.proxy(function(t){if(t.target.tagName&&"input"===t.target.tagName.toLowerCase())return!0;if(32!==t.which&&13!==t.which&&(t.shiftKey||t.ctrlKey||t.altKey||t.metaKey))return!0;var i=null;switch(this._data.core.rtl&&(37===t.which?t.which=39:39===t.which&&(t.which=37)),t.which){case 32:t.ctrlKey&&(t.type="click",e(t.currentTarget).trigger(t));break;case 13:t.type="click",e(t.currentTarget).trigger(t);break;case 37:t.preventDefault(),this.is_open(t.currentTarget)?this.close_node(t.currentTarget):(i=this.get_parent(t.currentTarget))&&i.id!==e.jstree.root&&this.get_node(i,!0).children(".jstree-anchor").focus();break;case 38:t.preventDefault(),i=this.get_prev_dom(t.currentTarget),i&&i.length&&i.children(".jstree-anchor").focus();break;case 39:t.preventDefault(),this.is_closed(t.currentTarget)?this.open_node(t.currentTarget,function(e){this.get_node(e,!0).children(".jstree-anchor").focus()}):this.is_open(t.currentTarget)&&(i=this.get_node(t.currentTarget,!0).children(".jstree-children")[0])&&e(this._firstChild(i)).children(".jstree-anchor").focus();break;case 40:t.preventDefault(),i=this.get_next_dom(t.currentTarget),i&&i.length&&i.children(".jstree-anchor").focus();break;case 106:this.open_all();break;case 36:t.preventDefault(),i=this._firstChild(this.get_container_ul()[0]),i&&e(i).children(".jstree-anchor").filter(":visible").focus();break;case 35:t.preventDefault(),this.element.find(".jstree-anchor").filter(":visible").last().focus();break;case 113:t.preventDefault(),this.edit(t.currentTarget)}},this)).on("load_node.jstree",e.proxy(function(t,i){i.status&&(i.node.id!==e.jstree.root||this._data.core.loaded||(this._data.core.loaded=!0,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.trigger("loaded")),this._data.core.ready||setTimeout(e.proxy(function(){if(this.element&&!this.get_container_ul().find(".jstree-loading").length){if(this._data.core.ready=!0,this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var t,i,s=[];for(t=0,i=this._data.core.selected.length;t<i;t++)s=s.concat(this._model.data[this._data.core.selected[t]].parents);for(s=e.vakata.array_unique(s),t=0,i=s.length;t<i;t++)this.open_node(s[t],!1,0)}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}this.trigger("ready")}},this),0))},this)).on("keypress.jstree",e.proxy(function(s){if(s.target.tagName&&"input"===s.target.tagName.toLowerCase())return!0;i&&clearTimeout(i),i=setTimeout(function(){t=""},500);var a=String.fromCharCode(s.which).toLowerCase(),n=this.element.find(".jstree-anchor").filter(":visible"),r=n.index(l.activeElement)||0,o=!1;if(t+=a,t.length>1){if(n.slice(r).each(e.proxy(function(i,s){if(0===e(s).text().toLowerCase().indexOf(t))return e(s).focus(),o=!0,!1},this)),o)return;if(n.slice(0,r).each(e.proxy(function(i,s){if(0===e(s).text().toLowerCase().indexOf(t))return e(s).focus(),o=!0,!1},this)),o)return}if(new RegExp("^"+a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+"+$").test(t)){if(n.slice(r+1).each(e.proxy(function(t,i){if(e(i).text().toLowerCase().charAt(0)===a)return e(i).focus(),o=!0,!1},this)),o)return;if(n.slice(0,r+1).each(e.proxy(function(t,i){if(e(i).text().toLowerCase().charAt(0)===a)return e(i).focus(),o=!0,!1},this)),o)return}},this)).on("init.jstree",e.proxy(function(){var e=this.settings.core.themes;this._data.core.themes.dots=e.dots,this._data.core.themes.stripes=e.stripes,this._data.core.themes.icons=e.icons,this._data.core.themes.ellipsis=e.ellipsis,this.set_theme(e.name||"default",e.url),this.set_theme_variant(e.variant)},this)).on("loading.jstree",e.proxy(function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"](),this[this._data.core.themes.icons?"show_icons":"hide_icons"](),this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"](),this[this._data.core.themes.ellipsis?"show_ellipsis":"hide_ellipsis"]()},this)).on("blur.jstree",".jstree-anchor",e.proxy(function(t){this._data.core.focused=null,e(t.currentTarget).filter(".jstree-hovered").mouseleave(),this.element.attr("tabindex","0")},this)).on("focus.jstree",".jstree-anchor",e.proxy(function(t){var i=this.get_node(t.currentTarget);i&&i.id&&(this._data.core.focused=i.id),this.element.find(".jstree-hovered").not(t.currentTarget).mouseleave(),e(t.currentTarget).mouseenter(),this.element.attr("tabindex","-1")},this)).on("focus.jstree",e.proxy(function(){if(+new Date-s>500&&!this._data.core.focused){s=0;var e=this.get_node(this.element.attr("aria-activedescendant"),!0);e&&e.find("> .jstree-anchor").focus()}},this)).on("mouseenter.jstree",".jstree-anchor",e.proxy(function(e){this.hover_node(e.currentTarget)},this)).on("mouseleave.jstree",".jstree-anchor",e.proxy(function(e){this.dehover_node(e.currentTarget)},this))},unbind:function(){this.element.off(".jstree"),e(l).off(".jstree-"+this._id)},trigger:function(e,t){t||(t={}),t.instance=this,this.element.triggerHandler(e.replace(".jstree","")+".jstree",t)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children").first()},get_string:function(t){var i=this.settings.core.strings;return e.isFunction(i)?i.call(this,t):i&&i[t]?i[t]:t},_firstChild:function(e){for(e=e?e.firstChild:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_nextSibling:function(e){for(e=e?e.nextSibling:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_previousSibling:function(e){for(e=e?e.previousSibling:null;null!==e&&1!==e.nodeType;)e=e.previousSibling;return e},get_node:function(t,i){t&&t.id&&(t=t.id);var s;try{if(this._model.data[t])t=this._model.data[t];else if("string"==typeof t&&this._model.data[t.replace(/^#/,"")])t=this._model.data[t.replace(/^#/,"")];else if("string"==typeof t&&(s=e("#"+t.replace(e.jstree.idregex,"\\$&"),this.element)).length&&this._model.data[s.closest(".jstree-node").attr("id")])t=this._model.data[s.closest(".jstree-node").attr("id")];else if((s=e(t,this.element)).length&&this._model.data[s.closest(".jstree-node").attr("id")])t=this._model.data[s.closest(".jstree-node").attr("id")];else{if(!(s=e(t,this.element)).length||!s.hasClass("jstree"))return!1;t=this._model.data[e.jstree.root]}return i&&(t=t.id===e.jstree.root?this.element:e("#"+t.id.replace(e.jstree.idregex,"\\$&"),this.element)),t}catch(e){return!1}},get_path:function(t,i,s){if(!(t=t.parents?t:this.get_node(t))||t.id===e.jstree.root||!t.parents)return!1;var a,n,r=[];for(r.push(s?t.id:t.text),a=0,n=t.parents.length;a<n;a++)r.push(s?t.parents[a]:this.get_text(t.parents[a]));return r=r.reverse().slice(1),i?r.join(i):r},get_next_dom:function(t,i){var s;if(t=this.get_node(t,!0),t[0]===this.element[0]){for(s=this._firstChild(this.get_container_ul()[0]);s&&0===s.offsetHeight;)s=this._nextSibling(s);return!!s&&e(s)}if(!t||!t.length)return!1;if(i){s=t[0];do{s=this._nextSibling(s)}while(s&&0===s.offsetHeight);return!!s&&e(s)}if(t.hasClass("jstree-open")){for(s=this._firstChild(t.children(".jstree-children")[0]);s&&0===s.offsetHeight;)s=this._nextSibling(s);if(null!==s)return e(s)}s=t[0];do{s=this._nextSibling(s)}while(s&&0===s.offsetHeight);return null!==s?e(s):t.parentsUntil(".jstree",".jstree-node").nextAll(".jstree-node:visible").first()},get_prev_dom:function(t,i){var s;if(t=this.get_node(t,!0),t[0]===this.element[0]){for(s=this.get_container_ul()[0].lastChild;s&&0===s.offsetHeight;)s=this._previousSibling(s);return!!s&&e(s)}if(!t||!t.length)return!1;if(i){s=t[0];do{s=this._previousSibling(s)}while(s&&0===s.offsetHeight);return!!s&&e(s)}s=t[0];do{s=this._previousSibling(s)}while(s&&0===s.offsetHeight);if(null!==s){for(t=e(s);t.hasClass("jstree-open");)t=t.children(".jstree-children").first().children(".jstree-node:visible:last");return t}return!(!(s=t[0].parentNode.parentNode)||!s.className||-1===s.className.indexOf("jstree-node"))&&e(s)},get_parent:function(t){return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.parent},get_children_dom:function(e){return e=this.get_node(e,!0),e[0]===this.element[0]?this.get_container_ul().children(".jstree-node"):!(!e||!e.length)&&e.children(".jstree-children").children(".jstree-node")},is_parent:function(e){return(e=this.get_node(e))&&(!1===e.state.loaded||e.children.length>0)},is_loaded:function(e){return(e=this.get_node(e))&&e.state.loaded},is_loading:function(e){return(e=this.get_node(e))&&e.state&&e.state.loading},is_open:function(e){return(e=this.get_node(e))&&e.state.opened},is_closed:function(e){return(e=this.get_node(e))&&this.is_parent(e)&&!e.state.opened},is_leaf:function(e){return!this.is_parent(e)},load_node:function(t,i){var s,a,n,r,o;if(e.isArray(t))return this._load_nodes(t.slice(),i),!0;if(!(t=this.get_node(t)))return i&&i.call(this,t,!1),!1;if(t.state.loaded){for(t.state.loaded=!1,n=0,r=t.parents.length;n<r;n++)this._model.data[t.parents[n]].children_d=e.vakata.array_filter(this._model.data[t.parents[n]].children_d,function(i){return-1===e.inArray(i,t.children_d)});for(s=0,a=t.children_d.length;s<a;s++)this._model.data[t.children_d[s]].state.selected&&(o=!0),delete this._model.data[t.children_d[s]];o&&(this._data.core.selected=e.vakata.array_filter(this._data.core.selected,function(i){return-1===e.inArray(i,t.children_d)})),t.children=[],t.children_d=[],o&&this.trigger("changed",{action:"load_node",node:t,selected:this._data.core.selected})}return t.state.failed=!1,t.state.loading=!0,this.get_node(t,!0).addClass("jstree-loading").attr("aria-busy",!0),this._load_node(t,e.proxy(function(e){t=this._model.data[t.id],t.state.loading=!1,t.state.loaded=e,t.state.failed=!t.state.loaded;var s=this.get_node(t,!0),a=0,n=0,r=this._model.data,o=!1;for(a=0,n=t.children.length;a<n;a++)if(r[t.children[a]]&&!r[t.children[a]].state.hidden){o=!0;break}t.state.loaded&&s&&s.length&&(s.removeClass("jstree-closed jstree-open jstree-leaf"),o?"#"!==t.id&&s.addClass(t.state.opened?"jstree-open":"jstree-closed"):s.addClass("jstree-leaf")),s.removeClass("jstree-loading").attr("aria-busy",!1),this.trigger("load_node",{node:t,status:e}),i&&i.call(this,t,e)},this)),!0},_load_nodes:function(e,t,i,s){var a,n,r=!0,o=function(){this._load_nodes(e,t,!0)},l=this._model.data,d=[];for(a=0,n=e.length;a<n;a++)l[e[a]]&&(!l[e[a]].state.loaded&&!l[e[a]].state.failed||!i&&s)&&(this.is_loading(e[a])||this.load_node(e[a],o),r=!1);if(r){for(a=0,n=e.length;a<n;a++)l[e[a]]&&l[e[a]].state.loaded&&d.push(e[a]);t&&!t.done&&(t.call(this,d),t.done=!0)}},load_all:function(t,i){if(t||(t=e.jstree.root),!(t=this.get_node(t)))return!1;var s,a,n=[],r=this._model.data,o=r[t.id].children_d;for(t.state&&!t.state.loaded&&n.push(t.id),s=0,a=o.length;s<a;s++)r[o[s]]&&r[o[s]].state&&!r[o[s]].state.loaded&&n.push(o[s]);n.length?this._load_nodes(n,function(){this.load_all(t,i)}):(i&&i.call(this,t),this.trigger("load_all",{node:t}))},_load_node:function(t,i){var s,a=this.settings.core.data,n=function(){return 3!==this.nodeType&&8!==this.nodeType};return a?e.isFunction(a)?a.call(this,t,e.proxy(function(s){!1===s?i.call(this,!1):this["string"==typeof s?"_append_html_data":"_append_json_data"](t,"string"==typeof s?e(e.parseHTML(s)).filter(n):s,function(e){i.call(this,e)})},this)):"object"==typeof a?a.url?(a=e.extend(!0,{},a),e.isFunction(a.url)&&(a.url=a.url.call(this,t)),e.isFunction(a.data)&&(a.data=a.data.call(this,t)),e.ajax(a).done(e.proxy(function(s,a,r){var o=r.getResponseHeader("Content-Type");return o&&-1!==o.indexOf("json")||"object"==typeof s?this._append_json_data(t,s,function(e){i.call(this,e)}):o&&-1!==o.indexOf("html")||"string"==typeof s?this._append_html_data(t,e(e.parseHTML(s)).filter(n),function(e){i.call(this,e)}):(this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:t.id,xhr:r})},this.settings.core.error.call(this,this._data.core.last_error),i.call(this,!1))},this)).fail(e.proxy(function(e){this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:t.id,xhr:e})},i.call(this,!1),this.settings.core.error.call(this,this._data.core.last_error)},this))):(s=e.isArray(a)?e.extend(!0,[],a):e.isPlainObject(a)?e.extend(!0,{},a):a,t.id===e.jstree.root?this._append_json_data(t,s,function(e){i.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:t.id})},this.settings.core.error.call(this,this._data.core.last_error),i.call(this,!1))):"string"==typeof a?t.id===e.jstree.root?this._append_html_data(t,e(e.parseHTML(a)).filter(n),function(e){i.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:t.id})},this.settings.core.error.call(this,this._data.core.last_error),i.call(this,!1)):i.call(this,!1):t.id===e.jstree.root?this._append_html_data(t,this._data.core.original_container_html.clone(!0),function(e){i.call(this,e)}):i.call(this,!1)},_node_changed:function(e){(e=this.get_node(e))&&this._model.changed.push(e.id)},_append_html_data:function(t,i,s){t=this.get_node(t),t.children=[],t.children_d=[];var a,n,r,o=i.is("ul")?i.children():i,l=t.id,d=[],c=[],h=this._model.data,u=h[l],f=this._data.core.selected.length;for(o.each(e.proxy(function(t,i){(a=this._parse_model_from_html(e(i),l,u.parents.concat()))&&(d.push(a),c.push(a),h[a].children_d.length&&(c=c.concat(h[a].children_d)))},this)),u.children=d,u.children_d=c,n=0,r=u.parents.length;n<r;n++)h[u.parents[n]].children_d=h[u.parents[n]].children_d.concat(c);this.trigger("model",{nodes:c,parent:l}),l!==e.jstree.root?(this._node_changed(l),this.redraw()):(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0)),this._data.core.selected.length!==f&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),s.call(this,!0)},_append_json_data:function(t,i,s,a){if(null!==this.element){t=this.get_node(t),t.children=[],t.children_d=[],i.d&&"string"==typeof(i=i.d)&&(i=JSON.parse(i)),e.isArray(i)||(i=[i]);var n=null,r={df:this._model.default_state,dat:i,par:t.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},o=function(e,t){e.data&&(e=e.data);var i,s,a,n,r=e.dat,o=e.par,l=[],d=[],c=[],h=e.df,u=e.t_id,f=e.t_cnt,p=e.m,_=p[o],g=e.sel,m=function(e,i,s){s=s?s.concat():[],i&&s.unshift(i);var a,n,r,o,l=e.id.toString(),d={id:l,text:e.text||"",icon:e.icon===t||e.icon,parent:i,parents:s,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(a in h)h.hasOwnProperty(a)&&(d.state[a]=h[a]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(d.icon=e.data.jstree.icon),d.icon!==t&&null!==d.icon&&""!==d.icon||(d.icon=!0),e&&e.data&&(d.data=e.data,e.data.jstree))for(a in e.data.jstree)e.data.jstree.hasOwnProperty(a)&&(d.state[a]=e.data.jstree[a]);if(e&&"object"==typeof e.state)for(a in e.state)e.state.hasOwnProperty(a)&&(d.state[a]=e.state[a]);if(e&&"object"==typeof e.li_attr)for(a in e.li_attr)e.li_attr.hasOwnProperty(a)&&(d.li_attr[a]=e.li_attr[a]);if(d.li_attr.id||(d.li_attr.id=l),e&&"object"==typeof e.a_attr)for(a in e.a_attr)e.a_attr.hasOwnProperty(a)&&(d.a_attr[a]=e.a_attr[a]);for(e&&e.children&&!0===e.children&&(d.state.loaded=!1,d.children=[],d.children_d=[]),p[d.id]=d,a=0,n=d.children.length;a<n;a++)r=m(p[d.children[a]],d.id,s),o=p[r],d.children_d.push(r),o.children_d.length&&(d.children_d=d.children_d.concat(o.children_d));return delete e.data,delete e.children,p[d.id].original=e,d.state.selected&&c.push(d.id),d.id},x=function(e,i,s){s=s?s.concat():[],i&&s.unshift(i);var a,n,r,o,l,d=!1;do{d="j"+u+"_"+ ++f}while(p[d]);l={id:!1,text:"string"==typeof e?e:"",icon:"object"!=typeof e||e.icon===t||e.icon,parent:i,parents:s,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(a in h)h.hasOwnProperty(a)&&(l.state[a]=h[a]);if(e&&e.id&&(l.id=e.id.toString()),e&&e.text&&(l.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(l.icon=e.data.jstree.icon),l.icon!==t&&null!==l.icon&&""!==l.icon||(l.icon=!0),e&&e.data&&(l.data=e.data,e.data.jstree))for(a in e.data.jstree)e.data.jstree.hasOwnProperty(a)&&(l.state[a]=e.data.jstree[a]);if(e&&"object"==typeof e.state)for(a in e.state)e.state.hasOwnProperty(a)&&(l.state[a]=e.state[a]);if(e&&"object"==typeof e.li_attr)for(a in e.li_attr)e.li_attr.hasOwnProperty(a)&&(l.li_attr[a]=e.li_attr[a]);if(l.li_attr.id&&!l.id&&(l.id=l.li_attr.id.toString()),l.id||(l.id=d),l.li_attr.id||(l.li_attr.id=l.id),e&&"object"==typeof e.a_attr)for(a in e.a_attr)e.a_attr.hasOwnProperty(a)&&(l.a_attr[a]=e.a_attr[a]);if(e&&e.children&&e.children.length){for(a=0,n=e.children.length;a<n;a++)r=x(e.children[a],l.id,s),o=p[r],l.children.push(r),o.children_d.length&&(l.children_d=l.children_d.concat(o.children_d));l.children_d=l.children_d.concat(l.children)}return e&&e.children&&!0===e.children&&(l.state.loaded=!1,l.children=[],l.children_d=[]),delete e.data,delete e.children,l.original=e,p[l.id]=l,l.state.selected&&c.push(l.id),l.id};if(r.length&&r[0].id!==t&&r[0].parent!==t){for(s=0,a=r.length;s<a;s++)r[s].children||(r[s].children=[]),p[r[s].id.toString()]=r[s];for(s=0,a=r.length;s<a;s++)p[r[s].parent.toString()].children.push(r[s].id.toString()),_.children_d.push(r[s].id.toString());for(s=0,
a=_.children.length;s<a;s++)i=m(p[_.children[s]],o,_.parents.concat()),d.push(i),p[i].children_d.length&&(d=d.concat(p[i].children_d));for(s=0,a=_.parents.length;s<a;s++)p[_.parents[s]].children_d=p[_.parents[s]].children_d.concat(d);n={cnt:f,mod:p,sel:g,par:o,dpc:d,add:c}}else{for(s=0,a=r.length;s<a;s++)(i=x(r[s],o,_.parents.concat()))&&(l.push(i),d.push(i),p[i].children_d.length&&(d=d.concat(p[i].children_d)));for(_.children=l,_.children_d=d,s=0,a=_.parents.length;s<a;s++)p[_.parents[s]].children_d=p[_.parents[s]].children_d.concat(d);n={cnt:f,mod:p,sel:g,par:o,dpc:d,add:c}}if("undefined"!=typeof window&&void 0!==window.document)return n;postMessage(n)},l=function(t,i){if(null!==this.element){this._cnt=t.cnt;var a,n=this._model.data;for(a in n)n.hasOwnProperty(a)&&n[a].state&&n[a].state.loading&&t.mod[a]&&(t.mod[a].state.loading=!0);if(this._model.data=t.mod,i){var r,o=t.add,l=t.sel,d=this._data.core.selected.slice();if(n=this._model.data,l.length!==d.length||e.vakata.array_unique(l.concat(d)).length!==l.length){for(a=0,r=l.length;a<r;a++)-1===e.inArray(l[a],o)&&-1===e.inArray(l[a],d)&&(n[l[a]].state.selected=!1);for(a=0,r=d.length;a<r;a++)-1===e.inArray(d[a],l)&&(n[d[a]].state.selected=!0)}}t.add.length&&(this._data.core.selected=this._data.core.selected.concat(t.add)),this.trigger("model",{nodes:t.dpc,parent:t.par}),t.par!==e.jstree.root?(this._node_changed(t.par),this.redraw()):this.redraw(!0),t.add.length&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),s.call(this,!0)}};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker)try{null===this._wrk&&(this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+o.toString()],{type:"text/javascript"}))),!this._data.core.working||a?(this._data.core.working=!0,n=new window.Worker(this._wrk),n.onmessage=e.proxy(function(e){l.call(this,e.data,!0);try{n.terminate(),n=null}catch(e){}this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1},this),r.par?n.postMessage(r):this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1):this._data.core.worker_queue.push([t,i,s,!0])}catch(e){l.call(this,o(r),!1),this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}else l.call(this,o(r),!1)}},_parse_model_from_html:function(i,s,a){a=a?[].concat(a):[],s&&a.unshift(s);var n,r,o,l,d,c=this._model.data,h={id:!1,text:!1,icon:!0,parent:s,parents:a,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(o in this._model.default_state)this._model.default_state.hasOwnProperty(o)&&(h.state[o]=this._model.default_state[o]);if(l=e.vakata.attributes(i,!0),e.each(l,function(t,i){if(i=e.trim(i),!i.length)return!0;h.li_attr[t]=i,"id"===t&&(h.id=i.toString())}),l=i.children("a").first(),l.length&&(l=e.vakata.attributes(l,!0),e.each(l,function(t,i){i=e.trim(i),i.length&&(h.a_attr[t]=i)})),l=i.children("a").first().length?i.children("a").first().clone():i.clone(),l.children("ins, i, ul").remove(),l=l.html(),l=e("<div />").html(l),h.text=this.settings.core.force_text?l.text():l.html(),l=i.data(),h.data=l?e.extend(!0,{},l):null,h.state.opened=i.hasClass("jstree-open"),h.state.selected=i.children("a").hasClass("jstree-clicked"),h.state.disabled=i.children("a").hasClass("jstree-disabled"),h.data&&h.data.jstree)for(o in h.data.jstree)h.data.jstree.hasOwnProperty(o)&&(h.state[o]=h.data.jstree[o]);l=i.children("a").children(".jstree-themeicon"),l.length&&(h.icon=!l.hasClass("jstree-themeicon-hidden")&&l.attr("rel")),h.state.icon!==t&&(h.icon=h.state.icon),h.icon!==t&&null!==h.icon&&""!==h.icon||(h.icon=!0),l=i.children("ul").children("li");do{d="j"+this._id+"_"+ ++this._cnt}while(c[d]);return h.id=h.li_attr.id?h.li_attr.id.toString():d,l.length?(l.each(e.proxy(function(t,i){n=this._parse_model_from_html(e(i),h.id,a),r=this._model.data[n],h.children.push(n),r.children_d.length&&(h.children_d=h.children_d.concat(r.children_d))},this)),h.children_d=h.children_d.concat(h.children)):i.hasClass("jstree-closed")&&(h.state.loaded=!1),h.li_attr.class&&(h.li_attr.class=h.li_attr.class.replace("jstree-closed","").replace("jstree-open","")),h.a_attr.class&&(h.a_attr.class=h.a_attr.class.replace("jstree-clicked","").replace("jstree-disabled","")),c[h.id]=h,h.state.selected&&this._data.core.selected.push(h.id),h.id},_parse_model_from_flat_json:function(e,i,s){s=s?s.concat():[],i&&s.unshift(i);var a,n,r,o,l=e.id.toString(),d=this._model.data,c=this._model.default_state,h={id:l,text:e.text||"",icon:e.icon===t||e.icon,parent:i,parents:s,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(a in c)c.hasOwnProperty(a)&&(h.state[a]=c[a]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(h.icon=e.data.jstree.icon),h.icon!==t&&null!==h.icon&&""!==h.icon||(h.icon=!0),e&&e.data&&(h.data=e.data,e.data.jstree))for(a in e.data.jstree)e.data.jstree.hasOwnProperty(a)&&(h.state[a]=e.data.jstree[a]);if(e&&"object"==typeof e.state)for(a in e.state)e.state.hasOwnProperty(a)&&(h.state[a]=e.state[a]);if(e&&"object"==typeof e.li_attr)for(a in e.li_attr)e.li_attr.hasOwnProperty(a)&&(h.li_attr[a]=e.li_attr[a]);if(h.li_attr.id||(h.li_attr.id=l),e&&"object"==typeof e.a_attr)for(a in e.a_attr)e.a_attr.hasOwnProperty(a)&&(h.a_attr[a]=e.a_attr[a]);for(e&&e.children&&!0===e.children&&(h.state.loaded=!1,h.children=[],h.children_d=[]),d[h.id]=h,a=0,n=h.children.length;a<n;a++)r=this._parse_model_from_flat_json(d[h.children[a]],h.id,s),o=d[r],h.children_d.push(r),o.children_d.length&&(h.children_d=h.children_d.concat(o.children_d));return delete e.data,delete e.children,d[h.id].original=e,h.state.selected&&this._data.core.selected.push(h.id),h.id},_parse_model_from_json:function(e,i,s){s=s?s.concat():[],i&&s.unshift(i);var a,n,r,o,l,d=!1,c=this._model.data,h=this._model.default_state;do{d="j"+this._id+"_"+ ++this._cnt}while(c[d]);l={id:!1,text:"string"==typeof e?e:"",icon:"object"!=typeof e||e.icon===t||e.icon,parent:i,parents:s,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(a in h)h.hasOwnProperty(a)&&(l.state[a]=h[a]);if(e&&e.id&&(l.id=e.id.toString()),e&&e.text&&(l.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(l.icon=e.data.jstree.icon),l.icon!==t&&null!==l.icon&&""!==l.icon||(l.icon=!0),e&&e.data&&(l.data=e.data,e.data.jstree))for(a in e.data.jstree)e.data.jstree.hasOwnProperty(a)&&(l.state[a]=e.data.jstree[a]);if(e&&"object"==typeof e.state)for(a in e.state)e.state.hasOwnProperty(a)&&(l.state[a]=e.state[a]);if(e&&"object"==typeof e.li_attr)for(a in e.li_attr)e.li_attr.hasOwnProperty(a)&&(l.li_attr[a]=e.li_attr[a]);if(l.li_attr.id&&!l.id&&(l.id=l.li_attr.id.toString()),l.id||(l.id=d),l.li_attr.id||(l.li_attr.id=l.id),e&&"object"==typeof e.a_attr)for(a in e.a_attr)e.a_attr.hasOwnProperty(a)&&(l.a_attr[a]=e.a_attr[a]);if(e&&e.children&&e.children.length){for(a=0,n=e.children.length;a<n;a++)r=this._parse_model_from_json(e.children[a],l.id,s),o=c[r],l.children.push(r),o.children_d.length&&(l.children_d=l.children_d.concat(o.children_d));l.children_d=l.children_d.concat(l.children)}return e&&e.children&&!0===e.children&&(l.state.loaded=!1,l.children=[],l.children_d=[]),delete e.data,delete e.children,l.original=e,c[l.id]=l,l.state.selected&&this._data.core.selected.push(l.id),l.id},_redraw:function(){var t,i,s,a=this._model.force_full_redraw?this._model.data[e.jstree.root].children.concat([]):this._model.changed.concat([]),n=l.createElement("UL"),r=this._data.core.focused;for(i=0,s=a.length;i<s;i++)(t=this.redraw_node(a[i],!0,this._model.force_full_redraw))&&this._model.force_full_redraw&&n.appendChild(t);this._model.force_full_redraw&&(n.className=this.get_container_ul()[0].className,n.setAttribute("role","group"),this.element.empty().append(n)),null!==r&&(t=this.get_node(r,!0),t&&t.length&&t.children(".jstree-anchor")[0]!==l.activeElement?t.children(".jstree-anchor").focus():this._data.core.focused=null),this._model.force_full_redraw=!1,this._model.changed=[],this.trigger("redraw",{nodes:a})},redraw:function(e){e&&(this._model.force_full_redraw=!0),this._redraw()},draw_children:function(t){var i=this.get_node(t),s=!1,a=!1,n=!1,r=l;if(!i)return!1;if(i.id===e.jstree.root)return this.redraw(!0);if(!(t=this.get_node(t,!0))||!t.length)return!1;if(t.children(".jstree-children").remove(),t=t[0],i.children.length&&i.state.loaded){for(n=r.createElement("UL"),n.setAttribute("role","group"),n.className="jstree-children",s=0,a=i.children.length;s<a;s++)n.appendChild(this.redraw_node(i.children[s],!0,!0));t.appendChild(n)}},redraw_node:function(t,i,s,a){var n=this.get_node(t),r=!1,o=!1,d=!1,c=!1,h=!1,u=!1,f="",p=l,_=this._model.data,g=!1,m=null,x=0,b=0,v=!1,y=!1;if(!n)return!1;if(n.id===e.jstree.root)return this.redraw(!0);if(i=i||0===n.children.length,t=l.querySelector?this.element[0].querySelector("#"+(-1!=="0123456789".indexOf(n.id[0])?"\\3"+n.id[0]+" "+n.id.substr(1).replace(e.jstree.idregex,"\\$&"):n.id.replace(e.jstree.idregex,"\\$&"))):l.getElementById(n.id))t=e(t),s||(r=t.parent().parent()[0],r===this.element[0]&&(r=null),o=t.index()),i||!n.children.length||t.children(".jstree-children").length||(i=!0),i||(d=t.children(".jstree-children")[0]),g=t.children(".jstree-anchor")[0]===l.activeElement,t.remove();else if(i=!0,!s){if(!(null===(r=n.parent!==e.jstree.root?e("#"+n.parent.replace(e.jstree.idregex,"\\$&"),this.element)[0]:null)||r&&_[n.parent].state.opened))return!1;o=e.inArray(n.id,null===r?_[e.jstree.root].children:_[n.parent].children)}t=this._data.core.node.cloneNode(!0),f="jstree-node ";for(c in n.li_attr)if(n.li_attr.hasOwnProperty(c)){if("id"===c)continue;"class"!==c?t.setAttribute(c,n.li_attr[c]):f+=n.li_attr[c]}for(n.a_attr.id||(n.a_attr.id=n.id+"_anchor"),t.setAttribute("aria-selected",!!n.state.selected),t.setAttribute("aria-level",n.parents.length),t.setAttribute("aria-labelledby",n.a_attr.id),n.state.disabled&&t.setAttribute("aria-disabled",!0),c=0,h=n.children.length;c<h;c++)if(!_[n.children[c]].state.hidden){v=!0;break}if(null!==n.parent&&_[n.parent]&&!n.state.hidden&&(c=e.inArray(n.id,_[n.parent].children),y=n.id,-1!==c))for(c++,h=_[n.parent].children.length;c<h&&(_[_[n.parent].children[c]].state.hidden||(y=_[n.parent].children[c]),y===n.id);c++);n.state.hidden&&(f+=" jstree-hidden"),n.state.loaded&&!v?f+=" jstree-leaf":(f+=n.state.opened&&n.state.loaded?" jstree-open":" jstree-closed",t.setAttribute("aria-expanded",n.state.opened&&n.state.loaded)),y===n.id&&(f+=" jstree-last"),t.id=n.id,t.className=f,f=(n.state.selected?" jstree-clicked":"")+(n.state.disabled?" jstree-disabled":"");for(h in n.a_attr)if(n.a_attr.hasOwnProperty(h)){if("href"===h&&"#"===n.a_attr[h])continue;"class"!==h?t.childNodes[1].setAttribute(h,n.a_attr[h]):f+=" "+n.a_attr[h]}if(f.length&&(t.childNodes[1].className="jstree-anchor "+f),(n.icon&&!0!==n.icon||!1===n.icon)&&(!1===n.icon?t.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":-1===n.icon.indexOf("/")&&-1===n.icon.indexOf(".")?t.childNodes[1].childNodes[0].className+=" "+n.icon+" jstree-themeicon-custom":(t.childNodes[1].childNodes[0].style.backgroundImage='url("'+n.icon+'")',t.childNodes[1].childNodes[0].style.backgroundPosition="center center",t.childNodes[1].childNodes[0].style.backgroundSize="auto",t.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom")),this.settings.core.force_text?t.childNodes[1].appendChild(p.createTextNode(n.text)):t.childNodes[1].innerHTML+=n.text,i&&n.children.length&&(n.state.opened||a)&&n.state.loaded){for(u=p.createElement("UL"),u.setAttribute("role","group"),u.className="jstree-children",c=0,h=n.children.length;c<h;c++)u.appendChild(this.redraw_node(n.children[c],i,!0));t.appendChild(u)}if(d&&t.appendChild(d),!s){for(r||(r=this.element[0]),c=0,h=r.childNodes.length;c<h;c++)if(r.childNodes[c]&&r.childNodes[c].className&&-1!==r.childNodes[c].className.indexOf("jstree-children")){m=r.childNodes[c];break}m||(m=p.createElement("UL"),m.setAttribute("role","group"),m.className="jstree-children",r.appendChild(m)),r=m,o<r.childNodes.length?r.insertBefore(t,r.childNodes[o]):r.appendChild(t),g&&(x=this.element[0].scrollTop,b=this.element[0].scrollLeft,t.childNodes[1].focus(),this.element[0].scrollTop=x,this.element[0].scrollLeft=b)}return n.state.opened&&!n.state.loaded&&(n.state.opened=!1,setTimeout(e.proxy(function(){this.open_node(n.id,!1,0)},this),0)),t},open_node:function(i,s,a){var n,r,o,l;if(e.isArray(i)){for(i=i.slice(),n=0,r=i.length;n<r;n++)this.open_node(i[n],s,a);return!0}return!(!(i=this.get_node(i))||i.id===e.jstree.root)&&(a=a===t?this.settings.core.animation:a,this.is_closed(i)?this.is_loaded(i)?(o=this.get_node(i,!0),l=this,o.length&&(a&&o.children(".jstree-children").length&&o.children(".jstree-children").stop(!0,!0),i.children.length&&!this._firstChild(o.children(".jstree-children")[0])&&this.draw_children(i),a?(this.trigger("before_open",{node:i}),o.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",!0).children(".jstree-children").stop(!0,!0).slideDown(a,function(){this.style.display="",l.element&&l.trigger("after_open",{node:i})})):(this.trigger("before_open",{node:i}),o[0].className=o[0].className.replace("jstree-closed","jstree-open"),o[0].setAttribute("aria-expanded",!0))),i.state.opened=!0,s&&s.call(this,i,!0),o.length||this.trigger("before_open",{node:i}),this.trigger("open_node",{node:i}),a&&o.length||this.trigger("after_open",{node:i}),!0):this.is_loading(i)?setTimeout(e.proxy(function(){this.open_node(i,s,a)},this),500):void this.load_node(i,function(e,t){return t?this.open_node(e,s,a):!!s&&s.call(this,e,!1)}):(s&&s.call(this,i,!1),!1))},_open_to:function(t){if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;var i,s,a=t.parents;for(i=0,s=a.length;i<s;i+=1)i!==e.jstree.root&&this.open_node(a[i],!1,0);return e("#"+t.id.replace(e.jstree.idregex,"\\$&"),this.element)},close_node:function(i,s){var a,n,r,o;if(e.isArray(i)){for(i=i.slice(),a=0,n=i.length;a<n;a++)this.close_node(i[a],s);return!0}return!(!(i=this.get_node(i))||i.id===e.jstree.root)&&(!this.is_closed(i)&&(s=s===t?this.settings.core.animation:s,r=this,o=this.get_node(i,!0),i.state.opened=!1,this.trigger("close_node",{node:i}),void(o.length?s?o.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",!1).children(".jstree-children").stop(!0,!0).slideUp(s,function(){this.style.display="",o.children(".jstree-children").remove(),r.element&&r.trigger("after_close",{node:i})}):(o[0].className=o[0].className.replace("jstree-open","jstree-closed"),o.attr("aria-expanded",!1).children(".jstree-children").remove(),this.trigger("after_close",{node:i})):this.trigger("after_close",{node:i}))))},toggle_node:function(t){var i,s;if(e.isArray(t)){for(t=t.slice(),i=0,s=t.length;i<s;i++)this.toggle_node(t[i]);return!0}return this.is_closed(t)?this.open_node(t):this.is_open(t)?this.close_node(t):void 0},open_all:function(t,i,s){if(t||(t=e.jstree.root),!(t=this.get_node(t)))return!1;var a,n,r,o=t.id===e.jstree.root?this.get_container_ul():this.get_node(t,!0);if(!o.length){for(a=0,n=t.children_d.length;a<n;a++)this.is_closed(this._model.data[t.children_d[a]])&&(this._model.data[t.children_d[a]].state.opened=!0);return this.trigger("open_all",{node:t})}s=s||o,r=this,o=this.is_closed(t)?o.find(".jstree-closed").addBack():o.find(".jstree-closed"),o.each(function(){r.open_node(this,function(e,t){t&&this.is_parent(e)&&this.open_all(e,i,s)},i||0)}),0===s.find(".jstree-closed").length&&this.trigger("open_all",{node:this.get_node(s)})},close_all:function(t,i){if(t||(t=e.jstree.root),!(t=this.get_node(t)))return!1;var s,a,n=t.id===e.jstree.root?this.get_container_ul():this.get_node(t,!0),r=this;for(n.length&&(n=this.is_open(t)?n.find(".jstree-open").addBack():n.find(".jstree-open"),e(n.get().reverse()).each(function(){r.close_node(this,i||0)})),s=0,a=t.children_d.length;s<a;s++)this._model.data[t.children_d[s]].state.opened=!1;this.trigger("close_all",{node:t})},is_disabled:function(e){return(e=this.get_node(e))&&e.state&&e.state.disabled},enable_node:function(t){var i,s;if(e.isArray(t)){for(t=t.slice(),i=0,s=t.length;i<s;i++)this.enable_node(t[i]);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;t.state.disabled=!1,this.get_node(t,!0).children(".jstree-anchor").removeClass("jstree-disabled").attr("aria-disabled",!1),this.trigger("enable_node",{node:t})},disable_node:function(t){var i,s;if(e.isArray(t)){for(t=t.slice(),i=0,s=t.length;i<s;i++)this.disable_node(t[i]);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;t.state.disabled=!0,this.get_node(t,!0).children(".jstree-anchor").addClass("jstree-disabled").attr("aria-disabled",!0),this.trigger("disable_node",{node:t})},is_hidden:function(e){return e=this.get_node(e),!0===e.state.hidden},hide_node:function(t,i){var s,a;if(e.isArray(t)){for(t=t.slice(),s=0,a=t.length;s<a;s++)this.hide_node(t[s],!0);return i||this.redraw(),!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;t.state.hidden||(t.state.hidden=!0,this._node_changed(t.parent),i||this.redraw(),this.trigger("hide_node",{node:t}))},show_node:function(t,i){var s,a;if(e.isArray(t)){for(t=t.slice(),s=0,a=t.length;s<a;s++)this.show_node(t[s],!0);return i||this.redraw(),!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;t.state.hidden&&(t.state.hidden=!1,this._node_changed(t.parent),i||this.redraw(),this.trigger("show_node",{node:t}))},hide_all:function(t){var i,s=this._model.data,a=[];for(i in s)s.hasOwnProperty(i)&&i!==e.jstree.root&&!s[i].state.hidden&&(s[i].state.hidden=!0,a.push(i));return this._model.force_full_redraw=!0,t||this.redraw(),this.trigger("hide_all",{nodes:a}),a},show_all:function(t){var i,s=this._model.data,a=[];for(i in s)s.hasOwnProperty(i)&&i!==e.jstree.root&&s[i].state.hidden&&(s[i].state.hidden=!1,a.push(i));return this._model.force_full_redraw=!0,t||this.redraw(),this.trigger("show_all",{nodes:a}),a},activate_node:function(e,i){if(this.is_disabled(e))return!1;if(i&&"object"==typeof i||(i={}),this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==t?this.get_node(this._data.core.last_clicked.id):null,this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected&&(this._data.core.last_clicked=null),!this._data.core.last_clicked&&this._data.core.selected.length&&(this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])),this.settings.core.multiple&&(i.metaKey||i.ctrlKey||i.shiftKey)&&(!i.shiftKey||this._data.core.last_clicked&&this.get_parent(e)&&this.get_parent(e)===this._data.core.last_clicked.parent))if(i.shiftKey){var s,a,n=this.get_node(e).id,r=this._data.core.last_clicked.id,o=this.get_node(this._data.core.last_clicked.parent).children,l=!1;for(s=0,a=o.length;s<a;s+=1)o[s]===n&&(l=!l),o[s]===r&&(l=!l),this.is_disabled(o[s])||!l&&o[s]!==n&&o[s]!==r?this.deselect_node(o[s],!0,i):this.is_hidden(o[s])||this.select_node(o[s],!0,!1,i);this.trigger("changed",{action:"select_node",node:this.get_node(e),selected:this._data.core.selected,event:i})}else this.is_selected(e)?this.deselect_node(e,!1,i):this.select_node(e,!1,!1,i);else!this.settings.core.multiple&&(i.metaKey||i.ctrlKey||i.shiftKey)&&this.is_selected(e)?this.deselect_node(e,!1,i):(this.deselect_all(!0),this.select_node(e,!1,!1,i),this._data.core.last_clicked=this.get_node(e));this.trigger("activate_node",{node:this.get_node(e),event:i})},hover_node:function(e){if(!(e=this.get_node(e,!0))||!e.length||e.children(".jstree-hovered").length)return!1;var t=this.element.find(".jstree-hovered"),i=this.element;t&&t.length&&this.dehover_node(t),e.children(".jstree-anchor").addClass("jstree-hovered"),this.trigger("hover_node",{node:this.get_node(e)}),setTimeout(function(){i.attr("aria-activedescendant",e[0].id)},0)},dehover_node:function(e){if(!(e=this.get_node(e,!0))||!e.length||!e.children(".jstree-hovered").length)return!1;e.children(".jstree-anchor").removeClass("jstree-hovered"),this.trigger("dehover_node",{node:this.get_node(e)})},select_node:function(t,i,s,a){var n,r,o;if(e.isArray(t)){for(t=t.slice(),r=0,o=t.length;r<o;r++)this.select_node(t[r],i,s,a);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;n=this.get_node(t,!0),t.state.selected||(t.state.selected=!0,this._data.core.selected.push(t.id),s||(n=this._open_to(t)),n&&n.length&&n.attr("aria-selected",!0).children(".jstree-anchor").addClass("jstree-clicked"),this.trigger("select_node",{node:t,selected:this._data.core.selected,event:a}),i||this.trigger("changed",{action:"select_node",node:t,selected:this._data.core.selected,event:a}))},deselect_node:function(t,i,s){var a,n,r;if(e.isArray(t)){for(t=t.slice(),a=0,n=t.length;a<n;a++)this.deselect_node(t[a],i,s);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;r=this.get_node(t,!0),t.state.selected&&(t.state.selected=!1,this._data.core.selected=e.vakata.array_remove_item(this._data.core.selected,t.id),r.length&&r.attr("aria-selected",!1).children(".jstree-anchor").removeClass("jstree-clicked"),this.trigger("deselect_node",{node:t,selected:this._data.core.selected,event:s}),i||this.trigger("changed",{action:"deselect_node",node:t,selected:this._data.core.selected,event:s}))},select_all:function(t){var i,s,a=this._data.core.selected.concat([]);for(this._data.core.selected=this._model.data[e.jstree.root].children_d.concat(),i=0,s=this._data.core.selected.length;i<s;i++)this._model.data[this._data.core.selected[i]]&&(this._model.data[this._data.core.selected[i]].state.selected=!0);this.redraw(!0),this.trigger("select_all",{selected:this._data.core.selected}),t||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:a})},deselect_all:function(e){var t,i,s=this._data.core.selected.concat([]);for(t=0,i=this._data.core.selected.length;t<i;t++)this._model.data[this._data.core.selected[t]]&&(this._model.data[this._data.core.selected[t]].state.selected=!1);this._data.core.selected=[],this.element.find(".jstree-clicked").removeClass("jstree-clicked").parent().attr("aria-selected",!1),this.trigger("deselect_all",{selected:this._data.core.selected,node:s}),e||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:s})},is_selected:function(t){return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.state.selected},get_selected:function(t){return t?e.map(this._data.core.selected,e.proxy(function(e){return this.get_node(e)},this)):this._data.core.selected.slice()},get_top_selected:function(t){var i,s,a,n,r=this.get_selected(!0),o={};for(i=0,s=r.length;i<s;i++)o[r[i].id]=r[i];for(i=0,s=r.length;i<s;i++)for(a=0,n=r[i].children_d.length;a<n;a++)o[r[i].children_d[a]]&&delete o[r[i].children_d[a]];r=[];for(i in o)o.hasOwnProperty(i)&&r.push(i);return t?e.map(r,e.proxy(function(e){return this.get_node(e)},this)):r},get_bottom_selected:function(t){var i,s,a=this.get_selected(!0),n=[];for(i=0,s=a.length;i<s;i++)a[i].children.length||n.push(a[i].id);return t?e.map(n,e.proxy(function(e){return this.get_node(e)},this)):n},get_state:function(){var t,i={core:{open:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},selected:[]}};for(t in this._model.data)this._model.data.hasOwnProperty(t)&&t!==e.jstree.root&&(this._model.data[t].state.opened&&i.core.open.push(t),this._model.data[t].state.selected&&i.core.selected.push(t));return i},set_state:function(i,s){if(i){if(i.core&&i.core.selected&&i.core.initial_selection===t&&(i.core.initial_selection=this._data.core.selected.concat([]).sort().join(",")),i.core){var a,n;if(i.core.open)return e.isArray(i.core.open)&&i.core.open.length?this._load_nodes(i.core.open,function(e){this.open_node(e,!1,0),delete i.core.open,this.set_state(i,s)}):(delete i.core.open,this.set_state(i,s)),!1;if(i.core.scroll)return i.core.scroll&&i.core.scroll.left!==t&&this.element.scrollLeft(i.core.scroll.left),i.core.scroll&&i.core.scroll.top!==t&&this.element.scrollTop(i.core.scroll.top),delete i.core.scroll,this.set_state(i,s),!1;if(i.core.selected)return a=this,i.core.initial_selection!==t&&i.core.initial_selection!==this._data.core.selected.concat([]).sort().join(",")||(this.deselect_all(),e.each(i.core.selected,function(e,t){a.select_node(t,!1,!0)})),delete i.core.initial_selection,delete i.core.selected,this.set_state(i,s),!1;for(n in i)i.hasOwnProperty(n)&&"core"!==n&&-1===e.inArray(n,this.settings.plugins)&&delete i[n];if(e.isEmptyObject(i.core))return delete i.core,this.set_state(i,s),!1}return!e.isEmptyObject(i)||(i=null,s&&s.call(this),this.trigger("set_state"),!1)}return!1},refresh:function(t,i){this._data.core.state=!0===i?{}:this.get_state(),i&&e.isFunction(i)&&(this._data.core.state=i.call(this,this._data.core.state)),this._cnt=0,this._model.data={},this._model.data[e.jstree.root]={id:e.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this._data.core.selected=[],this._data.core.last_clicked=null,this._data.core.focused=null;var s=this.get_container_ul()[0].className;t||(this.element.html("<ul class='"+s+"' role='group'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='treeitem' id='j"+this._id+"_loading'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading")),this.load_node(e.jstree.root,function(t,i){i&&(this.get_container_ul()[0].className=s,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.set_state(e.extend(!0,{},this._data.core.state),function(){this.trigger("refresh")})),this._data.core.state=null})},refresh_node:function(t){if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;var i=[],s=[],a=this._data.core.selected.concat([]);s.push(t.id),!0===t.state.opened&&i.push(t.id),this.get_node(t,!0).find(".jstree-open").each(function(){s.push(this.id),i.push(this.id)}),this._load_nodes(s,e.proxy(function(e){this.open_node(i,!1,0),this.select_node(a),this.trigger("refresh_node",{node:t,nodes:e})},this),!1,!0)},set_id:function(t,i){if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;var s,a,n=this._model.data,r=t.id;for(i=i.toString(),n[t.parent].children[e.inArray(t.id,n[t.parent].children)]=i,s=0,a=t.parents.length;s<a;s++)n[t.parents[s]].children_d[e.inArray(t.id,n[t.parents[s]].children_d)]=i;for(s=0,a=t.children.length;s<a;s++)n[t.children[s]].parent=i;for(s=0,a=t.children_d.length;s<a;s++)n[t.children_d[s]].parents[e.inArray(t.id,n[t.children_d[s]].parents)]=i;return s=e.inArray(t.id,this._data.core.selected),-1!==s&&(this._data.core.selected[s]=i),s=this.get_node(t.id,!0),s&&(s.attr("id",i),this.element.attr("aria-activedescendant")===t.id&&this.element.attr("aria-activedescendant",i)),delete n[t.id],t.id=i,t.li_attr.id=i,n[i]=t,this.trigger("set_id",{node:t,new:t.id,old:r}),!0},get_text:function(t){return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.text},set_text:function(t,i){var s,a;if(e.isArray(t)){for(t=t.slice(),s=0,a=t.length;s<a;s++)this.set_text(t[s],i);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(t.text=i,this.get_node(t,!0).length&&this.redraw_node(t.id),this.trigger("set_text",{obj:t,text:i}),!0)},get_json:function(t,i,s){if(!(t=this.get_node(t||e.jstree.root)))return!1;i&&i.flat&&!s&&(s=[]);var a,n,r={id:t.id,text:t.text,icon:this.get_icon(t),li_attr:e.extend(!0,{},t.li_attr),a_attr:e.extend(!0,{},t.a_attr),state:{},data:(!i||!i.no_data)&&e.extend(!0,e.isArray(t.data)?[]:{},t.data)};if(i&&i.flat?r.parent=t.parent:r.children=[],i&&i.no_state)delete r.state;else for(a in t.state)t.state.hasOwnProperty(a)&&(r.state[a]=t.state[a]);if(i&&i.no_li_attr&&delete r.li_attr,i&&i.no_a_attr&&delete r.a_attr,i&&i.no_id&&(delete r.id,r.li_attr&&r.li_attr.id&&delete r.li_attr.id,r.a_attr&&r.a_attr.id&&delete r.a_attr.id),i&&i.flat&&t.id!==e.jstree.root&&s.push(r),!i||!i.no_children)for(a=0,n=t.children.length;a<n;a++)i&&i.flat?this.get_json(t.children[a],i,s):r.children.push(this.get_json(t.children[a],i));return i&&i.flat?s:t.id===e.jstree.root?r.children:r},create_node:function(i,s,a,n,r){if(null===i&&(i=e.jstree.root),!(i=this.get_node(i)))return!1;if(a=a===t?"last":a,!a.toString().match(/^(before|after)$/)&&!r&&!this.is_loaded(i))return this.load_node(i,function(){this.create_node(i,s,a,n,!0)});s||(s={text:this.get_string("New node")}),s="string"==typeof s?{text:s}:e.extend(!0,{},s),s.text===t&&(s.text=this.get_string("New node"));var o,l,d,c;switch(i.id===e.jstree.root&&("before"===a&&(a="first"),"after"===a&&(a="last")),a){case"before":o=this.get_node(i.parent),a=e.inArray(i.id,o.children),i=o;break;case"after":o=this.get_node(i.parent),a=e.inArray(i.id,o.children)+1,i=o;break;case"inside":case"first":a=0;break;case"last":a=i.children.length;break;default:a||(a=0)}if(a>i.children.length&&(a=i.children.length),s.id||(s.id=!0),!this.check("create_node",s,i,a))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!0===s.id&&delete s.id,!(s=this._parse_model_from_json(s,i.id,i.parents.concat())))return!1;for(o=this.get_node(s),l=[],l.push(s),l=l.concat(o.children_d),this.trigger("model",{nodes:l,parent:i.id}),i.children_d=i.children_d.concat(l),d=0,c=i.parents.length;d<c;d++)this._model.data[i.parents[d]].children_d=this._model.data[i.parents[d]].children_d.concat(l);for(s=o,o=[],d=0,c=i.children.length;d<c;d++)o[d>=a?d+1:d]=i.children[d];return o[a]=s.id,i.children=o,this.redraw_node(i,!0),this.trigger("create_node",{node:this.get_node(s),parent:i.id,position:a}),n&&n.call(this,this.get_node(s)),s.id},rename_node:function(t,i){var s,a,n;if(e.isArray(t)){for(t=t.slice(),s=0,a=t.length;s<a;s++)this.rename_node(t[s],i);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(n=t.text,this.check("rename_node",t,this.get_parent(t),i)?(this.set_text(t,i),this.trigger("rename_node",{node:t,text:i,old:n}),!0):(this.settings.core.error.call(this,this._data.core.last_error),!1))},delete_node:function(t){var i,s,a,n,r,o,l,d,c,h,u,f;if(e.isArray(t)){for(t=t.slice(),i=0,s=t.length;i<s;i++)this.delete_node(t[i]);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;if(a=this.get_node(t.parent),n=e.inArray(t.id,a.children),h=!1,!this.check("delete_node",t,a,n))return this.settings.core.error.call(this,this._data.core.last_error),!1;for(-1!==n&&(a.children=e.vakata.array_remove(a.children,n)),r=t.children_d.concat([]),r.push(t.id),o=0,l=t.parents.length;o<l;o++)this._model.data[t.parents[o]].children_d=e.vakata.array_filter(this._model.data[t.parents[o]].children_d,function(t){return-1===e.inArray(t,r)});for(d=0,c=r.length;d<c;d++)if(this._model.data[r[d]].state.selected){h=!0;break}for(h&&(this._data.core.selected=e.vakata.array_filter(this._data.core.selected,function(t){return-1===e.inArray(t,r)})),this.trigger("delete_node",{node:t,parent:a.id}),h&&this.trigger("changed",{action:"delete_node",node:t,selected:this._data.core.selected,parent:a.id}),d=0,c=r.length;d<c;d++)delete this._model.data[r[d]];return-1!==e.inArray(this._data.core.focused,r)&&(this._data.core.focused=null,u=this.element[0].scrollTop,f=this.element[0].scrollLeft,a.id===e.jstree.root?this._model.data[e.jstree.root].children[0]&&this.get_node(this._model.data[e.jstree.root].children[0],!0).children(".jstree-anchor").focus():this.get_node(a,!0).children(".jstree-anchor").focus(),this.element[0].scrollTop=u,this.element[0].scrollLeft=f),this.redraw_node(a,!0),!0},check:function(t,i,s,a,n){i=i&&i.id?i:this.get_node(i),s=s&&s.id?s:this.get_node(s)
;var r=t.match(/^move_node|copy_node|create_node$/i)?s:i,o=this.settings.core.check_callback;return"move_node"!==t&&"copy_node"!==t||n&&n.is_multi||i.id!==s.id&&("move_node"!==t||e.inArray(i.id,s.children)!==a)&&-1===e.inArray(s.id,i.children_d)?(r&&r.data&&(r=r.data),r&&r.functions&&(!1===r.functions[t]||!0===r.functions[t])?(!1===r.functions[t]&&(this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+t,data:JSON.stringify({chk:t,pos:a,obj:!(!i||!i.id)&&i.id,par:!(!s||!s.id)&&s.id})}),r.functions[t]):!(!1===o||e.isFunction(o)&&!1===o.call(this,t,i,s,a,n)||o&&!1===o[t])||(this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+t,data:JSON.stringify({chk:t,pos:a,obj:!(!i||!i.id)&&i.id,par:!(!s||!s.id)&&s.id})},!1)):(this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:t,pos:a,obj:!(!i||!i.id)&&i.id,par:!(!s||!s.id)&&s.id})},!1)},last_error:function(){return this._data.core.last_error},move_node:function(i,s,a,n,r,o,l){var d,c,h,u,f,p,_,g,m,x,b,v,y,k;if(s=this.get_node(s),a=a===t?0:a,!s)return!1;if(!a.toString().match(/^(before|after)$/)&&!r&&!this.is_loaded(s))return this.load_node(s,function(){this.move_node(i,s,a,n,!0,!1,l)});if(e.isArray(i)){if(1!==i.length){for(d=0,c=i.length;d<c;d++)(m=this.move_node(i[d],s,a,n,r,!1,l))&&(s=m,a="after");return this.redraw(),!0}i=i[0]}if(!(i=i&&i.id?i:this.get_node(i))||i.id===e.jstree.root)return!1;if(h=(i.parent||e.jstree.root).toString(),f=a.toString().match(/^(before|after)$/)&&s.id!==e.jstree.root?this.get_node(s.parent):s,p=l||(this._model.data[i.id]?this:e.jstree.reference(i.id)),_=!p||!p._id||this._id!==p._id,u=p&&p._id&&h&&p._model.data[h]&&p._model.data[h].children?e.inArray(i.id,p._model.data[h].children):-1,p&&p._id&&(i=p._model.data[i.id]),_)return!!(m=this.copy_node(i,s,a,n,r,!1,l))&&(p&&p.delete_node(i),m);switch(s.id===e.jstree.root&&("before"===a&&(a="first"),"after"===a&&(a="last")),a){case"before":a=e.inArray(s.id,f.children);break;case"after":a=e.inArray(s.id,f.children)+1;break;case"inside":case"first":a=0;break;case"last":a=f.children.length;break;default:a||(a=0)}if(a>f.children.length&&(a=f.children.length),!this.check("move_node",i,f,a,{core:!0,origin:l,is_multi:p&&p._id&&p._id!==this._id,is_foreign:!p||!p._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(i.parent===f.id){for(g=f.children.concat(),m=e.inArray(i.id,g),-1!==m&&(g=e.vakata.array_remove(g,m),a>m&&a--),m=[],x=0,b=g.length;x<b;x++)m[x>=a?x+1:x]=g[x];m[a]=i.id,f.children=m,this._node_changed(f.id),this.redraw(f.id===e.jstree.root)}else{for(m=i.children_d.concat(),m.push(i.id),x=0,b=i.parents.length;x<b;x++){for(g=[],k=p._model.data[i.parents[x]].children_d,v=0,y=k.length;v<y;v++)-1===e.inArray(k[v],m)&&g.push(k[v]);p._model.data[i.parents[x]].children_d=g}for(p._model.data[h].children=e.vakata.array_remove_item(p._model.data[h].children,i.id),x=0,b=f.parents.length;x<b;x++)this._model.data[f.parents[x]].children_d=this._model.data[f.parents[x]].children_d.concat(m);for(g=[],x=0,b=f.children.length;x<b;x++)g[x>=a?x+1:x]=f.children[x];for(g[a]=i.id,f.children=g,f.children_d.push(i.id),f.children_d=f.children_d.concat(i.children_d),i.parent=f.id,m=f.parents.concat(),m.unshift(f.id),k=i.parents.length,i.parents=m,m=m.concat(),x=0,b=i.children_d.length;x<b;x++)this._model.data[i.children_d[x]].parents=this._model.data[i.children_d[x]].parents.slice(0,-1*k),Array.prototype.push.apply(this._model.data[i.children_d[x]].parents,m);h!==e.jstree.root&&f.id!==e.jstree.root||(this._model.force_full_redraw=!0),this._model.force_full_redraw||(this._node_changed(h),this._node_changed(f.id)),o||this.redraw()}return n&&n.call(this,i,f,a),this.trigger("move_node",{node:i,parent:f.id,position:a,old_parent:h,old_position:u,is_multi:p&&p._id&&p._id!==this._id,is_foreign:!p||!p._id,old_instance:p,new_instance:this}),i.id},copy_node:function(i,s,a,n,r,o,l){var d,c,h,u,f,p,_,g,m,x;if(s=this.get_node(s),a=a===t?0:a,!s)return!1;if(!a.toString().match(/^(before|after)$/)&&!r&&!this.is_loaded(s))return this.load_node(s,function(){this.copy_node(i,s,a,n,!0,!1,l)});if(e.isArray(i)){if(1!==i.length){for(d=0,c=i.length;d<c;d++)(u=this.copy_node(i[d],s,a,n,r,!0,l))&&(s=u,a="after");return this.redraw(),!0}i=i[0]}if(!(i=i&&i.id?i:this.get_node(i))||i.id===e.jstree.root)return!1;switch(g=(i.parent||e.jstree.root).toString(),m=a.toString().match(/^(before|after)$/)&&s.id!==e.jstree.root?this.get_node(s.parent):s,x=l||(this._model.data[i.id]?this:e.jstree.reference(i.id)),!x||!x._id||this._id!==x._id,x&&x._id&&(i=x._model.data[i.id]),s.id===e.jstree.root&&("before"===a&&(a="first"),"after"===a&&(a="last")),a){case"before":a=e.inArray(s.id,m.children);break;case"after":a=e.inArray(s.id,m.children)+1;break;case"inside":case"first":a=0;break;case"last":a=m.children.length;break;default:a||(a=0)}if(a>m.children.length&&(a=m.children.length),!this.check("copy_node",i,m,a,{core:!0,origin:l,is_multi:x&&x._id&&x._id!==this._id,is_foreign:!x||!x._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!(_=x?x.get_json(i,{no_id:!0,no_data:!0,no_state:!0}):i))return!1;if(!0===_.id&&delete _.id,!(_=this._parse_model_from_json(_,m.id,m.parents.concat())))return!1;for(u=this.get_node(_),i&&i.state&&!1===i.state.loaded&&(u.state.loaded=!1),h=[],h.push(_),h=h.concat(u.children_d),this.trigger("model",{nodes:h,parent:m.id}),f=0,p=m.parents.length;f<p;f++)this._model.data[m.parents[f]].children_d=this._model.data[m.parents[f]].children_d.concat(h);for(h=[],f=0,p=m.children.length;f<p;f++)h[f>=a?f+1:f]=m.children[f];return h[a]=u.id,m.children=h,m.children_d.push(u.id),m.children_d=m.children_d.concat(u.children_d),m.id===e.jstree.root&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||this._node_changed(m.id),o||this.redraw(m.id===e.jstree.root),n&&n.call(this,u,m,a),this.trigger("copy_node",{node:u,original:i,parent:m.id,position:a,old_parent:g,old_position:x&&x._id&&g&&x._model.data[g]&&x._model.data[g].children?e.inArray(i.id,x._model.data[g].children):-1,is_multi:x&&x._id&&x._id!==this._id,is_foreign:!x||!x._id,old_instance:x,new_instance:this}),u.id},cut:function(t){if(t||(t=this._data.core.selected.concat()),e.isArray(t)||(t=[t]),!t.length)return!1;var i,r,o,l=[];for(r=0,o=t.length;r<o;r++)(i=this.get_node(t[r]))&&i.id&&i.id!==e.jstree.root&&l.push(i);if(!l.length)return!1;s=l,n=this,a="move_node",this.trigger("cut",{node:t})},copy:function(t){if(t||(t=this._data.core.selected.concat()),e.isArray(t)||(t=[t]),!t.length)return!1;var i,r,o,l=[];for(r=0,o=t.length;r<o;r++)(i=this.get_node(t[r]))&&i.id&&i.id!==e.jstree.root&&l.push(i);if(!l.length)return!1;s=l,n=this,a="copy_node",this.trigger("copy",{node:t})},get_buffer:function(){return{mode:a,node:s,inst:n}},can_paste:function(){return!1!==a&&!1!==s},paste:function(e,t){if(!((e=this.get_node(e))&&a&&a.match(/^(copy_node|move_node)$/)&&s))return!1;this[a](s,e,t,!1,!1,!1,n)&&this.trigger("paste",{parent:e.id,node:s,mode:a}),s=!1,a=!1,n=!1},clear_buffer:function(){s=!1,a=!1,n=!1,this.trigger("clear_buffer")},edit:function(t,i,s){var a,n,r,o,d,c,h,u,f,p=!1;return!!(t=this.get_node(t))&&(this.check("edit",t,this.get_parent(t))?(f=t,i="string"==typeof i?i:t.text,this.set_text(t,""),t=this._open_to(t),f.text=i,a=this._data.core.rtl,n=this.element.width(),this._data.core.focused=f.id,r=t.children(".jstree-anchor").focus(),o=e("<span>"),d=i,c=e("<div />",{css:{position:"absolute",top:"-200px",left:a?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),h=e("<input />",{value:d,class:"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:e.proxy(function(i){i.stopImmediatePropagation(),i.preventDefault();var a,n=o.children(".jstree-rename-input"),l=n.val(),u=this.settings.core.force_text;""===l&&(l=d),c.remove(),o.replaceWith(r),o.remove(),d=u?d:e("<div></div>").append(e.parseHTML(d)).html(),this.set_text(t,d),a=!!this.rename_node(t,u?e("<div></div>").text(l).text():e("<div></div>").append(e.parseHTML(l)).html()),a||this.set_text(t,d),this._data.core.focused=f.id,setTimeout(e.proxy(function(){var e=this.get_node(f.id,!0);e.length&&(this._data.core.focused=f.id,e.children(".jstree-anchor").focus())},this),0),s&&s.call(this,f,a,p),h=null},this),keydown:function(e){var t=e.which;27===t&&(p=!0,this.value=d),27!==t&&13!==t&&37!==t&&38!==t&&39!==t&&40!==t&&32!==t||e.stopImmediatePropagation(),27!==t&&13!==t||(e.preventDefault(),this.blur())},click:function(e){e.stopImmediatePropagation()},mousedown:function(e){e.stopImmediatePropagation()},keyup:function(e){h.width(Math.min(c.text("pW"+this.value).width(),n))},keypress:function(e){if(13===e.which)return!1}}),u={fontFamily:r.css("fontFamily")||"",fontSize:r.css("fontSize")||"",fontWeight:r.css("fontWeight")||"",fontStyle:r.css("fontStyle")||"",fontStretch:r.css("fontStretch")||"",fontVariant:r.css("fontVariant")||"",letterSpacing:r.css("letterSpacing")||"",wordSpacing:r.css("wordSpacing")||""},o.attr("class",r.attr("class")).append(r.contents().clone()).append(h),r.replaceWith(o),c.css(u),h.css(u).width(Math.min(c.text("pW"+h[0].value).width(),n))[0].select(),void e(l).one("mousedown.jstree touchstart.jstree dnd_start.vakata",function(t){h&&t.target!==h&&e(h).blur()})):(this.settings.core.error.call(this,this._data.core.last_error),!1))},set_theme:function(t,i){if(!t)return!1;if(!0===i){var s=this.settings.core.themes.dir;s||(s=e.jstree.path+"/themes"),i=s+"/"+t+"/style.css"}i&&-1===e.inArray(i,r)&&(e("head").append('<link rel="stylesheet" href="'+i+'" type="text/css" />'),r.push(i)),this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name),this._data.core.themes.name=t,this.element.addClass("jstree-"+t),this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+t+"-responsive"),this.trigger("set_theme",{theme:t})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(e){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant),this._data.core.themes.variant=e,e&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=!0,this.get_container_ul().addClass("jstree-striped"),this.trigger("show_stripes")},hide_stripes:function(){this._data.core.themes.stripes=!1,this.get_container_ul().removeClass("jstree-striped"),this.trigger("hide_stripes")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0,this.get_container_ul().removeClass("jstree-no-dots"),this.trigger("show_dots")},hide_dots:function(){this._data.core.themes.dots=!1,this.get_container_ul().addClass("jstree-no-dots"),this.trigger("hide_dots")},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0,this.get_container_ul().removeClass("jstree-no-icons"),this.trigger("show_icons")},hide_icons:function(){this._data.core.themes.icons=!1,this.get_container_ul().addClass("jstree-no-icons"),this.trigger("hide_icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},show_ellipsis:function(){this._data.core.themes.ellipsis=!0,this.get_container_ul().addClass("jstree-ellipsis"),this.trigger("show_ellipsis")},hide_ellipsis:function(){this._data.core.themes.ellipsis=!1,this.get_container_ul().removeClass("jstree-ellipsis"),this.trigger("hide_ellipsis")},toggle_ellipsis:function(){this._data.core.themes.ellipsis?this.hide_ellipsis():this.show_ellipsis()},set_icon:function(i,s){var a,n,r,o;if(e.isArray(i)){for(i=i.slice(),a=0,n=i.length;a<n;a++)this.set_icon(i[a],s);return!0}return!(!(i=this.get_node(i))||i.id===e.jstree.root)&&(o=i.icon,i.icon=!0===s||null===s||s===t||""===s||s,r=this.get_node(i,!0).children(".jstree-anchor").children(".jstree-themeicon"),!1===s?this.hide_icon(i):!0===s||null===s||s===t||""===s?(r.removeClass("jstree-themeicon-custom "+o).css("background","").removeAttr("rel"),!1===o&&this.show_icon(i)):-1===s.indexOf("/")&&-1===s.indexOf(".")?(r.removeClass(o).css("background",""),r.addClass(s+" jstree-themeicon-custom").attr("rel",s),!1===o&&this.show_icon(i)):(r.removeClass(o).css("background",""),r.addClass("jstree-themeicon-custom").css("background","url('"+s+"') center center no-repeat").attr("rel",s),!1===o&&this.show_icon(i)),!0)},get_icon:function(t){return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.icon},hide_icon:function(t){var i,s;if(e.isArray(t)){for(t=t.slice(),i=0,s=t.length;i<s;i++)this.hide_icon(t[i]);return!0}return!(!(t=this.get_node(t))||t===e.jstree.root)&&(t.icon=!1,this.get_node(t,!0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),!0)},show_icon:function(t){var i,s,a;if(e.isArray(t)){for(t=t.slice(),i=0,s=t.length;i<s;i++)this.show_icon(t[i]);return!0}return!(!(t=this.get_node(t))||t===e.jstree.root)&&(a=this.get_node(t,!0),t.icon=!a.length||a.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"),t.icon||(t.icon=!0),a.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),!0)}},e.vakata={},e.vakata.attributes=function(t,i){t=e(t)[0];var s=i?{}:[];return t&&t.attributes&&e.each(t.attributes,function(t,a){-1===e.inArray(a.name.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])&&null!==a.value&&""!==e.trim(a.value)&&(i?s[a.name]=a.value:s.push(a.name))}),s},e.vakata.array_unique=function(e){var i,s,a=[],n={};for(i=0,s=e.length;i<s;i++)n[e[i]]===t&&(a.push(e[i]),n[e[i]]=!0);return a},e.vakata.array_remove=function(e,t){return e.splice(t,1),e},e.vakata.array_remove_item=function(t,i){var s=e.inArray(i,t);return-1!==s?e.vakata.array_remove(t,s):t},e.vakata.array_filter=function(e,t,i,s,a){if(e.filter)return e.filter(t,i);s=[];for(a in e)~~a+""==a+""&&a>=0&&t.call(i,e[a],+a,e)&&s.push(e[a]);return s},e.jstree.plugins.changed=function(e,t){var i=[];this.trigger=function(e,s){var a,n;if(s||(s={}),"changed"===e.replace(".jstree","")){s.changed={selected:[],deselected:[]};var r={};for(a=0,n=i.length;a<n;a++)r[i[a]]=1;for(a=0,n=s.selected.length;a<n;a++)r[s.selected[a]]?r[s.selected[a]]=2:s.changed.selected.push(s.selected[a]);for(a=0,n=i.length;a<n;a++)1===r[i[a]]&&s.changed.deselected.push(i[a]);i=s.selected.slice()}t.trigger.call(this,e,s)},this.refresh=function(e,s){return i=[],t.refresh.apply(this,arguments)}};var d=l.createElement("I");d.className="jstree-icon jstree-checkbox",d.setAttribute("role","presentation"),e.jstree.defaults.checkbox={visible:!0,three_state:!0,whole_node:!0,keep_selected_style:!0,cascade:"",tie_selection:!0,cascade_to_disabled:!0,cascade_to_hidden:!0},e.jstree.plugins.checkbox=function(i,s){this.bind=function(){s.bind.call(this),this._data.checkbox.uto=!1,this._data.checkbox.selected=[],this.settings.checkbox.three_state&&(this.settings.checkbox.cascade="up+down+undetermined"),this.element.on("init.jstree",e.proxy(function(){this._data.checkbox.visible=this.settings.checkbox.visible,this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked"),this.settings.checkbox.tie_selection&&this.element.addClass("jstree-checkbox-selection")},this)).on("loading.jstree",e.proxy(function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()},this)),-1!==this.settings.checkbox.cascade.indexOf("undetermined")&&this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",e.proxy(function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)},this)),this.settings.checkbox.tie_selection||this.element.on("model.jstree",e.proxy(function(e,t){var i,s,a=this._model.data,n=(a[t.parent],t.nodes);for(i=0,s=n.length;i<s;i++)a[n[i]].state.checked=a[n[i]].state.checked||a[n[i]].original&&a[n[i]].original.state&&a[n[i]].original.state.checked,a[n[i]].state.checked&&this._data.checkbox.selected.push(n[i])},this)),-1===this.settings.checkbox.cascade.indexOf("up")&&-1===this.settings.checkbox.cascade.indexOf("down")||this.element.on("model.jstree",e.proxy(function(t,i){var s,a,n,r,o,l,d=this._model.data,c=d[i.parent],h=i.nodes,u=[],f=this.settings.checkbox.cascade,p=this.settings.checkbox.tie_selection;if(-1!==f.indexOf("down"))if(c.state[p?"selected":"checked"]){for(a=0,n=h.length;a<n;a++)d[h[a]].state[p?"selected":"checked"]=!0;this._data[p?"core":"checkbox"].selected=this._data[p?"core":"checkbox"].selected.concat(h)}else for(a=0,n=h.length;a<n;a++)if(d[h[a]].state[p?"selected":"checked"]){for(r=0,o=d[h[a]].children_d.length;r<o;r++)d[d[h[a]].children_d[r]].state[p?"selected":"checked"]=!0;this._data[p?"core":"checkbox"].selected=this._data[p?"core":"checkbox"].selected.concat(d[h[a]].children_d)}if(-1!==f.indexOf("up")){for(a=0,n=c.children_d.length;a<n;a++)d[c.children_d[a]].children.length||u.push(d[c.children_d[a]].parent);for(u=e.vakata.array_unique(u),r=0,o=u.length;r<o;r++)for(c=d[u[r]];c&&c.id!==e.jstree.root;){for(s=0,a=0,n=c.children.length;a<n;a++)s+=d[c.children[a]].state[p?"selected":"checked"];if(s!==n)break;c.state[p?"selected":"checked"]=!0,this._data[p?"core":"checkbox"].selected.push(c.id),(l=this.get_node(c,!0))&&l.length&&l.attr("aria-selected",!0).children(".jstree-anchor").addClass(p?"jstree-clicked":"jstree-checked"),c=this.get_node(c.parent)}}this._data[p?"core":"checkbox"].selected=e.vakata.array_unique(this._data[p?"core":"checkbox"].selected)},this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",e.proxy(function(t,i){var s,a,n,r,o=i.node,l=this._model.data,d=this.get_node(o.parent),c=this.settings.checkbox.cascade,h=this.settings.checkbox.tie_selection,u={},f=this._data[h?"core":"checkbox"].selected;for(s=0,a=f.length;s<a;s++)u[f[s]]=!0;if(-1!==c.indexOf("down")){var p=this._cascade_new_checked_state(o.id,!0);o.children_d.concat(o.id).forEach(function(e){p.indexOf(e)>-1?u[e]=!0:delete u[e]})}if(-1!==c.indexOf("up"))for(;d&&d.id!==e.jstree.root;){for(n=0,s=0,a=d.children.length;s<a;s++)n+=l[d.children[s]].state[h?"selected":"checked"];if(n!==a)break;d.state[h?"selected":"checked"]=!0,u[d.id]=!0,(r=this.get_node(d,!0))&&r.length&&r.attr("aria-selected",!0).children(".jstree-anchor").addClass(h?"jstree-clicked":"jstree-checked"),d=this.get_node(d.parent)}f=[];for(s in u)u.hasOwnProperty(s)&&f.push(s);this._data[h?"core":"checkbox"].selected=f},this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",e.proxy(function(t,i){var s,a,n,r=this.get_node(e.jstree.root),o=this._model.data;for(s=0,a=r.children_d.length;s<a;s++)(n=o[r.children_d[s]])&&n.original&&n.original.state&&n.original.state.undetermined&&(n.original.state.undetermined=!1)},this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",e.proxy(function(e,t){var i,s,a,n=t.node,r=(this.get_node(n,!0),this.settings.checkbox.cascade),o=this.settings.checkbox.tie_selection,l=this._data[o?"core":"checkbox"].selected,d=n.children_d.concat(n.id);if(-1!==r.indexOf("down")){var c=this._cascade_new_checked_state(n.id,!1);l=l.filter(function(e){return-1===d.indexOf(e)||c.indexOf(e)>-1})}if(-1!==r.indexOf("up")&&-1===l.indexOf(n.id)){for(i=0,s=n.parents.length;i<s;i++)a=this._model.data[n.parents[i]],a.state[o?"selected":"checked"]=!1,a&&a.original&&a.original.state&&a.original.state.undetermined&&(a.original.state.undetermined=!1),(a=this.get_node(n.parents[i],!0))&&a.length&&a.attr("aria-selected",!1).children(".jstree-anchor").removeClass(o?"jstree-clicked":"jstree-checked");l=l.filter(function(e){return-1===n.parents.indexOf(e)})}this._data[o?"core":"checkbox"].selected=l},this)),-1!==this.settings.checkbox.cascade.indexOf("up")&&this.element.on("delete_node.jstree",e.proxy(function(t,i){for(var s,a,n,r,o=this.get_node(i.parent),l=this._model.data,d=this.settings.checkbox.tie_selection;o&&o.id!==e.jstree.root&&!o.state[d?"selected":"checked"];){for(n=0,s=0,a=o.children.length;s<a;s++)n+=l[o.children[s]].state[d?"selected":"checked"];if(!(a>0&&n===a))break;o.state[d?"selected":"checked"]=!0,this._data[d?"core":"checkbox"].selected.push(o.id),(r=this.get_node(o,!0))&&r.length&&r.attr("aria-selected",!0).children(".jstree-anchor").addClass(d?"jstree-clicked":"jstree-checked"),o=this.get_node(o.parent)}},this)).on("move_node.jstree",e.proxy(function(t,i){var s,a,n,r,o,l=i.is_multi,d=i.old_parent,c=this.get_node(i.parent),h=this._model.data,u=this.settings.checkbox.tie_selection;if(!l)for(s=this.get_node(d);s&&s.id!==e.jstree.root&&!s.state[u?"selected":"checked"];){for(a=0,n=0,r=s.children.length;n<r;n++)a+=h[s.children[n]].state[u?"selected":"checked"];if(!(r>0&&a===r))break;s.state[u?"selected":"checked"]=!0,this._data[u?"core":"checkbox"].selected.push(s.id),(o=this.get_node(s,!0))&&o.length&&o.attr("aria-selected",!0).children(".jstree-anchor").addClass(u?"jstree-clicked":"jstree-checked"),s=this.get_node(s.parent)}for(s=c;s&&s.id!==e.jstree.root;){for(a=0,n=0,r=s.children.length;n<r;n++)a+=h[s.children[n]].state[u?"selected":"checked"];if(a===r)s.state[u?"selected":"checked"]||(s.state[u?"selected":"checked"]=!0,this._data[u?"core":"checkbox"].selected.push(s.id),(o=this.get_node(s,!0))&&o.length&&o.attr("aria-selected",!0).children(".jstree-anchor").addClass(u?"jstree-clicked":"jstree-checked"));else{if(!s.state[u?"selected":"checked"])break;s.state[u?"selected":"checked"]=!1,this._data[u?"core":"checkbox"].selected=e.vakata.array_remove_item(this._data[u?"core":"checkbox"].selected,s.id),(o=this.get_node(s,!0))&&o.length&&o.attr("aria-selected",!1).children(".jstree-anchor").removeClass(u?"jstree-clicked":"jstree-checked")}s=this.get_node(s.parent)}},this))},this._undetermined=function(){if(null!==this.element){var i,s,a,n,r={},o=this._model.data,l=this.settings.checkbox.tie_selection,d=this._data[l?"core":"checkbox"].selected,c=[],h=this;for(i=0,s=d.length;i<s;i++)if(o[d[i]]&&o[d[i]].parents)for(a=0,n=o[d[i]].parents.length;a<n&&r[o[d[i]].parents[a]]===t;a++)o[d[i]].parents[a]!==e.jstree.root&&(r[o[d[i]].parents[a]]=!0,c.push(o[d[i]].parents[a]));for(this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var l,d=h.get_node(this);if(d)if(d.state.loaded){for(i=0,s=d.children_d.length;i<s;i++)if(l=o[d.children_d[i]],!l.state.loaded&&l.original&&l.original.state&&l.original.state.undetermined&&!0===l.original.state.undetermined)for(r[l.id]===t&&l.id!==e.jstree.root&&(r[l.id]=!0,c.push(l.id)),a=0,n=l.parents.length;a<n;a++)r[l.parents[a]]===t&&l.parents[a]!==e.jstree.root&&(r[l.parents[a]]=!0,c.push(l.parents[a]))}else if(d.original&&d.original.state&&d.original.state.undetermined&&!0===d.original.state.undetermined)for(r[d.id]===t&&d.id!==e.jstree.root&&(r[d.id]=!0,c.push(d.id)),a=0,n=d.parents.length;a<n;a++)r[d.parents[a]]===t&&d.parents[a]!==e.jstree.root&&(r[d.parents[a]]=!0,c.push(d.parents[a]))}),this.element.find(".jstree-undetermined").removeClass("jstree-undetermined"),i=0,s=c.length;i<s;i++)o[c[i]].state[l?"selected":"checked"]||(d=this.get_node(c[i],!0))&&d.length&&d.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined")}},this.redraw_node=function(t,i,a,n){if(t=s.redraw_node.apply(this,arguments)){var r,o,l=null,c=null;for(r=0,o=t.childNodes.length;r<o;r++)if(t.childNodes[r]&&t.childNodes[r].className&&-1!==t.childNodes[r].className.indexOf("jstree-anchor")){l=t.childNodes[r];break}l&&(!this.settings.checkbox.tie_selection&&this._model.data[t.id].state.checked&&(l.className+=" jstree-checked"),c=d.cloneNode(!1),this._model.data[t.id].state.checkbox_disabled&&(c.className+=" jstree-checkbox-disabled"),l.insertBefore(c,l.childNodes[0]))}return a||-1===this.settings.checkbox.cascade.indexOf("undetermined")||(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)),t},this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0,this.get_container_ul().removeClass("jstree-no-checkboxes")},this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1,this.get_container_ul().addClass("jstree-no-checkboxes")},this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()},this.is_undetermined=function(t){t=this.get_node(t);var i,s,a=this.settings.checkbox.cascade,n=this.settings.checkbox.tie_selection,r=this._data[n?"core":"checkbox"].selected,o=this._model.data;if(!t||!0===t.state[n?"selected":"checked"]||-1===a.indexOf("undetermined")||-1===a.indexOf("down")&&-1===a.indexOf("up"))return!1;if(!t.state.loaded&&!0===t.original.state.undetermined)return!0;for(i=0,s=t.children_d.length;i<s;i++)if(-1!==e.inArray(t.children_d[i],r)||!o[t.children_d[i]].state.loaded&&o[t.children_d[i]].original.state.undetermined)return!0;return!1},this.disable_checkbox=function(t){var i,s,a;if(e.isArray(t)){for(t=t.slice(),i=0,s=t.length;i<s;i++)this.disable_checkbox(t[i]);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;a=this.get_node(t,!0),t.state.checkbox_disabled||(t.state.checkbox_disabled=!0,a&&a.length&&a.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-checkbox-disabled"),this.trigger("disable_checkbox",{node:t}))},this.enable_checkbox=function(t){var i,s,a;if(e.isArray(t)){for(t=t.slice(),i=0,s=t.length;i<s;i++)this.enable_checkbox(t[i]);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;a=this.get_node(t,!0),t.state.checkbox_disabled&&(t.state.checkbox_disabled=!1,a&&a.length&&a.children(".jstree-anchor").children(".jstree-checkbox").removeClass("jstree-checkbox-disabled"),this.trigger("enable_checkbox",{node:t}))},this.activate_node=function(t,i){return!e(i.target).hasClass("jstree-checkbox-disabled")&&(this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||e(i.target).hasClass("jstree-checkbox"))&&(i.ctrlKey=!0),this.settings.checkbox.tie_selection||!this.settings.checkbox.whole_node&&!e(i.target).hasClass("jstree-checkbox")?s.activate_node.call(this,t,i):!this.is_disabled(t)&&(this.is_checked(t)?this.uncheck_node(t,i):this.check_node(t,i),void this.trigger("activate_node",{node:this.get_node(t)})))},this._cascade_new_checked_state=function(e,t){var i=this,s=this.settings.checkbox.tie_selection,a=this._model.data[e],n=[],r=[];if(!this.settings.checkbox.cascade_to_disabled&&a.state.disabled||!this.settings.checkbox.cascade_to_hidden&&a.state.hidden){var o=this.get_checked_descendants(e);a.state[s?"selected":"checked"]&&o.push(a.id),n=n.concat(o)}else{a.children&&a.children.forEach(function(e){var s=i._cascade_new_checked_state(e,t);n=n.concat(s),s.indexOf(e)>-1&&r.push(e)});var l=i.get_node(a,!0),d=r.length>0&&r.length<a.children.length;a.original&&a.original.state&&a.original.state.undetermined&&(a.original.state.undetermined=d),d?(a.state[s?"selected":"checked"]=!1,l.attr("aria-selected",!1).children(".jstree-anchor").removeClass(s?"jstree-clicked":"jstree-checked")):t&&r.length===a.children.length?(a.state[s?"selected":"checked"]=t,n.push(a.id),l.attr("aria-selected",!0).children(".jstree-anchor").addClass(s?"jstree-clicked":"jstree-checked")):(a.state[s?"selected":"checked"]=!1,l.attr("aria-selected",!1).children(".jstree-anchor").removeClass(s?"jstree-clicked":"jstree-checked"))}return n},this.get_checked_descendants=function(e){var t=this,i=t.settings.checkbox.tie_selection;return t._model.data[e].children_d.filter(function(e){return t._model.data[e].state[i?"selected":"checked"]})},this.check_node=function(t,i){if(this.settings.checkbox.tie_selection)return this.select_node(t,!1,!0,i);var s,a,n;if(e.isArray(t)){for(t=t.slice(),a=0,n=t.length;a<n;a++)this.check_node(t[a],i);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;s=this.get_node(t,!0),t.state.checked||(t.state.checked=!0,this._data.checkbox.selected.push(t.id),s&&s.length&&s.children(".jstree-anchor").addClass("jstree-checked"),this.trigger("check_node",{node:t,selected:this._data.checkbox.selected,event:i}))},this.uncheck_node=function(t,i){if(this.settings.checkbox.tie_selection)return this.deselect_node(t,!1,i);var s,a,n;if(e.isArray(t)){for(t=t.slice(),s=0,a=t.length;s<a;s++)this.uncheck_node(t[s],i);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;n=this.get_node(t,!0),t.state.checked&&(t.state.checked=!1,this._data.checkbox.selected=e.vakata.array_remove_item(this._data.checkbox.selected,t.id),n.length&&n.children(".jstree-anchor").removeClass("jstree-checked"),this.trigger("uncheck_node",{node:t,selected:this._data.checkbox.selected,event:i}))},this.check_all=function(){if(this.settings.checkbox.tie_selection)return this.select_all();var t,i;this._data.checkbox.selected.concat([]);for(this._data.checkbox.selected=this._model.data[e.jstree.root].children_d.concat(),t=0,i=this._data.checkbox.selected.length;t<i;t++)this._model.data[this._data.checkbox.selected[t]]&&(this._model.data[this._data.checkbox.selected[t]].state.checked=!0);this.redraw(!0),this.trigger("check_all",{selected:this._data.checkbox.selected})},this.uncheck_all=function(){if(this.settings.checkbox.tie_selection)return this.deselect_all();var e,t,i=this._data.checkbox.selected.concat([]);for(e=0,t=this._data.checkbox.selected.length;e<t;e++)this._model.data[this._data.checkbox.selected[e]]&&(this._model.data[this._data.checkbox.selected[e]].state.checked=!1);this._data.checkbox.selected=[],this.element.find(".jstree-checked").removeClass("jstree-checked"),this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:i})},this.is_checked=function(t){return this.settings.checkbox.tie_selection?this.is_selected(t):!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.state.checked},this.get_checked=function(t){return this.settings.checkbox.tie_selection?this.get_selected(t):t?e.map(this._data.checkbox.selected,e.proxy(function(e){return this.get_node(e)},this)):this._data.checkbox.selected},this.get_top_checked=function(t){if(this.settings.checkbox.tie_selection)return this.get_top_selected(t);var i,s,a,n,r=this.get_checked(!0),o={};for(i=0,s=r.length;i<s;i++)o[r[i].id]=r[i];for(i=0,s=r.length;i<s;i++)for(a=0,n=r[i].children_d.length;a<n;a++)o[r[i].children_d[a]]&&delete o[r[i].children_d[a]];r=[];for(i in o)o.hasOwnProperty(i)&&r.push(i);return t?e.map(r,e.proxy(function(e){return this.get_node(e)},this)):r},this.get_bottom_checked=function(t){if(this.settings.checkbox.tie_selection)return this.get_bottom_selected(t);var i,s,a=this.get_checked(!0),n=[];for(i=0,s=a.length;i<s;i++)a[i].children.length||n.push(a[i].id);return t?e.map(n,e.proxy(function(e){return this.get_node(e)},this)):n},this.load_node=function(t,i){var a,n,r;if(!e.isArray(t)&&!this.settings.checkbox.tie_selection&&(r=this.get_node(t))&&r.state.loaded)for(a=0,n=r.children_d.length;a<n;a++)this._model.data[r.children_d[a]].state.checked&&(!0,this._data.checkbox.selected=e.vakata.array_remove_item(this._data.checkbox.selected,r.children_d[a]));return s.load_node.apply(this,arguments)},this.get_state=function(){var e=s.get_state.apply(this,arguments);return this.settings.checkbox.tie_selection?e:(e.checkbox=this._data.checkbox.selected.slice(),e)},this.set_state=function(t,i){var a=s.set_state.apply(this,arguments);if(a&&t.checkbox){if(!this.settings.checkbox.tie_selection){this.uncheck_all();var n=this;e.each(t.checkbox,function(e,t){
n.check_node(t)})}return delete t.checkbox,this.set_state(t,i),!1}return a},this.refresh=function(e,t){return this.settings.checkbox.tie_selection||(this._data.checkbox.selected=[]),s.refresh.apply(this,arguments)}},e.jstree.defaults.conditionalselect=function(){return!0},e.jstree.plugins.conditionalselect=function(e,t){this.activate_node=function(e,i){this.settings.conditionalselect.call(this,this.get_node(e),i)&&t.activate_node.call(this,e,i)}},e.jstree.defaults.contextmenu={select_node:!0,show_at_node:!0,items:function(t,i){return{create:{separator_before:!1,separator_after:!0,_disabled:!1,label:"Create",action:function(t){var i=e.jstree.reference(t.reference),s=i.get_node(t.reference);i.create_node(s,{},"last",function(e){try{i.edit(e)}catch(t){setTimeout(function(){i.edit(e)},0)}})}},rename:{separator_before:!1,separator_after:!1,_disabled:!1,label:"Rename",action:function(t){var i=e.jstree.reference(t.reference),s=i.get_node(t.reference);i.edit(s)}},remove:{separator_before:!1,icon:!1,separator_after:!1,_disabled:!1,label:"Delete",action:function(t){var i=e.jstree.reference(t.reference),s=i.get_node(t.reference);i.is_selected(s)?i.delete_node(i.get_selected()):i.delete_node(s)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(t){var i=e.jstree.reference(t.reference),s=i.get_node(t.reference);i.is_selected(s)?i.cut(i.get_top_selected()):i.cut(s)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(t){var i=e.jstree.reference(t.reference),s=i.get_node(t.reference);i.is_selected(s)?i.copy(i.get_top_selected()):i.copy(s)}},paste:{separator_before:!1,icon:!1,_disabled:function(t){return!e.jstree.reference(t.reference).can_paste()},separator_after:!1,label:"Paste",action:function(t){var i=e.jstree.reference(t.reference),s=i.get_node(t.reference);i.paste(s)}}}}}}},e.jstree.plugins.contextmenu=function(i,s){this.bind=function(){s.bind.call(this);var t,i,a=0,n=null;this.element.on("init.jstree loading.jstree ready.jstree",e.proxy(function(){this.get_container_ul().addClass("jstree-contextmenu")},this)).on("contextmenu.jstree",".jstree-anchor",e.proxy(function(e,t){"input"!==e.target.tagName.toLowerCase()&&(e.preventDefault(),a=e.ctrlKey?+new Date:0,(t||n)&&(a=+new Date+1e4),n&&clearTimeout(n),this.is_loading(e.currentTarget)||this.show_contextmenu(e.currentTarget,e.pageX,e.pageY,e))},this)).on("click.jstree",".jstree-anchor",e.proxy(function(t){this._data.contextmenu.visible&&(!a||+new Date-a>250)&&e.vakata.context.hide(),a=0},this)).on("touchstart.jstree",".jstree-anchor",function(s){s.originalEvent&&s.originalEvent.changedTouches&&s.originalEvent.changedTouches[0]&&(t=s.originalEvent.changedTouches[0].clientX,i=s.originalEvent.changedTouches[0].clientY,n=setTimeout(function(){e(s.currentTarget).trigger("contextmenu",!0)},750))}).on("touchmove.vakata.jstree",function(e){n&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(Math.abs(t-e.originalEvent.changedTouches[0].clientX)>50||Math.abs(i-e.originalEvent.changedTouches[0].clientY)>50)&&clearTimeout(n)}).on("touchend.vakata.jstree",function(e){n&&clearTimeout(n)}),e(l).on("context_hide.vakata.jstree",e.proxy(function(t,i){this._data.contextmenu.visible=!1,e(i.reference).removeClass("jstree-context")},this))},this.teardown=function(){this._data.contextmenu.visible&&e.vakata.context.hide(),s.teardown.call(this)},this.show_contextmenu=function(i,s,a,n){if(!(i=this.get_node(i))||i.id===e.jstree.root)return!1;var r=this.settings.contextmenu,o=this.get_node(i,!0),l=o.children(".jstree-anchor"),d=!1,c=!1;(r.show_at_node||s===t||a===t)&&(d=l.offset(),s=d.left,a=d.top+this._data.core.li_height),this.settings.contextmenu.select_node&&!this.is_selected(i)&&this.activate_node(i,n),c=r.items,e.isFunction(c)&&(c=c.call(this,i,e.proxy(function(e){this._show_contextmenu(i,s,a,e)},this))),e.isPlainObject(c)&&this._show_contextmenu(i,s,a,c)},this._show_contextmenu=function(t,i,s,a){var n=this.get_node(t,!0),r=n.children(".jstree-anchor");e(l).one("context_show.vakata.jstree",e.proxy(function(t,i){var s="jstree-contextmenu jstree-"+this.get_theme()+"-contextmenu";e(i.element).addClass(s),r.addClass("jstree-context")},this)),this._data.contextmenu.visible=!0,e.vakata.context.show(r,{x:i,y:s},a),this.trigger("show_contextmenu",{node:t,x:i,y:s})}},function(e){var t=!1,i={element:!1,reference:!1,position_x:0,position_y:0,items:[],html:"",is_visible:!1};e.vakata.context={settings:{hide_onmouseleave:0,icons:!0},_trigger:function(t){e(l).triggerHandler("context_"+t+".vakata",{reference:i.reference,element:i.element,position:{x:i.position_x,y:i.position_y}})},_execute:function(t){return!(!(t=i.items[t])||t._disabled&&(!e.isFunction(t._disabled)||t._disabled({item:t,reference:i.reference,element:i.element}))||!t.action)&&t.action.call(null,{item:t,reference:i.reference,element:i.element,position:{x:i.position_x,y:i.position_y}})},_parse:function(t,s){if(!t)return!1;s||(i.html="",i.items=[]);var a,n="",r=!1;return s&&(n+="<ul>"),e.each(t,function(t,s){if(!s)return!0;i.items.push(s),!r&&s.separator_before&&(n+="<li class='vakata-context-separator'><a href='#' "+(e.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>"),r=!1,n+="<li class='"+(s._class||"")+(!0===s._disabled||e.isFunction(s._disabled)&&s._disabled({item:s,reference:i.reference,element:i.element})?" vakata-contextmenu-disabled ":"")+"' "+(s.shortcut?" data-shortcut='"+s.shortcut+"' ":"")+">",n+="<a href='#' rel='"+(i.items.length-1)+"' "+(s.title?"title='"+s.title+"'":"")+">",e.vakata.context.settings.icons&&(n+="<i ",s.icon&&(-1!==s.icon.indexOf("/")||-1!==s.icon.indexOf(".")?n+=" style='background:url(\""+s.icon+"\") center center no-repeat' ":n+=" class='"+s.icon+"' "),n+="></i><span class='vakata-contextmenu-sep'>&#160;</span>"),n+=(e.isFunction(s.label)?s.label({item:t,reference:i.reference,element:i.element}):s.label)+(s.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+s.shortcut+'">'+(s.shortcut_label||"")+"</span>":"")+"</a>",s.submenu&&(a=e.vakata.context._parse(s.submenu,!0))&&(n+=a),n+="</li>",s.separator_after&&(n+="<li class='vakata-context-separator'><a href='#' "+(e.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>",r=!0)}),n=n.replace(/<li class\='vakata-context-separator'\><\/li\>$/,""),s&&(n+="</ul>"),s||(i.html=n,e.vakata.context._trigger("parse")),n.length>10&&n},_show_submenu:function(i){if(i=e(i),i.length&&i.children("ul").length){var s=i.children("ul"),a=i.offset().left,n=a+i.outerWidth(),r=i.offset().top,o=s.width(),l=s.height(),d=e(window).width()+e(window).scrollLeft(),c=e(window).height()+e(window).scrollTop();t?i[n-(o+10+i.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left"):i[n+o>d&&a>d-n?"addClass":"removeClass"]("vakata-context-right"),r+l+10>c&&s.css("bottom","-1px"),i.hasClass("vakata-context-right")?a<o&&s.css("margin-right",a-o):d-n<o&&s.css("margin-left",d-n-o),s.show()}},show:function(s,a,n){var r,o,l,d,c,h,u,f;switch(i.element&&i.element.length&&i.element.width(""),!0){case!a&&!s:return!1;case!!a&&!!s:i.reference=s,i.position_x=a.x,i.position_y=a.y;break;case!a&&!!s:i.reference=s,r=s.offset(),i.position_x=r.left+s.outerHeight(),i.position_y=r.top;break;case!!a&&!s:i.position_x=a.x,i.position_y=a.y}s&&!n&&e(s).data("vakata_contextmenu")&&(n=e(s).data("vakata_contextmenu")),e.vakata.context._parse(n)&&i.element.html(i.html),i.items.length&&(i.element.appendTo("body"),o=i.element,l=i.position_x,d=i.position_y,c=o.width(),h=o.height(),u=e(window).width()+e(window).scrollLeft(),f=e(window).height()+e(window).scrollTop(),t&&(l-=o.outerWidth()-e(s).outerWidth())<e(window).scrollLeft()+20&&(l=e(window).scrollLeft()+20),l+c+20>u&&(l=u-(c+20)),d+h+20>f&&(d=f-(h+20)),i.element.css({left:l,top:d}).show().find("a").first().focus().parent().addClass("vakata-context-hover"),i.is_visible=!0,e.vakata.context._trigger("show"))},hide:function(){i.is_visible&&(i.element.hide().find("ul").hide().end().find(":focus").blur().end().detach(),i.is_visible=!1,e.vakata.context._trigger("hide"))}},e(function(){t="rtl"===e("body").css("direction");var s=!1;i.element=e("<ul class='vakata-context'></ul>"),i.element.on("mouseenter","li",function(t){t.stopImmediatePropagation(),e.contains(this,t.relatedTarget)||(s&&clearTimeout(s),i.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end(),e(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover"),e.vakata.context._show_submenu(this))}).on("mouseleave","li",function(t){e.contains(this,t.relatedTarget)||e(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")}).on("mouseleave",function(t){e(this).find(".vakata-context-hover").removeClass("vakata-context-hover"),e.vakata.context.settings.hide_onmouseleave&&(s=setTimeout(function(t){return function(){e.vakata.context.hide()}}(),e.vakata.context.settings.hide_onmouseleave))}).on("click","a",function(t){t.preventDefault(),e(this).blur().parent().hasClass("vakata-context-disabled")||!1===e.vakata.context._execute(e(this).attr("rel"))||e.vakata.context.hide()}).on("keydown","a",function(t){var s=null;switch(t.which){case 13:case 32:t.type="click",t.preventDefault(),e(t.currentTarget).trigger(t);break;case 37:i.is_visible&&(i.element.find(".vakata-context-hover").last().closest("li").first().find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 38:i.is_visible&&(s=i.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first(),s.length||(s=i.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()),s.addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 39:i.is_visible&&(i.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 40:i.is_visible&&(s=i.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first(),s.length||(s=i.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()),s.addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 27:e.vakata.context.hide(),t.preventDefault()}}).on("keydown",function(e){e.preventDefault();var t=i.element.find(".vakata-contextmenu-shortcut-"+e.which).parent();t.parent().not(".vakata-context-disabled")&&t.click()}),e(l).on("mousedown.vakata.jstree",function(t){i.is_visible&&i.element[0]!==t.target&&!e.contains(i.element[0],t.target)&&e.vakata.context.hide()}).on("context_show.vakata.jstree",function(e,s){i.element.find("li:has(ul)").children("a").addClass("vakata-context-parent"),t&&i.element.addClass("vakata-context-rtl").css("direction","rtl"),i.element.find("ul").hide().end()})})}(e),e.jstree.defaults.dnd={copy:!0,open_timeout:500,is_draggable:!0,check_while_dragging:!0,always_copy:!1,inside_pos:0,drag_selection:!0,touch:!0,large_drop_target:!1,large_drag_target:!1,use_html5:!1};var c,h;e.jstree.plugins.dnd=function(t,i){this.init=function(e,t){i.init.call(this,e,t),this.settings.dnd.use_html5=this.settings.dnd.use_html5&&"draggable"in l.createElement("span")},this.bind=function(){i.bind.call(this),this.element.on(this.settings.dnd.use_html5?"dragstart.jstree":"mousedown.jstree touchstart.jstree",this.settings.dnd.large_drag_target?".jstree-node":".jstree-anchor",e.proxy(function(t){if(this.settings.dnd.large_drag_target&&e(t.target).closest(".jstree-node")[0]!==t.currentTarget)return!0;if("touchstart"===t.type&&(!this.settings.dnd.touch||"selected"===this.settings.dnd.touch&&!e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").hasClass("jstree-clicked")))return!0;var i=this.get_node(t.target),s=this.is_selected(i)&&this.settings.dnd.drag_selection?this.get_top_selected().length:1,a=s>1?s+" "+this.get_string("nodes"):this.get_text(t.currentTarget);if(this.settings.core.force_text&&(a=e.vakata.html.escape(a)),i&&i.id&&i.id!==e.jstree.root&&(1===t.which||"touchstart"===t.type||"dragstart"===t.type)&&(!0===this.settings.dnd.is_draggable||e.isFunction(this.settings.dnd.is_draggable)&&this.settings.dnd.is_draggable.call(this,s>1?this.get_top_selected(!0):[i],t))){if(c={jstree:!0,origin:this,obj:this.get_node(i,!0),nodes:s>1?this.get_top_selected():[i.id]},h=t.currentTarget,!this.settings.dnd.use_html5)return this.element.trigger("mousedown.jstree"),e.vakata.dnd.start(t,c,'<div id="jstree-dnd" class="jstree-'+this.get_theme()+" jstree-"+this.get_theme()+"-"+this.get_theme_variant()+" "+(this.settings.core.themes.responsive?" jstree-dnd-responsive":"")+'"><i class="jstree-icon jstree-er"></i>'+a+'<ins class="jstree-copy" style="display:none;">+</ins></div>');e.vakata.dnd._trigger("start",t,{helper:e(),element:h,data:c})}},this)),this.settings.dnd.use_html5&&this.element.on("dragover.jstree",function(t){return t.preventDefault(),e.vakata.dnd._trigger("move",t,{helper:e(),element:h,data:c}),!1}).on("drop.jstree",e.proxy(function(t){return t.preventDefault(),e.vakata.dnd._trigger("stop",t,{helper:e(),element:h,data:c}),!1},this))},this.redraw_node=function(e,t,s,a){if((e=i.redraw_node.apply(this,arguments))&&this.settings.dnd.use_html5)if(this.settings.dnd.large_drag_target)e.setAttribute("draggable",!0);else{var n,r,o=null;for(n=0,r=e.childNodes.length;n<r;n++)if(e.childNodes[n]&&e.childNodes[n].className&&-1!==e.childNodes[n].className.indexOf("jstree-anchor")){o=e.childNodes[n];break}o&&o.setAttribute("draggable",!0)}return e}},e(function(){var i=!1,s=!1,a=!1,n=!1,r=e('<div id="jstree-marker">&#160;</div>').hide();e(l).on("dnd_start.vakata.jstree",function(e,t){i=!1,a=!1,t&&t.data&&t.data.jstree&&r.appendTo("body")}).on("dnd_move.vakata.jstree",function(o,l){var d=l.event.target!==a.target;if(n&&(l.event&&"dragover"===l.event.type&&!d||clearTimeout(n)),l&&l.data&&l.data.jstree&&(!l.event.target.id||"jstree-marker"!==l.event.target.id)){a=l.event;var c,h,u,f,p,_,g,m,x,b,v,y,k,w,j,C,$=e.jstree.reference(l.event.target),T=!1,z=!1,D=!1;if($&&$._data&&$._data.dnd)if(r.attr("class","jstree-"+$.get_theme()+($.settings.core.themes.responsive?" jstree-dnd-responsive":"")),j=l.data.origin&&(l.data.origin.settings.dnd.always_copy||l.data.origin.settings.dnd.copy&&(l.event.metaKey||l.event.ctrlKey)),l.helper.children().attr("class","jstree-"+$.get_theme()+" jstree-"+$.get_theme()+"-"+$.get_theme_variant()+" "+($.settings.core.themes.responsive?" jstree-dnd-responsive":"")).find(".jstree-copy").first()[j?"show":"hide"](),l.event.target!==$.element[0]&&l.event.target!==$.get_container_ul()[0]||0!==$.get_container_ul().children().length){if((T=$.settings.dnd.large_drop_target?e(l.event.target).closest(".jstree-node").children(".jstree-anchor"):e(l.event.target).closest(".jstree-anchor"))&&T.length&&T.parent().is(".jstree-closed, .jstree-open, .jstree-leaf")&&(z=T.offset(),D=(l.event.pageY!==t?l.event.pageY:l.event.originalEvent.pageY)-z.top,u=T.outerHeight(),_=D<u/3?["b","i","a"]:D>u-u/3?["a","i","b"]:D>u/2?["i","a","b"]:["i","b","a"],e.each(_,function(t,a){switch(a){case"b":c=z.left-6,h=z.top,f=$.get_parent(T),p=T.parent().index();break;case"i":k=$.settings.dnd.inside_pos,w=$.get_node(T.parent()),c=z.left-2,h=z.top+u/2+1,f=w.id,p="first"===k?0:"last"===k?w.children.length:Math.min(k,w.children.length);break;case"a":c=z.left-6,h=z.top+u,f=$.get_parent(T),p=T.parent().index()+1}for(g=!0,m=0,x=l.data.nodes.length;m<x;m++)if(b=l.data.origin&&(l.data.origin.settings.dnd.always_copy||l.data.origin.settings.dnd.copy&&(l.event.metaKey||l.event.ctrlKey))?"copy_node":"move_node",v=p,"move_node"===b&&"a"===a&&l.data.origin&&l.data.origin===$&&f===$.get_parent(l.data.nodes[m])&&(y=$.get_node(f),v>e.inArray(l.data.nodes[m],y.children)&&(v-=1)),!(g=g&&($&&$.settings&&$.settings.dnd&&!1===$.settings.dnd.check_while_dragging||$.check(b,l.data.origin&&l.data.origin!==$?l.data.origin.get_node(l.data.nodes[m]):l.data.nodes[m],f,v,{dnd:!0,ref:$.get_node(T.parent()),pos:a,origin:l.data.origin,is_multi:l.data.origin&&l.data.origin!==$,is_foreign:!l.data.origin})))){$&&$.last_error&&(s=$.last_error());break}if("i"===a&&T.parent().is(".jstree-closed")&&$.settings.dnd.open_timeout&&(l.event&&"dragover"===l.event.type&&!d||(n&&clearTimeout(n),n=setTimeout(function(e,t){return function(){e.open_node(t)}}($,T),$.settings.dnd.open_timeout))),g)return C=$.get_node(f,!0),C.hasClass(".jstree-dnd-parent")||(e(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),C.addClass("jstree-dnd-parent")),i={ins:$,par:f,pos:"i"!==a||"last"!==k||0!==p||$.is_loaded(w)?p:"last"},r.css({left:c+"px",top:h+"px"}).show(),l.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),l.event.originalEvent&&l.event.originalEvent.dataTransfer&&(l.event.originalEvent.dataTransfer.dropEffect=j?"copy":"move"),s={},_=!0,!1}),!0===_))return}else{for(g=!0,m=0,x=l.data.nodes.length;m<x&&(g=g&&$.check(l.data.origin&&(l.data.origin.settings.dnd.always_copy||l.data.origin.settings.dnd.copy&&(l.event.metaKey||l.event.ctrlKey))?"copy_node":"move_node",l.data.origin&&l.data.origin!==$?l.data.origin.get_node(l.data.nodes[m]):l.data.nodes[m],e.jstree.root,"last",{dnd:!0,ref:$.get_node(e.jstree.root),pos:"i",origin:l.data.origin,is_multi:l.data.origin&&l.data.origin!==$,is_foreign:!l.data.origin}));m++);if(g)return i={ins:$,par:e.jstree.root,pos:"last"},r.hide(),l.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),void(l.event.originalEvent&&l.event.originalEvent.dataTransfer&&(l.event.originalEvent.dataTransfer.dropEffect=j?"copy":"move"))}e(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),i=!1,l.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er"),l.event.originalEvent&&l.event.originalEvent.dataTransfer&&(l.event.originalEvent.dataTransfer.dropEffect="none"),r.hide()}}).on("dnd_scroll.vakata.jstree",function(e,t){t&&t.data&&t.data.jstree&&(r.hide(),i=!1,a=!1,t.helper.find(".jstree-icon").first().removeClass("jstree-ok").addClass("jstree-er"))}).on("dnd_stop.vakata.jstree",function(t,o){if(e(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),n&&clearTimeout(n),o&&o.data&&o.data.jstree){r.hide().detach();var l,d,c=[];if(i){for(l=0,d=o.data.nodes.length;l<d;l++)c[l]=o.data.origin?o.data.origin.get_node(o.data.nodes[l]):o.data.nodes[l];i.ins[o.data.origin&&(o.data.origin.settings.dnd.always_copy||o.data.origin.settings.dnd.copy&&(o.event.metaKey||o.event.ctrlKey))?"copy_node":"move_node"](c,i.par,i.pos,!1,!1,!1,o.data.origin)}else l=e(o.event.target).closest(".jstree"),l.length&&s&&s.error&&"check"===s.error&&(l=l.jstree(!0))&&l.settings.core.error.call(this,s);a=!1,i=!1}}).on("keyup.jstree keydown.jstree",function(t,o){(o=e.vakata.dnd._get())&&o.data&&o.data.jstree&&("keyup"===t.type&&27===t.which?(n&&clearTimeout(n),i=!1,s=!1,a=!1,n=!1,r.hide().detach(),e.vakata.dnd._clean()):(o.helper.find(".jstree-copy").first()[o.data.origin&&(o.data.origin.settings.dnd.always_copy||o.data.origin.settings.dnd.copy&&(t.metaKey||t.ctrlKey))?"show":"hide"](),a&&(a.metaKey=t.metaKey,a.ctrlKey=t.ctrlKey,e.vakata.dnd._trigger("move",a))))})}),function(e){e.vakata.html={div:e("<div />"),escape:function(t){return e.vakata.html.div.text(t).html()},strip:function(t){return e.vakata.html.div.empty().append(e.parseHTML(t)).text()}};var i={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1};e.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5,threshold_touch:50},_trigger:function(i,s,a){a===t&&(a=e.vakata.dnd._get()),a.event=s,e(l).triggerHandler("dnd_"+i+".vakata",a)},_get:function(){return{data:i.data,element:i.element,helper:i.helper}},_clean:function(){i.helper&&i.helper.remove(),i.scroll_i&&(clearInterval(i.scroll_i),i.scroll_i=!1),i={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1},e(l).off("mousemove.vakata.jstree touchmove.vakata.jstree",e.vakata.dnd.drag),e(l).off("mouseup.vakata.jstree touchend.vakata.jstree",e.vakata.dnd.stop)},_scroll:function(t){if(!i.scroll_e||!i.scroll_l&&!i.scroll_t)return i.scroll_i&&(clearInterval(i.scroll_i),i.scroll_i=!1),!1;if(!i.scroll_i)return i.scroll_i=setInterval(e.vakata.dnd._scroll,100),!1;if(!0===t)return!1;var s=i.scroll_e.scrollTop(),a=i.scroll_e.scrollLeft();i.scroll_e.scrollTop(s+i.scroll_t*e.vakata.dnd.settings.scroll_speed),i.scroll_e.scrollLeft(a+i.scroll_l*e.vakata.dnd.settings.scroll_speed),s===i.scroll_e.scrollTop()&&a===i.scroll_e.scrollLeft()||e.vakata.dnd._trigger("scroll",i.scroll_e)},start:function(t,s,a){"touchstart"===t.type&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t.target=l.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)),i.is_drag&&e.vakata.dnd.stop({});try{t.currentTarget.unselectable="on",t.currentTarget.onselectstart=function(){return!1},t.currentTarget.style&&(t.currentTarget.style.touchAction="none",t.currentTarget.style.msTouchAction="none",t.currentTarget.style.MozUserSelect="none")}catch(e){}return i.init_x=t.pageX,i.init_y=t.pageY,i.data=s,i.is_down=!0,i.element=t.currentTarget,i.target=t.target,i.is_touch="touchstart"===t.type,!1!==a&&(i.helper=e("<div id='vakata-dnd'></div>").html(a).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"})),e(l).on("mousemove.vakata.jstree touchmove.vakata.jstree",e.vakata.dnd.drag),e(l).on("mouseup.vakata.jstree touchend.vakata.jstree",e.vakata.dnd.stop),!1},drag:function(t){if("touchmove"===t.type&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t.target=l.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)),i.is_down){if(!i.is_drag){if(!(Math.abs(t.pageX-i.init_x)>(i.is_touch?e.vakata.dnd.settings.threshold_touch:e.vakata.dnd.settings.threshold)||Math.abs(t.pageY-i.init_y)>(i.is_touch?e.vakata.dnd.settings.threshold_touch:e.vakata.dnd.settings.threshold)))return;i.helper&&(i.helper.appendTo("body"),i.helper_w=i.helper.outerWidth()),i.is_drag=!0,e(i.target).one("click.vakata",!1),e.vakata.dnd._trigger("start",t)}var s=!1,a=!1,n=!1,r=!1,o=!1,d=!1,c=!1,h=!1,u=!1,f=!1;return i.scroll_t=0,i.scroll_l=0,i.scroll_e=!1,e(e(t.target).parentsUntil("body").addBack().get().reverse()).filter(function(){return/^auto|scroll$/.test(e(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)}).each(function(){var s=e(this),a=s.offset();if(this.scrollHeight>this.offsetHeight&&(a.top+s.height()-t.pageY<e.vakata.dnd.settings.scroll_proximity&&(i.scroll_t=1),t.pageY-a.top<e.vakata.dnd.settings.scroll_proximity&&(i.scroll_t=-1)),this.scrollWidth>this.offsetWidth&&(a.left+s.width()-t.pageX<e.vakata.dnd.settings.scroll_proximity&&(i.scroll_l=1),t.pageX-a.left<e.vakata.dnd.settings.scroll_proximity&&(i.scroll_l=-1)),i.scroll_t||i.scroll_l)return i.scroll_e=e(this),!1}),i.scroll_e||(s=e(l),a=e(window),n=s.height(),r=a.height(),o=s.width(),d=a.width(),c=s.scrollTop(),h=s.scrollLeft(),n>r&&t.pageY-c<e.vakata.dnd.settings.scroll_proximity&&(i.scroll_t=-1),n>r&&r-(t.pageY-c)<e.vakata.dnd.settings.scroll_proximity&&(i.scroll_t=1),o>d&&t.pageX-h<e.vakata.dnd.settings.scroll_proximity&&(i.scroll_l=-1),o>d&&d-(t.pageX-h)<e.vakata.dnd.settings.scroll_proximity&&(i.scroll_l=1),(i.scroll_t||i.scroll_l)&&(i.scroll_e=s)),i.scroll_e&&e.vakata.dnd._scroll(!0),i.helper&&(u=parseInt(t.pageY+e.vakata.dnd.settings.helper_top,10),f=parseInt(t.pageX+e.vakata.dnd.settings.helper_left,10),n&&u+25>n&&(u=n-50),o&&f+i.helper_w>o&&(f=o-(i.helper_w+2)),i.helper.css({left:f+"px",top:u+"px"})),e.vakata.dnd._trigger("move",t),!1}},stop:function(t){if("touchend"===t.type&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t.target=l.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)),i.is_drag)t.target!==i.target&&e(i.target).off("click.vakata"),e.vakata.dnd._trigger("stop",t);else if("touchend"===t.type&&t.target===i.target){var s=setTimeout(function(){e(t.target).click()},100);e(t.target).one("click",function(){s&&clearTimeout(s)})}return e.vakata.dnd._clean(),!1}}}(e),e.jstree.defaults.massload=null,e.jstree.plugins.massload=function(t,i){this.init=function(e,t){this._data.massload={},i.init.call(this,e,t)},this._load_nodes=function(t,s,a,n){var r,o,l,d=this.settings.massload,c=(JSON.stringify(t),[]),h=this._model.data;if(!a){for(r=0,o=t.length;r<o;r++)h[t[r]]&&(h[t[r]].state.loaded||h[t[r]].state.failed)&&!n||(c.push(t[r]),(l=this.get_node(t[r],!0))&&l.length&&l.addClass("jstree-loading").attr("aria-busy",!0));if(this._data.massload={},c.length){if(e.isFunction(d))return d.call(this,c,e.proxy(function(e){var r,o;if(e)for(r in e)e.hasOwnProperty(r)&&(this._data.massload[r]=e[r]);for(r=0,o=t.length;r<o;r++)(l=this.get_node(t[r],!0))&&l.length&&l.removeClass("jstree-loading").attr("aria-busy",!1);i._load_nodes.call(this,t,s,a,n)},this));if("object"==typeof d&&d&&d.url)return d=e.extend(!0,{},d),e.isFunction(d.url)&&(d.url=d.url.call(this,c)),e.isFunction(d.data)&&(d.data=d.data.call(this,c)),e.ajax(d).done(e.proxy(function(e,r,o){var d,c;if(e)for(d in e)e.hasOwnProperty(d)&&(this._data.massload[d]=e[d]);for(d=0,c=t.length;d<c;d++)(l=this.get_node(t[d],!0))&&l.length&&l.removeClass("jstree-loading").attr("aria-busy",!1);i._load_nodes.call(this,t,s,a,n)},this)).fail(e.proxy(function(e){i._load_nodes.call(this,t,s,a,n)},this))}}return i._load_nodes.call(this,t,s,a,n)},this._load_node=function(t,s){var a,n=this._data.massload[t.id],r=null;return n?(r=this["string"==typeof n?"_append_html_data":"_append_json_data"](t,"string"==typeof n?e(e.parseHTML(n)).filter(function(){return 3!==this.nodeType}):n,function(e){s.call(this,e)}),a=this.get_node(t.id,!0),a&&a.length&&a.removeClass("jstree-loading").attr("aria-busy",!1),delete this._data.massload[t.id],r):i._load_node.call(this,t,s)}},e.jstree.defaults.search={ajax:!1,fuzzy:!1,case_sensitive:!1,show_only_matches:!1,show_only_matches_children:!1,close_opened_onclear:!0,search_leaves_only:!1,search_callback:!1},e.jstree.plugins.search=function(i,s){this.bind=function(){s.bind.call(this),this._data.search.str="",this._data.search.dom=e(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=!1,this._data.search.smc=!1,this._data.search.hdn=[],this.element.on("search.jstree",e.proxy(function(t,i){if(this._data.search.som&&i.res.length){var s,a,n,r,o=this._model.data,l=[];for(s=0,a=i.res.length;s<a;s++)if(o[i.res[s]]&&!o[i.res[s]].state.hidden&&(l.push(i.res[s]),l=l.concat(o[i.res[s]].parents),this._data.search.smc))for(n=0,r=o[i.res[s]].children_d.length;n<r;n++)o[o[i.res[s]].children_d[n]]&&!o[o[i.res[s]].children_d[n]].state.hidden&&l.push(o[i.res[s]].children_d[n]);l=e.vakata.array_remove_item(e.vakata.array_unique(l),e.jstree.root),this._data.search.hdn=this.hide_all(!0),this.show_node(l,!0),this.redraw(!0)}},this)).on("clear_search.jstree",e.proxy(function(e,t){this._data.search.som&&t.res.length&&(this.show_node(this._data.search.hdn,!0),this.redraw(!0))},this))},this.search=function(i,s,a,n,r,o){if(!1===i||""===e.trim(i.toString()))return this.clear_search();n=this.get_node(n),n=n&&n.id?n.id:null,i=i.toString();var l,d,c=this.settings.search,h=!!c.ajax&&c.ajax,u=this._model.data,f=null,p=[],_=[];if(this._data.search.res.length&&!r&&this.clear_search(),a===t&&(a=c.show_only_matches),o===t&&(o=c.show_only_matches_children),!s&&!1!==h)return e.isFunction(h)?h.call(this,i,e.proxy(function(t){t&&t.d&&(t=t.d),this._load_nodes(e.isArray(t)?e.vakata.array_unique(t):[],function(){this.search(i,!0,a,n,r,o)})},this),n):(h=e.extend({},h),h.data||(h.data={}),h.data.str=i,n&&(h.data.inside=n),this._data.search.lastRequest&&this._data.search.lastRequest.abort(),this._data.search.lastRequest=e.ajax(h).fail(e.proxy(function(){this._data.core.last_error={error:"ajax",plugin:"search",id:"search_01",reason:"Could not load search parents",data:JSON.stringify(h)},this.settings.core.error.call(this,this._data.core.last_error)},this)).done(e.proxy(function(t){t&&t.d&&(t=t.d),this._load_nodes(e.isArray(t)?e.vakata.array_unique(t):[],function(){this.search(i,!0,a,n,r,o)})},this)),this._data.search.lastRequest);if(r||(this._data.search.str=i,this._data.search.dom=e(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=a,this._data.search.smc=o),f=new e.vakata.search(i,!0,{caseSensitive:c.case_sensitive,fuzzy:c.fuzzy}),e.each(u[n||e.jstree.root].children_d,function(e,t){var s=u[t];s.text&&!s.state.hidden&&(!c.search_leaves_only||s.state.loaded&&0===s.children.length)&&(c.search_callback&&c.search_callback.call(this,i,s)||!c.search_callback&&f.search(s.text).isMatch)&&(p.push(t),_=_.concat(s.parents))}),p.length){for(_=e.vakata.array_unique(_),l=0,d=_.length;l<d;l++)_[l]!==e.jstree.root&&u[_[l]]&&!0===this.open_node(_[l],null,0)&&this._data.search.opn.push(_[l]);r?(this._data.search.dom=this._data.search.dom.add(e(this.element[0].querySelectorAll("#"+e.map(p,function(t){return-1!=="0123456789".indexOf(t[0])?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")}).join(", #")))),this._data.search.res=e.vakata.array_unique(this._data.search.res.concat(p))):(this._data.search.dom=e(this.element[0].querySelectorAll("#"+e.map(p,function(t){return-1!=="0123456789".indexOf(t[0])?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.res=p),this._data.search.dom.children(".jstree-anchor").addClass("jstree-search")}this.trigger("search",{nodes:this._data.search.dom,str:i,res:this._data.search.res,show_only_matches:a})},this.clear_search=function(){this.settings.search.close_opened_onclear&&this.close_node(this._data.search.opn,0),this.trigger("clear_search",{nodes:this._data.search.dom,str:this._data.search.str,res:this._data.search.res}),this._data.search.res.length&&(this._data.search.dom=e(this.element[0].querySelectorAll("#"+e.map(this._data.search.res,function(t){return-1!=="0123456789".indexOf(t[0])?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search")),this._data.search.str="",this._data.search.res=[],this._data.search.opn=[],this._data.search.dom=e()},this.redraw_node=function(t,i,a,n){if((t=s.redraw_node.apply(this,arguments))&&-1!==e.inArray(t.id,this._data.search.res)){var r,o,l=null;for(r=0,o=t.childNodes.length;r<o;r++)if(t.childNodes[r]&&t.childNodes[r].className&&-1!==t.childNodes[r].className.indexOf("jstree-anchor")){l=t.childNodes[r];break}l&&(l.className+=" jstree-search")}return t}},function(e){
e.vakata.search=function(t,i,s){s=s||{},s=e.extend({},e.vakata.search.defaults,s),!1!==s.fuzzy&&(s.fuzzy=!0),t=s.caseSensitive?t:t.toLowerCase();var a,n,r,o,l=s.location,d=s.distance,c=s.threshold,h=t.length;return h>32&&(s.fuzzy=!1),s.fuzzy&&(a=1<<h-1,n=function(){var e={},i=0;for(i=0;i<h;i++)e[t.charAt(i)]=0;for(i=0;i<h;i++)e[t.charAt(i)]|=1<<h-i-1;return e}(),r=function(e,t){var i=e/h,s=Math.abs(l-t);return d?i+s/d:s?1:i}),o=function(e){if(e=s.caseSensitive?e:e.toLowerCase(),t===e||-1!==e.indexOf(t))return{isMatch:!0,score:0};if(!s.fuzzy)return{isMatch:!1,score:1};var i,o,d,u,f,p,_,g,m,x=e.length,b=c,v=e.indexOf(t,l),y=h+x,k=1,w=[];for(-1!==v&&(b=Math.min(r(0,v),b),-1!==(v=e.lastIndexOf(t,l+h))&&(b=Math.min(r(0,v),b))),v=-1,i=0;i<h;i++){for(d=0,u=y;d<u;)r(i,l+u)<=b?d=u:y=u,u=Math.floor((y-d)/2+d);for(y=u,p=Math.max(1,l-u+1),_=Math.min(l+u,x)+h,g=new Array(_+2),g[_+1]=(1<<i)-1,o=_;o>=p;o--)if(m=n[e.charAt(o-1)],g[o]=0===i?(g[o+1]<<1|1)&m:(g[o+1]<<1|1)&m|(f[o+1]|f[o])<<1|1|f[o+1],g[o]&a&&(k=r(i,o-1))<=b){if(b=k,v=o-1,w.push(v),!(v>l))break;p=Math.max(1,2*l-v)}if(r(i+1,l)>b)break;f=g}return{isMatch:v>=0,score:k}},!0===i?{search:o}:o(i)},e.vakata.search.defaults={location:0,distance:100,threshold:.6,fuzzy:!1,caseSensitive:!1}}(e),e.jstree.defaults.sort=function(e,t){return this.get_text(e)>this.get_text(t)?1:-1},e.jstree.plugins.sort=function(t,i){this.bind=function(){i.bind.call(this),this.element.on("model.jstree",e.proxy(function(e,t){this.sort(t.parent,!0)},this)).on("rename_node.jstree create_node.jstree",e.proxy(function(e,t){this.sort(t.parent||t.node.parent,!1),this.redraw_node(t.parent||t.node.parent,!0)},this)).on("move_node.jstree copy_node.jstree",e.proxy(function(e,t){this.sort(t.parent,!1),this.redraw_node(t.parent,!0)},this))},this.sort=function(t,i){var s,a;if((t=this.get_node(t))&&t.children&&t.children.length&&(t.children.sort(e.proxy(this.settings.sort,this)),i))for(s=0,a=t.children_d.length;s<a;s++)this.sort(t.children_d[s],!1)}};var u=!1;e.jstree.defaults.state={key:"jstree",events:"changed.jstree open_node.jstree close_node.jstree check_node.jstree uncheck_node.jstree",ttl:!1,filter:!1},e.jstree.plugins.state=function(t,i){this.bind=function(){i.bind.call(this);var t=e.proxy(function(){this.element.on(this.settings.state.events,e.proxy(function(){u&&clearTimeout(u),u=setTimeout(e.proxy(function(){this.save_state()},this),100)},this)),this.trigger("state_ready")},this);this.element.on("ready.jstree",e.proxy(function(e,i){this.element.one("restore_state.jstree",t),this.restore_state()||t()},this))},this.save_state=function(){var t={state:this.get_state(),ttl:this.settings.state.ttl,sec:+new Date};e.vakata.storage.set(this.settings.state.key,JSON.stringify(t))},this.restore_state=function(){var t=e.vakata.storage.get(this.settings.state.key);if(t)try{t=JSON.parse(t)}catch(e){return!1}return!(t&&t.ttl&&t.sec&&+new Date-t.sec>t.ttl)&&(t&&t.state&&(t=t.state),t&&e.isFunction(this.settings.state.filter)&&(t=this.settings.state.filter.call(this,t)),!!t&&(this.element.one("set_state.jstree",function(i,s){s.instance.trigger("restore_state",{state:e.extend(!0,{},t)})}),this.set_state(t),!0))},this.clear_state=function(){return e.vakata.storage.del(this.settings.state.key)}},function(e,t){e.vakata.storage={set:function(e,t){return window.localStorage.setItem(e,t)},get:function(e){return window.localStorage.getItem(e)},del:function(e){return window.localStorage.removeItem(e)}}}(e),e.jstree.defaults.types={default:{}},e.jstree.defaults.types[e.jstree.root]={},e.jstree.plugins.types=function(i,s){this.init=function(i,a){var n,r;if(a&&a.types&&a.types.default)for(n in a.types)if("default"!==n&&n!==e.jstree.root&&a.types.hasOwnProperty(n))for(r in a.types.default)a.types.default.hasOwnProperty(r)&&a.types[n][r]===t&&(a.types[n][r]=a.types.default[r]);s.init.call(this,i,a),this._model.data[e.jstree.root].type=e.jstree.root},this.refresh=function(t,i){s.refresh.call(this,t,i),this._model.data[e.jstree.root].type=e.jstree.root},this.bind=function(){this.element.on("model.jstree",e.proxy(function(i,s){var a,n,r,o=this._model.data,l=s.nodes,d=this.settings.types,c="default";for(a=0,n=l.length;a<n;a++){if(c="default",o[l[a]].original&&o[l[a]].original.type&&d[o[l[a]].original.type]&&(c=o[l[a]].original.type),o[l[a]].data&&o[l[a]].data.jstree&&o[l[a]].data.jstree.type&&d[o[l[a]].data.jstree.type]&&(c=o[l[a]].data.jstree.type),o[l[a]].type=c,!0===o[l[a]].icon&&d[c].icon!==t&&(o[l[a]].icon=d[c].icon),d[c].li_attr!==t&&"object"==typeof d[c].li_attr)for(r in d[c].li_attr)if(d[c].li_attr.hasOwnProperty(r)){if("id"===r)continue;o[l[a]].li_attr[r]===t?o[l[a]].li_attr[r]=d[c].li_attr[r]:"class"===r&&(o[l[a]].li_attr.class=d[c].li_attr.class+" "+o[l[a]].li_attr.class)}if(d[c].a_attr!==t&&"object"==typeof d[c].a_attr)for(r in d[c].a_attr)if(d[c].a_attr.hasOwnProperty(r)){if("id"===r)continue;o[l[a]].a_attr[r]===t?o[l[a]].a_attr[r]=d[c].a_attr[r]:"href"===r&&"#"===o[l[a]].a_attr[r]?o[l[a]].a_attr.href=d[c].a_attr.href:"class"===r&&(o[l[a]].a_attr.class=d[c].a_attr.class+" "+o[l[a]].a_attr.class)}}o[e.jstree.root].type=e.jstree.root},this)),s.bind.call(this)},this.get_json=function(t,i,a){var n,r,o=this._model.data,l=i?e.extend(!0,{},i,{no_id:!1}):{},d=s.get_json.call(this,t,l,a);if(!1===d)return!1;if(e.isArray(d))for(n=0,r=d.length;n<r;n++)d[n].type=d[n].id&&o[d[n].id]&&o[d[n].id].type?o[d[n].id].type:"default",i&&i.no_id&&(delete d[n].id,d[n].li_attr&&d[n].li_attr.id&&delete d[n].li_attr.id,d[n].a_attr&&d[n].a_attr.id&&delete d[n].a_attr.id);else d.type=d.id&&o[d.id]&&o[d.id].type?o[d.id].type:"default",i&&i.no_id&&(d=this._delete_ids(d));return d},this._delete_ids=function(t){if(e.isArray(t)){for(var i=0,s=t.length;i<s;i++)t[i]=this._delete_ids(t[i]);return t}return delete t.id,t.li_attr&&t.li_attr.id&&delete t.li_attr.id,t.a_attr&&t.a_attr.id&&delete t.a_attr.id,t.children&&e.isArray(t.children)&&(t.children=this._delete_ids(t.children)),t},this.check=function(i,a,n,r,o){if(!1===s.check.call(this,i,a,n,r,o))return!1;a=a&&a.id?a:this.get_node(a),n=n&&n.id?n:this.get_node(n);var l,d,c,h,u=a&&a.id?o&&o.origin?o.origin:e.jstree.reference(a.id):null;switch(u=u&&u._model&&u._model.data?u._model.data:null,i){case"create_node":case"move_node":case"copy_node":if("move_node"!==i||-1===e.inArray(a.id,n.children)){if(l=this.get_rules(n),l.max_children!==t&&-1!==l.max_children&&l.max_children===n.children.length)return this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+i,data:JSON.stringify({chk:i,pos:r,obj:!(!a||!a.id)&&a.id,par:!(!n||!n.id)&&n.id})},!1;if(l.valid_children!==t&&-1!==l.valid_children&&-1===e.inArray(a.type||"default",l.valid_children))return this._data.core.last_error={error:"check",plugin:"types",id:"types_02",reason:"valid_children prevents function: "+i,data:JSON.stringify({chk:i,pos:r,obj:!(!a||!a.id)&&a.id,par:!(!n||!n.id)&&n.id})},!1;if(u&&a.children_d&&a.parents){for(d=0,c=0,h=a.children_d.length;c<h;c++)d=Math.max(d,u[a.children_d[c]].parents.length);d=d-a.parents.length+1}(d<=0||d===t)&&(d=1);do{if(l.max_depth!==t&&-1!==l.max_depth&&l.max_depth<d)return this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+i,data:JSON.stringify({chk:i,pos:r,obj:!(!a||!a.id)&&a.id,par:!(!n||!n.id)&&n.id})},!1;n=this.get_node(n.parent),l=this.get_rules(n),d++}while(n)}}return!0},this.get_rules=function(e){if(!(e=this.get_node(e)))return!1;var i=this.get_type(e,!0);return i.max_depth===t&&(i.max_depth=-1),i.max_children===t&&(i.max_children=-1),i.valid_children===t&&(i.valid_children=-1),i},this.get_type=function(t,i){return!!(t=this.get_node(t))&&(i?e.extend({type:t.type},this.settings.types[t.type]):t.type)},this.set_type=function(i,s){var a,n,r,o,l,d,c,h,u=this._model.data;if(e.isArray(i)){for(i=i.slice(),n=0,r=i.length;n<r;n++)this.set_type(i[n],s);return!0}if(a=this.settings.types,i=this.get_node(i),!a[s]||!i)return!1;if(c=this.get_node(i,!0),c&&c.length&&(h=c.children(".jstree-anchor")),o=i.type,l=this.get_icon(i),i.type=s,(!0===l||!a[o]||a[o].icon!==t&&l===a[o].icon)&&this.set_icon(i,a[s].icon===t||a[s].icon),a[o]&&a[o].li_attr!==t&&"object"==typeof a[o].li_attr)for(d in a[o].li_attr)if(a[o].li_attr.hasOwnProperty(d)){if("id"===d)continue;"class"===d?(u[i.id].li_attr.class=(u[i.id].li_attr.class||"").replace(a[o].li_attr[d],""),c&&c.removeClass(a[o].li_attr[d])):u[i.id].li_attr[d]===a[o].li_attr[d]&&(u[i.id].li_attr[d]=null,c&&c.removeAttr(d))}if(a[o]&&a[o].a_attr!==t&&"object"==typeof a[o].a_attr)for(d in a[o].a_attr)if(a[o].a_attr.hasOwnProperty(d)){if("id"===d)continue;"class"===d?(u[i.id].a_attr.class=(u[i.id].a_attr.class||"").replace(a[o].a_attr[d],""),h&&h.removeClass(a[o].a_attr[d])):u[i.id].a_attr[d]===a[o].a_attr[d]&&("href"===d?(u[i.id].a_attr[d]="#",h&&h.attr("href","#")):(delete u[i.id].a_attr[d],h&&h.removeAttr(d)))}if(a[s].li_attr!==t&&"object"==typeof a[s].li_attr)for(d in a[s].li_attr)if(a[s].li_attr.hasOwnProperty(d)){if("id"===d)continue;u[i.id].li_attr[d]===t?(u[i.id].li_attr[d]=a[s].li_attr[d],c&&("class"===d?c.addClass(a[s].li_attr[d]):c.attr(d,a[s].li_attr[d]))):"class"===d&&(u[i.id].li_attr.class=a[s].li_attr[d]+" "+u[i.id].li_attr.class,c&&c.addClass(a[s].li_attr[d]))}if(a[s].a_attr!==t&&"object"==typeof a[s].a_attr)for(d in a[s].a_attr)if(a[s].a_attr.hasOwnProperty(d)){if("id"===d)continue;u[i.id].a_attr[d]===t?(u[i.id].a_attr[d]=a[s].a_attr[d],h&&("class"===d?h.addClass(a[s].a_attr[d]):h.attr(d,a[s].a_attr[d]))):"href"===d&&"#"===u[i.id].a_attr[d]?(u[i.id].a_attr.href=a[s].a_attr.href,h&&h.attr("href",a[s].a_attr.href)):"class"===d&&(u[i.id].a_attr.class=a[s].a_attr.class+" "+u[i.id].a_attr.class,h&&h.addClass(a[s].a_attr[d]))}return!0}},e.jstree.defaults.unique={case_sensitive:!1,duplicate:function(e,t){return e+" ("+t+")"}},e.jstree.plugins.unique=function(i,s){this.check=function(t,i,a,n,r){if(!1===s.check.call(this,t,i,a,n,r))return!1;if(i=i&&i.id?i:this.get_node(i),!(a=a&&a.id?a:this.get_node(a))||!a.children)return!0;var o,l,d="rename_node"===t?n:i.text,c=[],h=this.settings.unique.case_sensitive,u=this._model.data;for(o=0,l=a.children.length;o<l;o++)c.push(h?u[a.children[o]].text:u[a.children[o]].text.toLowerCase());switch(h||(d=d.toLowerCase()),t){case"delete_node":return!0;case"rename_node":return o=-1===e.inArray(d,c)||i.text&&i.text[h?"toString":"toLowerCase"]()===d,o||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+d+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:n,obj:!(!i||!i.id)&&i.id,par:!(!a||!a.id)&&a.id})}),o;case"create_node":return o=-1===e.inArray(d,c),o||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_04",reason:"Child with name "+d+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:n,obj:!(!i||!i.id)&&i.id,par:!(!a||!a.id)&&a.id})}),o;case"copy_node":return o=-1===e.inArray(d,c),o||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_02",reason:"Child with name "+d+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:n,obj:!(!i||!i.id)&&i.id,par:!(!a||!a.id)&&a.id})}),o;case"move_node":return o=i.parent===a.id&&(!r||!r.is_multi)||-1===e.inArray(d,c),o||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_03",reason:"Child with name "+d+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:n,obj:!(!i||!i.id)&&i.id,par:!(!a||!a.id)&&a.id})}),o}return!0},this.create_node=function(i,a,n,r,o){if(!a||a.text===t){if(null===i&&(i=e.jstree.root),!(i=this.get_node(i)))return s.create_node.call(this,i,a,n,r,o);if(n=n===t?"last":n,!n.toString().match(/^(before|after)$/)&&!o&&!this.is_loaded(i))return s.create_node.call(this,i,a,n,r,o);a||(a={});var l,d,c,h,u,f=this._model.data,p=this.settings.unique.case_sensitive,_=this.settings.unique.duplicate;for(d=l=this.get_string("New node"),c=[],h=0,u=i.children.length;h<u;h++)c.push(p?f[i.children[h]].text:f[i.children[h]].text.toLowerCase());for(h=1;-1!==e.inArray(p?d:d.toLowerCase(),c);)d=_.call(this,l,++h).toString();a.text=d}return s.create_node.call(this,i,a,n,r,o)}};var f=l.createElement("DIV");if(f.setAttribute("unselectable","on"),f.setAttribute("role","presentation"),f.className="jstree-wholerow",f.innerHTML="&#160;",e.jstree.plugins.wholerow=function(t,i){this.bind=function(){i.bind.call(this),this.element.on("ready.jstree set_state.jstree",e.proxy(function(){this.hide_dots()},this)).on("init.jstree loading.jstree ready.jstree",e.proxy(function(){this.get_container_ul().addClass("jstree-wholerow-ul")},this)).on("deselect_all.jstree",e.proxy(function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")},this)).on("changed.jstree",e.proxy(function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");var i,s,a=!1;for(i=0,s=t.selected.length;i<s;i++)(a=this.get_node(t.selected[i],!0))&&a.length&&a.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("open_node.jstree",e.proxy(function(e,t){this.get_node(t.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("hover_node.jstree dehover_node.jstree",e.proxy(function(e,t){"hover_node"===e.type&&this.is_disabled(t.node)||this.get_node(t.node,!0).children(".jstree-wholerow")["hover_node"===e.type?"addClass":"removeClass"]("jstree-wholerow-hovered")},this)).on("contextmenu.jstree",".jstree-wholerow",e.proxy(function(t){if(this._data.contextmenu){t.preventDefault();var i=e.Event("contextmenu",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,pageX:t.pageX,pageY:t.pageY});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(i)}},this)).on("click.jstree",".jstree-wholerow",function(t){t.stopImmediatePropagation();var i=e.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(i).focus()}).on("dblclick.jstree",".jstree-wholerow",function(t){t.stopImmediatePropagation();var i=e.Event("dblclick",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(i).focus()}).on("click.jstree",".jstree-leaf > .jstree-ocl",e.proxy(function(t){t.stopImmediatePropagation();var i=e.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(i).focus()},this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",e.proxy(function(e){return e.stopImmediatePropagation(),this.is_disabled(e.currentTarget)||this.hover_node(e.currentTarget),!1},this)).on("mouseleave.jstree",".jstree-node",e.proxy(function(e){this.dehover_node(e.currentTarget)},this))},this.teardown=function(){this.settings.wholerow&&this.element.find(".jstree-wholerow").remove(),i.teardown.call(this)},this.redraw_node=function(t,s,a,n){if(t=i.redraw_node.apply(this,arguments)){var r=f.cloneNode(!0);-1!==e.inArray(t.id,this._data.core.selected)&&(r.className+=" jstree-wholerow-clicked"),this._data.core.focused&&this._data.core.focused===t.id&&(r.className+=" jstree-wholerow-hovered"),t.insertBefore(r,t.childNodes[0])}return t}},l.registerElement&&Object&&Object.create){var p=Object.create(HTMLElement.prototype);p.createdCallback=function(){var t,i={core:{},plugins:[]};for(t in e.jstree.plugins)e.jstree.plugins.hasOwnProperty(t)&&this.attributes[t]&&(i.plugins.push(t),this.getAttribute(t)&&JSON.parse(this.getAttribute(t))&&(i[t]=JSON.parse(this.getAttribute(t))));for(t in e.jstree.defaults.core)e.jstree.defaults.core.hasOwnProperty(t)&&this.attributes[t]&&(i.core[t]=JSON.parse(this.getAttribute(t))||this.getAttribute(t));e(this).jstree(i)};try{l.registerElement("vakata-jstree",{prototype:p})}catch(e){}}}})},function(e,s){"use strict";var a=function(e,t){return function(){return e.apply(t,arguments)}};!function(s){"object"==typeof e&&e.exports?e.exports=s(t(3)):"function"==typeof i&&i.amd?i(["jquery"],s):s(jQuery)}(function(e){var t;return t=function(){function t(t){this.render=a(this.render,this),this.hideTooltip=a(this.hideTooltip,this),this.showTooltip=a(this.showTooltip,this),this.replaceCharacters=a(this.replaceCharacters,this),this.log=a(this.log,this),this.settings=e.extend({},this.defaults,t),this.render()}return t.prototype.defaults={action:"focus",debug:!1,element:".error",fadeSpeed:200,html5:!0,preventDefault:!1,removeAll:!1,removeSpecific:!1,tailLength:14,tooltipClass:""},t.prototype.log=function(e){return this.settings.debug&&"undefined"!=typeof console&&null!==console?console.info(e):void 0},t.prototype.replaceCharacters=function(e){var t,i,s,a,n,r,o;s=[],r=[],i=[],n=[],t=e.split("");for(a in t)o=t[a],"^"===o&&s.push(a),"*"===o&&r.push(a),"~"===o&&i.push(a),"`"===o&&n.push(a),"|"===o&&(t[a]="<br />"),"{"===o&&(t[a]="<ul>"),"}"===o&&(t[a]="</ul>");for(;s.length>1;)t[s[0]]="<h1>",t[s[1]]="</h1>",s.splice(0,2);for(;r.length>1;)t[r[0]]="<strong>",t[r[1]]="</strong>",r.splice(0,2);for(;i.length>1;)t[i[0]]="<em>",t[i[1]]="</em>",i.splice(0,2);for(;n.length;)t[n[0]]="<li>",n.splice(0,1);return t.join("")},t.prototype.showTooltip=function(t){var i,s,a,n,r,o,l,d,c,h,u;if(t.attr("data-tooltip")){switch(this.hideTooltip(),n=this.replaceCharacters(t.attr("data-tooltip")),i=t.attr("data-tooltip-direction"),d=this.settings.html5?"<aside>":"<div>",e(d).addClass("tooltip "+this.settings.tooltipClass).html(n).appendTo("body"),a=t.outerWidth(),s=t.outerHeight(),h=e(".tooltip:last").outerWidth(),c=e(".tooltip:last").outerHeight(),o=t.offset(),u=o.top,r=0,l=0,i){case"left":l=o.left-h-this.settings.tailLength,u=u-c/2+s/2,e(".tooltip:last").css({left:l,top:u}).addClass("left").fadeIn(this.settings.fadeSpeed);break;case"bottom":u=o.top+s+this.settings.tailLength,r=o.left+a/2-h/2,e(".tooltip:last").css({left:r,top:u}).addClass("bottom").fadeIn(this.settings.fadeSpeed);break;case"top":u=o.top-c-this.settings.tailLength,r=o.left+a/2-h/2,e(".tooltip:last").css({left:r,top:u}).addClass("top").fadeIn(this.settings.fadeSpeed);break;default:r=o.left+a+this.settings.tailLength,u=u-c/2+s/2,e(".tooltip:last").css({left:r,top:u}).fadeIn(this.settings.fadeSpeed)}if(this.settings.debug&&(this.log("Tooltip Content: "+n),a&&this.log("Element Width: "+a),s&&this.log("Element Height: "+s),u&&this.log("Element Top Position: "+u),r&&this.log("Element Left Position: "+r),l&&this.log("Element Right Position: "+l),h&&this.log("Tooltip Width: "+h),c))return this.log("Tooltip Height: "+c)}},t.prototype.hideTooltip=function(){return e(".tooltip").fadeOut(this.settings.fadeSpeed,function(){return e(this).remove()})},t.prototype.render=function(){var t,i;if(t=this,i=t.settings.element,t.settings.removeSpecific&&!t.settings.removeAll&&(t.settings.debug&&t.log("unbinding tooltip"),t.settings.action&&i))switch(t.settings.action){case"click":e(document).off("click.tips.cd",i),e(document).off("blur.tips.bc",i);break;case"hover":e(document).off("click.tips.hc",i),e(document).off("mouseenter.tips.he",i),e(document).off("mouseout.tips.ho",i);break;default:e(document).off("click.tips.fc",i),e(document).off("focus.tips.ff",i),e(document).off("blur.tips.fb",i),e(document).off("change.tips.fch",i)}if(t.settings.removeAll&&(t.settings.debug&&t.log("removing all tooltip binding"),e(document).off("click.tips"),e(document).off("blur.tips"),e(document).off("mouseenter.tips"),e(document).off("mouseout.tips"),e(document).off("change.tips")),!t.settings.removeAll&&!t.settings.removeSpecific)switch(t.settings.action){case"click":return e(document).on("click.tips.cc",i,function(i){return t.settings.preventDefault&&i.preventDefault(),e(this).is(":input")||e(this).attr("tabindex")||e(this).attr("tabindex",0).focus(),t.showTooltip(e(this))}),e(document).on("blur.tips.bc",i,function(i){return e(this).is(":input")||e(this).attr("tabindex")||e(this).removeAttr("tabindex"),t.hideTooltip()});case"hover":return e(document).on("click.tips.hc",i,function(e){return t.settings.preventDefault?e.preventDefault():void 0}),e(document).on("mouseenter.tips.he",i,function(i){return t.showTooltip(e(this))}),e(document).on("mouseout.tips.ho",i,function(e){return t.hideTooltip()});default:return e(document).on("click.tips.fc",i,function(e){return t.settings.preventDefault?e.preventDefault():void 0}),e(document).on("focus.tips.ff",i,function(i){return t.showTooltip(e(this))}),e(document).on("blur.tips.fb",i,function(e){return t.hideTooltip()}),e(document).on("change.tips.fch",i,function(e){return t.hideTooltip()})}},t}(),e.extend({tips:function(e,i){return this(function(){return new t(e),"function"==typeof i?i.call(this):void 0})}})})},function(e,i){t(13),t(14),t(15);var s=t(16);t(17),t(18),t(19),t(20),t(21),t(22),t(23),t(24),t(25),t(26),t(27),t(29),t(30),t(31);var a={theme:"blue",codepoints:t(7),alert:s.alert,confirm:s.confirm,Tooltip:t(28)};window.bizui=a,e.exports=a},function(e,t){e.exports={"3d_rotation":"&#xe84d;",ac_unit:"&#xeb3b;",access_alarms:"&#xe191;",access_time:"&#xe192;",accessibility:"&#xe84e;",accessible:"&#xe914;",account_balance:"&#xe84f;",account_balance_wallet:"&#xe850;",account_box:"&#xe851;",account_circle:"&#xe853;",adb:"&#xe60e;",add:"&#xe145;",add_a_photo:"&#xe439;",add_alarm:"&#xe193;",add_alert:"&#xe003;",add_box:"&#xe146;",add_circle:"&#xe147;",add_circle_outline:"&#xe148;",add_location:"&#xe567;",add_shopping_cart:"&#xe854;",add_to_photos:"&#xe39d;",add_to_queue:"&#xe05c;",adjust:"&#xe39e;",airline_seat_flat:"&#xe630;",airline_seat_flat_angled:"&#xe631;",airline_seat_individual_suite:"&#xe632;",airline_seat_legroom_extra:"&#xe633;",airline_seat_legroom_normal:"&#xe634;",airline_seat_legroom_reduced:"&#xe635;",airline_seat_recline_extra:"&#xe636;",airline_seat_recline_normal:"&#xe637;",airplanemode_active:"&#xe195;",airplanemode_inactive:"&#xe194;",airplay:"&#xe055;",airport_shuttle:"&#xeb3c;",alarm:"&#xe855;",alarm_add:"&#xe856;",alarm_off:"&#xe857;",alarm_on:"&#xe858;",album:"&#xe019;",all_inclusive:"&#xeb3d;",all_out:"&#xe90b;",android:"&#xe859;",announcement:"&#xe85a;",apps:"&#xe5c3;",archive:"&#xe149;",arrow_back:"&#xe5c4;",arrow_downward:"&#xe5db;",arrow_drop_down:"&#xe5c5;",arrow_drop_down_circle:"&#xe5c6;",arrow_drop_up:"&#xe5c7;",arrow_forward:"&#xe5c8;",arrow_upward:"&#xe5d8;",art_track:"&#xe060;",aspect_ratio:"&#xe85b;",assessment:"&#xe85c;",assignment:"&#xe85d;",assignment_ind:"&#xe85e;",assignment_late:"&#xe85f;",assignment_return:"&#xe860;",assignment_returned:"&#xe861;",assignment_turned_in:"&#xe862;",assistant:"&#xe39f;",assistant_photo:"&#xe3a0;",attach_file:"&#xe226;",attach_money:"&#xe227;",attachment:"&#xe2bc;",audiotrack:"&#xe3a1;",autorenew:"&#xe863;",av_timer:"&#xe01b;",access_alarm:"&#xe190;",backup:"&#xe864;",battery_alert:"&#xe19c;",battery_full:"&#xe1a4;",battery_std:"&#xe1a5;",battery_unknown:"&#xe1a6;",beach_access:"&#xeb3e;",beenhere:"&#xe52d;",block:"&#xe14b;",bluetooth:"&#xe1a7;",bluetooth_audio:"&#xe60f;",bluetooth_connected:"&#xe1a8;",bluetooth_disabled:"&#xe1a9;",bluetooth_searching:"&#xe1aa;",blur_circular:"&#xe3a2;",blur_linear:"&#xe3a3;",blur_off:"&#xe3a4;",blur_on:"&#xe3a5;",book:"&#xe865;",bookmark:"&#xe866;",bookmark_border:"&#xe867;",border_all:"&#xe228;",border_bottom:"&#xe229;",border_clear:"&#xe22a;",border_color:"&#xe22b;",border_horizontal:"&#xe22c;",border_inner:"&#xe22d;",border_left:"&#xe22e;",border_outer:"&#xe22f;",border_right:"&#xe230;",border_style:"&#xe231;",border_top:"&#xe232;",border_vertical:"&#xe233;",branding_watermark:"&#xe06b;",brightness_1:"&#xe3a6;",brightness_2:"&#xe3a7;",brightness_3:"&#xe3a8;",brightness_4:"&#xe3a9;",brightness_5:"&#xe3aa;",brightness_6:"&#xe3ab;",brightness_7:"&#xe3ac;",brightness_auto:"&#xe1ab;",brightness_high:"&#xe1ac;",brightness_low:"&#xe1ad;",brightness_medium:"&#xe1ae;",broken_image:"&#xe3ad;",brush:"&#xe3ae;",bubble_chart:"&#xe6dd;",bug_report:"&#xe868;",build:"&#xe869;",burst_mode:"&#xe43c;",business:"&#xe0af;",business_center:"&#xeb3f;",backspace:"&#xe14a;",battery_charging_full:"&#xe1a3;",cloud:"&#xe2bd;",call:"&#xe0b0;",call_made:"&#xe0b2;",call_merge:"&#xe0b3;",call_missed:"&#xe0b4;",call_missed_outgoing:"&#xe0e4;",call_received:"&#xe0b5;",call_split:"&#xe0b6;",call_to_action:"&#xe06c;",camera:"&#xe3af;",camera_alt:"&#xe3b0;",camera_enhance:"&#xe8fc;",camera_front:"&#xe3b1;",camera_rear:"&#xe3b2;",camera_roll:"&#xe3b3;",cake:"&#xe7e9;",card_giftcard:"&#xe8f6;",card_membership:"&#xe8f7;",card_travel:"&#xe8f8;",casino:"&#xeb40;",cast:"&#xe307;",cast_connected:"&#xe308;",center_focus_strong:"&#xe3b4;",center_focus_weak:"&#xe3b5;",change_history:"&#xe86b;",chat:"&#xe0b7;",chat_bubble:"&#xe0ca;",chat_bubble_outline:"&#xe0cb;",check:"&#xe5ca;",check_box:"&#xe834;",check_box_outline_blank:"&#xe835;",check_circle:"&#xe86c;",chevron_left:"&#xe5cb;",chevron_right:"&#xe5cc;",child_care:"&#xeb41;",child_friendly:"&#xeb42;",chrome_reader_mode:"&#xe86d;",class:"&#xe86e;",clear:"&#xe14c;",clear_all:"&#xe0b8;",close:"&#xe5cd;",closed_caption:"&#xe01c;",call_end:"&#xe0b1;",cloud_circle:"&#xe2be;",cloud_done:"&#xe2bf;",cloud_download:"&#xe2c0;",cloud_off:"&#xe2c1;",cloud_queue:"&#xe2c2;",cloud_upload:"&#xe2c3;",code:"&#xe86f;",collections:"&#xe3b6;",collections_bookmark:"&#xe431;",color_lens:"&#xe3b7;",colorize:"&#xe3b8;",comment:"&#xe0b9;",compare:"&#xe3b9;",compare_arrows:"&#xe915;",computer:"&#xe30a;",confirmation_number:"&#xe638;",contact_mail:"&#xe0d0;",contact_phone:"&#xe0cf;",contacts:"&#xe0ba;",content_copy:"&#xe14d;",content_cut:"&#xe14e;",content_paste:"&#xe14f;",control_point:"&#xe3ba;",control_point_duplicate:"&#xe3bb;",copyright:"&#xe90c;",create:"&#xe150;",create_new_folder:"&#xe2cc;",credit_card:"&#xe870;",crop:"&#xe3be;",crop_16_9:"&#xe3bc;",crop_3_2:"&#xe3bd;",crop_5_4:"&#xe3bf;",crop_7_5:"&#xe3c0;",crop_din:"&#xe3c1;",crop_free:"&#xe3c2;",crop_landscape:"&#xe3c3;",crop_original:"&#xe3c4;",crop_portrait:"&#xe3c5;",crop_rotate:"&#xe437;",crop_square:"&#xe3c6;",cached:"&#xe86a;",cancel:"&#xe5c9;",data_usage:"&#xe1af;",date_range:"&#xe916;",dehaze:"&#xe3c7;",delete:"&#xe872;",delete_forever:"&#xe92b;",delete_sweep:"&#xe16c;",description:"&#xe873;",desktop_mac:"&#xe30b;",desktop_windows:"&#xe30c;",details:"&#xe3c8;",developer_board:"&#xe30d;",developer_mode:"&#xe1b0;",device_hub:"&#xe335;",devices:"&#xe1b1;",devices_other:"&#xe337;",dialer_sip:"&#xe0bb;",dialpad:"&#xe0bc;",directions:"&#xe52e;",directions_bike:"&#xe52f;",directions_boat:"&#xe532;",directions_bus:"&#xe530;",directions_car:"&#xe531;",directions_railway:"&#xe534;",directions_run:"&#xe566;",directions_subway:"&#xe533;",directions_transit:"&#xe535;",directions_walk:"&#xe536;",disc_full:"&#xe610;",dns:"&#xe875;",do_not_disturb:"&#xe612;",do_not_disturb_alt:"&#xe611;",do_not_disturb_off:"&#xe643;",do_not_disturb_on:"&#xe644;",dock:"&#xe30e;",domain:"&#xe7ee;",done:"&#xe876;",done_all:"&#xe877;",donut_large:"&#xe917;",donut_small:"&#xe918;",drafts:"&#xe151;",drag_handle:"&#xe25d;",drive_eta:"&#xe613;",dvr:"&#xe1b2;",dashboard:"&#xe871;",edit_location:"&#xe568;",enhanced_encryption:"&#xe63f;",email:"&#xe0be;",edit:"&#xe3c9;",equalizer:"&#xe01d;",error:"&#xe000;",error_outline:"&#xe001;",euro_symbol:"&#xe926;",ev_station:"&#xe56d;",event:"&#xe878;",event_available:"&#xe614;",event_busy:"&#xe615;",event_note:"&#xe616;",event_seat:"&#xe903;",exit_to_app:"&#xe879;",expand_less:"&#xe5ce;",expand_more:"&#xe5cf;",explicit:"&#xe01e;",explore:"&#xe87a;",exposure:"&#xe3ca;",exposure_neg_1:"&#xe3cb;",exposure_neg_2:"&#xe3cc;",exposure_plus_1:"&#xe3cd;",exposure_plus_2:"&#xe3ce;",exposure_zero:"&#xe3cf;",extension:"&#xe87b;",eject:"&#xe8fb;",forward_30:"&#xe057;",fast_forward:"&#xe01f;",favorite:"&#xe87d;",favorite_border:"&#xe87e;",featured_play_list:"&#xe06d;",featured_video:"&#xe06e;",feedback:"&#xe87f;",fiber_dvr:"&#xe05d;",fiber_manual_record:"&#xe061;",fiber_new:"&#xe05e;",fiber_pin:"&#xe06a;",fiber_smart_record:"&#xe062;",file_download:"&#xe2c4;",file_upload:"&#xe2c6;",filter:"&#xe3d3;",filter_1:"&#xe3d0;",filter_2:"&#xe3d1;",filter_3:"&#xe3d2;",filter_4:"&#xe3d4;",filter_5:"&#xe3d5;",filter_6:"&#xe3d6;",filter_7:"&#xe3d7;",filter_8:"&#xe3d8;",filter_9:"&#xe3d9;",filter_9_plus:"&#xe3da;",filter_b_and_w:"&#xe3db;",filter_center_focus:"&#xe3dc;",filter_drama:"&#xe3dd;",filter_frames:"&#xe3de;",filter_hdr:"&#xe3df;",filter_list:"&#xe152;",filter_none:"&#xe3e0;",filter_tilt_shift:"&#xe3e2;",filter_vintage:"&#xe3e3;",find_in_page:"&#xe880;",find_replace:"&#xe881;",fingerprint:"&#xe90d;",first_page:"&#xe5dc;",fitness_center:"&#xeb43;",flag:"&#xe153;",flare:"&#xe3e4;",flash_auto:"&#xe3e5;",flash_off:"&#xe3e6;",flash_on:"&#xe3e7;",flight:"&#xe539;",flight_land:"&#xe904;",flight_takeoff:"&#xe905;",flip:"&#xe3e8;",flip_to_back:"&#xe882;",flip_to_front:"&#xe883;",folder:"&#xe2c7;",folder_open:"&#xe2c8;",folder_shared:"&#xe2c9;",folder_special:"&#xe617;",font_download:"&#xe167;",format_align_center:"&#xe234;",format_align_justify:"&#xe235;",format_align_left:"&#xe236;",format_align_right:"&#xe237;",format_bold:"&#xe238;",format_clear:"&#xe239;",format_color_fill:"&#xe23a;",format_color_reset:"&#xe23b;",format_color_text:"&#xe23c;",format_indent_decrease:"&#xe23d;",format_indent_increase:"&#xe23e;",format_italic:"&#xe23f;",face:"&#xe87c;",format_list_bulleted:"&#xe241;",format_list_numbered:"&#xe242;",format_paint:"&#xe243;",format_quote:"&#xe244;",format_shapes:"&#xe25e;",format_size:"&#xe245;",format_strikethrough:"&#xe246;",format_textdirection_l_to_r:"&#xe247;",format_textdirection_r_to_l:"&#xe248;",format_underlined:"&#xe249;",forum:"&#xe0bf;",forward:"&#xe154;",forward_10:"&#xe056;",fast_rewind:"&#xe020;",forward_5:"&#xe058;",free_breakfast:"&#xeb44;",fullscreen:"&#xe5d0;",fullscreen_exit:"&#xe5d1;",functions:"&#xe24a;",format_line_spacing:"&#xe240;",g_translate:"&#xe927;",games:"&#xe021;",gavel:"&#xe90e;",gesture:"&#xe155;",get_app:"&#xe884;",gif:"&#xe908;",golf_course:"&#xeb45;",gps_fixed:"&#xe1b3;",gps_not_fixed:"&#xe1b4;",gps_off:"&#xe1b5;",grade:"&#xe885;",gradient:"&#xe3e9;",grain:"&#xe3ea;",graphic_eq:"&#xe1b8;",grid_off:"&#xe3eb;",grid_on:"&#xe3ec;",group:"&#xe7ef;",group_add:"&#xe7f0;",group_work:"&#xe886;",gamepad:"&#xe30f;",hdr_off:"&#xe3ed;",hotel:"&#xe53a;",hdr_strong:"&#xe3f1;",hdr_weak:"&#xe3f2;",headset:"&#xe310;",headset_mic:"&#xe311;",healing:"&#xe3f3;",hearing:"&#xe023;",help:"&#xe887;",help_outline:"&#xe8fd;",high_quality:"&#xe024;",highlight:"&#xe25f;",highlight_off:"&#xe888;",history:"&#xe889;",home:"&#xe88a;",hot_tub:"&#xeb46;",hd:"&#xe052;",hourglass_empty:"&#xe88b;",hourglass_full:"&#xe88c;",http:"&#xe902;",https:"&#xe88d;",hdr_on:"&#xe3ee;",invert_colors:"&#xe891;",image_aspect_ratio:"&#xe3f5;",import_export:"&#xe0c3;",important_devices:"&#xe912;",inbox:"&#xe156;",image:"&#xe3f4;",info:"&#xe88e;",info_outline:"&#xe88f;",input:"&#xe890;",insert_chart:"&#xe24b;",insert_comment:"&#xe24c;",insert_drive_file:"&#xe24d;",insert_emoticon:"&#xe24e;",insert_invitation:"&#xe24f;",insert_link:"&#xe250;",insert_photo:"&#xe251;",import_contacts:"&#xe0e0;",invert_colors_off:"&#xe0c4;",iso:"&#xe3f6;",indeterminate_check_box:"&#xe909;",keyboard:"&#xe312;",keyboard_arrow_left:"&#xe314;",keyboard_arrow_right:"&#xe315;",keyboard_arrow_up:"&#xe316;",keyboard_backspace:"&#xe317;",keyboard_arrow_down:"&#xe313;",keyboard_hide:"&#xe31a;",keyboard_return:"&#xe31b;",keyboard_tab:"&#xe31c;",keyboard_voice:"&#xe31d;",kitchen:"&#xeb47;",keyboard_capslock:"&#xe318;",label:"&#xe892;",label_outline:"&#xe893;",landscape:"&#xe3f7;",language:"&#xe894;",laptop:"&#xe31e;",laptop_chromebook:"&#xe31f;",laptop_mac:"&#xe320;",laptop_windows:"&#xe321;",last_page:"&#xe5dd;",launch:"&#xe895;",layers:"&#xe53b;",layers_clear:"&#xe53c;",leak_add:"&#xe3f8;",leak_remove:"&#xe3f9;",lens:"&#xe3fa;",library_add:"&#xe02e;",library_books:"&#xe02f;",library_music:"&#xe030;",lightbulb_outline:"&#xe90f;",line_style:"&#xe919;",line_weight:"&#xe91a;",
linear_scale:"&#xe260;",link:"&#xe157;",linked_camera:"&#xe438;",list:"&#xe896;",live_help:"&#xe0c6;",live_tv:"&#xe639;",local_activity:"&#xe53f;",local_airport:"&#xe53d;",local_atm:"&#xe53e;",local_bar:"&#xe540;",local_cafe:"&#xe541;",local_car_wash:"&#xe542;",local_convenience_store:"&#xe543;",local_dining:"&#xe556;",local_drink:"&#xe544;",local_florist:"&#xe545;",local_gas_station:"&#xe546;",local_grocery_store:"&#xe547;",local_hospital:"&#xe548;",local_hotel:"&#xe549;",local_laundry_service:"&#xe54a;",local_library:"&#xe54b;",local_mall:"&#xe54c;",local_movies:"&#xe54d;",local_offer:"&#xe54e;",local_parking:"&#xe54f;",local_pharmacy:"&#xe550;",local_phone:"&#xe551;",local_pizza:"&#xe552;",local_play:"&#xe553;",local_post_office:"&#xe554;",local_printshop:"&#xe555;",local_see:"&#xe557;",local_shipping:"&#xe558;",local_taxi:"&#xe559;",location_city:"&#xe7f1;",location_disabled:"&#xe1b6;",location_off:"&#xe0c7;",location_on:"&#xe0c8;",location_searching:"&#xe1b7;",lock:"&#xe897;",lock_open:"&#xe898;",lock_outline:"&#xe899;",looks:"&#xe3fc;",looks_3:"&#xe3fb;",looks_4:"&#xe3fd;",looks_5:"&#xe3fe;",looks_6:"&#xe3ff;",looks_one:"&#xe400;",looks_two:"&#xe401;",loop:"&#xe028;",loupe:"&#xe402;",low_priority:"&#xe16d;",loyalty:"&#xe89a;",mail:"&#xe158;",mail_outline:"&#xe0e1;",markunread:"&#xe159;",markunread_mailbox:"&#xe89b;",memory:"&#xe322;",menu:"&#xe5d2;",merge_type:"&#xe252;",message:"&#xe0c9;",mic:"&#xe029;",mic_none:"&#xe02a;",mic_off:"&#xe02b;",mms:"&#xe618;",mode_comment:"&#xe253;",mode_edit:"&#xe254;",monetization_on:"&#xe263;",money_off:"&#xe25c;",monochrome_photos:"&#xe403;",mood:"&#xe7f2;",mood_bad:"&#xe7f3;",more:"&#xe619;",more_horiz:"&#xe5d3;",more_vert:"&#xe5d4;",motorcycle:"&#xe91b;",mouse:"&#xe323;",move_to_inbox:"&#xe168;",movie:"&#xe02c;",movie_creation:"&#xe404;",movie_filter:"&#xe43a;",multiline_chart:"&#xe6df;",music_note:"&#xe405;",music_video:"&#xe063;",my_location:"&#xe55c;",map:"&#xe55b;",note:"&#xe06f;",nature_people:"&#xe407;",navigation:"&#xe55d;",near_me:"&#xe569;",network_cell:"&#xe1b9;",network_check:"&#xe640;",network_locked:"&#xe61a;",network_wifi:"&#xe1ba;",new_releases:"&#xe031;",next_week:"&#xe16a;",nfc:"&#xe1bb;",no_encryption:"&#xe641;",no_sim:"&#xe0cc;",not_interested:"&#xe033;",navigate_next:"&#xe409;",note_add:"&#xe89c;",notifications:"&#xe7f4;",notifications_active:"&#xe7f7;",notifications_none:"&#xe7f5;",notifications_off:"&#xe7f6;",notifications_paused:"&#xe7f8;",nature:"&#xe406;",navigate_before:"&#xe408;",ondemand_video:"&#xe63a;",opacity:"&#xe91c;",open_in_browser:"&#xe89d;",open_in_new:"&#xe89e;",open_with:"&#xe89f;",offline_pin:"&#xe90a;",pageview:"&#xe8a0;",palette:"&#xe40a;",pan_tool:"&#xe925;",panorama:"&#xe40b;",panorama_fish_eye:"&#xe40c;",panorama_horizontal:"&#xe40d;",panorama_vertical:"&#xe40e;",panorama_wide_angle:"&#xe40f;",party_mode:"&#xe7fa;",pause:"&#xe034;",pause_circle_filled:"&#xe035;",pause_circle_outline:"&#xe036;",payment:"&#xe8a1;",people:"&#xe7fb;",people_outline:"&#xe7fc;",perm_camera_mic:"&#xe8a2;",perm_contact_calendar:"&#xe8a3;",perm_data_setting:"&#xe8a4;",perm_device_information:"&#xe8a5;",perm_identity:"&#xe8a6;",perm_media:"&#xe8a7;",perm_phone_msg:"&#xe8a8;",perm_scan_wifi:"&#xe8a9;",person:"&#xe7fd;",person_add:"&#xe7fe;",person_outline:"&#xe7ff;",person_pin:"&#xe55a;",person_pin_circle:"&#xe56a;",personal_video:"&#xe63b;",pets:"&#xe91d;",phone:"&#xe0cd;",phone_android:"&#xe324;",phone_bluetooth_speaker:"&#xe61b;",phone_forwarded:"&#xe61c;",phone_in_talk:"&#xe61d;",phone_iphone:"&#xe325;",phone_locked:"&#xe61e;",phone_missed:"&#xe61f;",phone_paused:"&#xe620;",phonelink:"&#xe326;",phonelink_erase:"&#xe0db;",phonelink_lock:"&#xe0dc;",phonelink_off:"&#xe327;",phonelink_ring:"&#xe0dd;",phonelink_setup:"&#xe0de;",photo:"&#xe410;",photo_album:"&#xe411;",photo_camera:"&#xe412;",photo_filter:"&#xe43b;",photo_library:"&#xe413;",pages:"&#xe7f9;",photo_size_select_large:"&#xe433;",photo_size_select_small:"&#xe434;",picture_as_pdf:"&#xe415;",picture_in_picture:"&#xe8aa;",picture_in_picture_alt:"&#xe911;",pie_chart:"&#xe6c4;",pie_chart_outlined:"&#xe6c5;",pin_drop:"&#xe55e;",place:"&#xe55f;",play_arrow:"&#xe037;",play_circle_filled:"&#xe038;",play_circle_outline:"&#xe039;",play_for_work:"&#xe906;",playlist_add:"&#xe03b;",playlist_add_check:"&#xe065;",playlist_play:"&#xe05f;",plus_one:"&#xe800;",poll:"&#xe801;",polymer:"&#xe8ab;",pool:"&#xeb48;",portable_wifi_off:"&#xe0ce;",portrait:"&#xe416;",power:"&#xe63c;",power_input:"&#xe336;",power_settings_new:"&#xe8ac;",pregnant_woman:"&#xe91e;",present_to_all:"&#xe0df;",print:"&#xe8ad;",priority_high:"&#xe645;",public:"&#xe80b;",publish:"&#xe255;",photo_size_select_actual:"&#xe432;",query_builder:"&#xe8ae;",queue:"&#xe03c;",queue_music:"&#xe03d;",queue_play_next:"&#xe066;",question_answer:"&#xe8af;",replay_5:"&#xe05b;",radio_button_checked:"&#xe837;",rate_review:"&#xe560;",receipt:"&#xe8b0;",recent_actors:"&#xe03f;",record_voice_over:"&#xe91f;",redeem:"&#xe8b1;",redo:"&#xe15a;",refresh:"&#xe5d5;",remove:"&#xe15b;",remove_circle:"&#xe15c;",remove_circle_outline:"&#xe15d;",remove_from_queue:"&#xe067;",remove_red_eye:"&#xe417;",remove_shopping_cart:"&#xe928;",reorder:"&#xe8fe;",repeat:"&#xe040;",repeat_one:"&#xe041;",radio:"&#xe03e;",replay_10:"&#xe059;",replay_30:"&#xe05a;",radio_button_unchecked:"&#xe836;",reply:"&#xe15e;",reply_all:"&#xe15f;",report:"&#xe160;",report_problem:"&#xe8b2;",restaurant:"&#xe56c;",restaurant_menu:"&#xe561;",restore:"&#xe8b3;",restore_page:"&#xe929;",ring_volume:"&#xe0d1;",room:"&#xe8b4;",room_service:"&#xeb49;",rotate_90_degrees_ccw:"&#xe418;",rotate_left:"&#xe419;",rotate_right:"&#xe41a;",rounded_corner:"&#xe920;",router:"&#xe328;",rowing:"&#xe921;",rss_feed:"&#xe0e5;",rv_hookup:"&#xe642;",replay:"&#xe042;",satellite:"&#xe562;",save:"&#xe161;",scanner:"&#xe329;",schedule:"&#xe8b5;",school:"&#xe80c;",screen_lock_landscape:"&#xe1be;",screen_lock_portrait:"&#xe1bf;",screen_lock_rotation:"&#xe1c0;",screen_rotation:"&#xe1c1;",screen_share:"&#xe0e2;",sd_card:"&#xe623;",sd_storage:"&#xe1c2;",search:"&#xe8b6;",security:"&#xe32a;",select_all:"&#xe162;",send:"&#xe163;",sentiment_dissatisfied:"&#xe811;",sentiment_neutral:"&#xe812;",sentiment_satisfied:"&#xe813;",sentiment_very_dissatisfied:"&#xe814;",sentiment_very_satisfied:"&#xe815;",settings:"&#xe8b8;",settings_applications:"&#xe8b9;",settings_backup_restore:"&#xe8ba;",settings_bluetooth:"&#xe8bb;",settings_brightness:"&#xe8bd;",settings_cell:"&#xe8bc;",settings_ethernet:"&#xe8be;",settings_input_antenna:"&#xe8bf;",settings_input_component:"&#xe8c0;",settings_input_composite:"&#xe8c1;",settings_input_hdmi:"&#xe8c2;",settings_input_svideo:"&#xe8c3;",settings_overscan:"&#xe8c4;",settings_phone:"&#xe8c5;",settings_power:"&#xe8c6;",settings_remote:"&#xe8c7;",settings_system_daydream:"&#xe1c3;",settings_voice:"&#xe8c8;",share:"&#xe80d;",shop:"&#xe8c9;",shop_two:"&#xe8ca;",shopping_basket:"&#xe8cb;",shopping_cart:"&#xe8cc;",short_text:"&#xe261;",show_chart:"&#xe6e1;",shuffle:"&#xe043;",signal_cellular_4_bar:"&#xe1c8;",signal_cellular_connected_no_internet_4_bar:"&#xe1cd;",signal_cellular_no_sim:"&#xe1ce;",signal_cellular_null:"&#xe1cf;",signal_cellular_off:"&#xe1d0;",signal_wifi_4_bar:"&#xe1d8;",signal_wifi_4_bar_lock:"&#xe1d9;",signal_wifi_off:"&#xe1da;",sim_card:"&#xe32b;",sim_card_alert:"&#xe624;",skip_next:"&#xe044;",skip_previous:"&#xe045;",slideshow:"&#xe41b;",slow_motion_video:"&#xe068;",smartphone:"&#xe32c;",smoke_free:"&#xeb4a;",smoking_rooms:"&#xeb4b;",sms:"&#xe625;",sms_failed:"&#xe626;",snooze:"&#xe046;",sort:"&#xe164;",sort_by_alpha:"&#xe053;",spa:"&#xeb4c;",space_bar:"&#xe256;",speaker:"&#xe32d;",speaker_group:"&#xe32e;",speaker_notes:"&#xe8cd;",speaker_notes_off:"&#xe92a;",speaker_phone:"&#xe0d2;",spellcheck:"&#xe8ce;",star:"&#xe838;",star_border:"&#xe83a;",star_half:"&#xe839;",stars:"&#xe8d0;",stay_current_landscape:"&#xe0d3;",stay_current_portrait:"&#xe0d4;",stay_primary_landscape:"&#xe0d5;",stay_primary_portrait:"&#xe0d6;",stop:"&#xe047;",stop_screen_share:"&#xe0e3;",storage:"&#xe1db;",store:"&#xe8d1;",store_mall_directory:"&#xe563;",straighten:"&#xe41c;",streetview:"&#xe56e;",strikethrough_s:"&#xe257;",style:"&#xe41d;",subdirectory_arrow_left:"&#xe5d9;",subdirectory_arrow_right:"&#xe5da;",subject:"&#xe8d2;",subscriptions:"&#xe064;",subtitles:"&#xe048;",subway:"&#xe56f;",supervisor_account:"&#xe8d3;",surround_sound:"&#xe049;",swap_calls:"&#xe0d7;",swap_horiz:"&#xe8d4;",swap_vert:"&#xe8d5;",swap_vertical_circle:"&#xe8d6;",switch_camera:"&#xe41e;",switch_video:"&#xe41f;",sync:"&#xe627;",sync_disabled:"&#xe628;",sync_problem:"&#xe629;",system_update:"&#xe62a;",system_update_alt:"&#xe8d7;",toll:"&#xe8e0;",tab:"&#xe8d8;",tablet_android:"&#xe330;",tablet_mac:"&#xe331;",tag_faces:"&#xe420;",tap_and_play:"&#xe62b;",terrain:"&#xe564;",text_fields:"&#xe262;",text_format:"&#xe165;",textsms:"&#xe0d8;",texture:"&#xe421;",theaters:"&#xe8da;",thumb_down:"&#xe8db;",thumb_up:"&#xe8dc;",thumbs_up_down:"&#xe8dd;",time_to_leave:"&#xe62c;",timelapse:"&#xe422;",timeline:"&#xe922;",timer:"&#xe425;",timer_10:"&#xe423;",timer_3:"&#xe424;",timer_off:"&#xe426;",title:"&#xe264;",toc:"&#xe8de;",today:"&#xe8df;",tablet:"&#xe32f;",tonality:"&#xe427;",touch_app:"&#xe913;",toys:"&#xe332;",track_changes:"&#xe8e1;",traffic:"&#xe565;",train:"&#xe570;",tram:"&#xe571;",transfer_within_a_station:"&#xe572;",transform:"&#xe428;",translate:"&#xe8e2;",trending_down:"&#xe8e3;",trending_flat:"&#xe8e4;",trending_up:"&#xe8e5;",tune:"&#xe429;",turned_in:"&#xe8e6;",turned_in_not:"&#xe8e7;",tv:"&#xe333;",tab_unselected:"&#xe8d9;",unarchive:"&#xe169;",undo:"&#xe166;",unfold_less:"&#xe5d6;",unfold_more:"&#xe5d7;",update:"&#xe923;",usb:"&#xe1e0;",verified_user:"&#xe8e8;",vertical_align_bottom:"&#xe258;",vertical_align_center:"&#xe259;",vertical_align_top:"&#xe25a;",vibration:"&#xe62d;",video_call:"&#xe070;",video_label:"&#xe071;",video_library:"&#xe04a;",videocam:"&#xe04b;",videocam_off:"&#xe04c;",videogame_asset:"&#xe338;",view_agenda:"&#xe8e9;",view_array:"&#xe8ea;",view_carousel:"&#xe8eb;",view_column:"&#xe8ec;",view_comfy:"&#xe42a;",view_compact:"&#xe42b;",view_day:"&#xe8ed;",view_headline:"&#xe8ee;",view_list:"&#xe8ef;",view_module:"&#xe8f0;",view_quilt:"&#xe8f1;",view_stream:"&#xe8f2;",view_week:"&#xe8f3;",vignette:"&#xe435;",visibility:"&#xe8f4;",visibility_off:"&#xe8f5;",voice_chat:"&#xe62e;",voicemail:"&#xe0d9;",volume_down:"&#xe04d;",volume_mute:"&#xe04e;",volume_off:"&#xe04f;",volume_up:"&#xe050;",vpn_key:"&#xe0da;",vpn_lock:"&#xe62f;",weekend:"&#xe16b;",wallpaper:"&#xe1bc;",watch:"&#xe334;",watch_later:"&#xe924;",wb_auto:"&#xe42c;",wb_cloudy:"&#xe42d;",wb_incandescent:"&#xe42e;",wb_iridescent:"&#xe436;",wb_sunny:"&#xe430;",wc:"&#xe63d;",web:"&#xe051;",web_asset:"&#xe069;",warning:"&#xe002;",whatshot:"&#xe80e;",widgets:"&#xe1bd;",wifi:"&#xe63e;",wifi_lock:"&#xe1e1;",wifi_tethering:"&#xe1e2;",work:"&#xe8f9;",wrap_text:"&#xe25b;",youtube_searched_for:"&#xe8fa;",zoom_in:"&#xe8ff;",zoom_out:"&#xe900;",zoom_out_map:"&#xe56b;"}},function(e,s){!function(e){"function"==typeof i&&i.amd?i(["jquery"],e):e("object"==typeof s?t(3):jQuery)}(function(e,t){function i(){return new Date(Date.UTC.apply(Date,arguments))}function s(){var e=new Date;return i(e.getFullYear(),e.getMonth(),e.getDate())}function a(e,t){return e.getUTCFullYear()===t.getUTCFullYear()&&e.getUTCMonth()===t.getUTCMonth()&&e.getUTCDate()===t.getUTCDate()}function n(e){return function(){return this[e].apply(this,arguments)}}function r(e){return e&&!isNaN(e.getTime())}function o(t,i){function s(e,t){return t.toLowerCase()}var a,n=e(t).data(),r={},o=new RegExp("^"+i.toLowerCase()+"([A-Z])");i=new RegExp("^"+i.toLowerCase());for(var l in n)i.test(l)&&(a=l.replace(o,s),r[a]=n[l]);return r}function l(t){var i={};if(g[t]||(t=t.split("-")[0],g[t])){var s=g[t];return e.each(_,function(e,t){t in s&&(i[t]=s[t])}),i}}var d=function(){var t={get:function(e){return this.slice(e)[0]},contains:function(e){for(var t=e&&e.valueOf(),i=0,s=this.length;i<s;i++)if(this[i].valueOf()===t)return i;return-1},remove:function(e){this.splice(e,1)},replace:function(t){t&&(e.isArray(t)||(t=[t]),this.clear(),this.push.apply(this,t))},clear:function(){this.length=0},copy:function(){var e=new d;return e.replace(this),e}};return function(){var i=[];return i.push.apply(i,arguments),e.extend(i,t),i}}(),c=function(t,i){e(t).data("datepicker",this),this._process_options(i),this.dates=new d,this.viewDate=this.o.defaultViewDate,this.focusDate=null,this.element=e(t),this.isInput=this.element.is("input"),this.inputField=this.isInput?this.element:this.element.find("input"),this.component=!!this.element.hasClass("date")&&this.element.find(".add-on, .input-group-addon, .btn"),this.hasInput=this.component&&this.inputField.length,this.component&&0===this.component.length&&(this.component=!1),this.isInline=!this.component&&this.element.is("div"),this.picker=e(m.template),this.picker.addClass("biz-calendar-"+(i.theme||window.bizui.theme)),this._check_template(this.o.templates.leftArrow)&&this.picker.find(".prev").html(this.o.templates.leftArrow),this._check_template(this.o.templates.rightArrow)&&this.picker.find(".next").html(this.o.templates.rightArrow),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("thead .datepicker-title, tfoot .today, tfoot .clear").attr("colspan",function(e,t){return parseInt(t)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.setDaysOfWeekHighlighted(this.o.daysOfWeekHighlighted),this.setDatesDisabled(this.o.datesDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};c.prototype={constructor:c,_resolveViewName:function(e,i){return 0===e||"days"===e||"month"===e?0:1===e||"months"===e||"year"===e?1:2===e||"years"===e||"decade"===e?2:3===e||"decades"===e||"century"===e?3:4===e||"centuries"===e||"millennium"===e?4:i!==t&&i},_check_template:function(i){try{if(i===t||""===i)return!1;if((i.match(/[<>]/g)||[]).length<=0)return!0;return e(i).length>0}catch(e){return!1}},_process_options:function(t){this._o=e.extend({},this._o,t);var a=this.o=e.extend({},this._o),n=a.language;g[n]||(n=n.split("-")[0],g[n]||(n=p.language)),a.language=n,a.startView=this._resolveViewName(a.startView,0),a.minViewMode=this._resolveViewName(a.minViewMode,0),a.maxViewMode=this._resolveViewName(a.maxViewMode,4),a.startView=Math.min(a.startView,a.maxViewMode),a.startView=Math.max(a.startView,a.minViewMode),!0!==a.multidate&&(a.multidate=Number(a.multidate)||!1,!1!==a.multidate&&(a.multidate=Math.max(0,a.multidate))),a.multidateSeparator=String(a.multidateSeparator),a.weekStart%=7,a.weekEnd=(a.weekStart+6)%7;var r=m.parseFormat(a.format);a.startDate!==-1/0&&(a.startDate?a.startDate instanceof Date?a.startDate=this._local_to_utc(this._zero_time(a.startDate)):a.startDate=m.parseDate(a.startDate,r,a.language,a.assumeNearbyYear):a.startDate=-1/0),a.endDate!==1/0&&(a.endDate?a.endDate instanceof Date?a.endDate=this._local_to_utc(this._zero_time(a.endDate)):a.endDate=m.parseDate(a.endDate,r,a.language,a.assumeNearbyYear):a.endDate=1/0),a.daysOfWeekDisabled=a.daysOfWeekDisabled||[],e.isArray(a.daysOfWeekDisabled)||(a.daysOfWeekDisabled=a.daysOfWeekDisabled.split(/[,\s]*/)),a.daysOfWeekDisabled=e.map(a.daysOfWeekDisabled,function(e){return parseInt(e,10)}),a.daysOfWeekHighlighted=a.daysOfWeekHighlighted||[],e.isArray(a.daysOfWeekHighlighted)||(a.daysOfWeekHighlighted=a.daysOfWeekHighlighted.split(/[,\s]*/)),a.daysOfWeekHighlighted=e.map(a.daysOfWeekHighlighted,function(e){return parseInt(e,10)}),a.datesDisabled=a.datesDisabled||[],e.isArray(a.datesDisabled)||(a.datesDisabled=[a.datesDisabled]),a.datesDisabled=e.map(a.datesDisabled,function(e){return m.parseDate(e,r,a.language,a.assumeNearbyYear)});var o=String(a.orientation).toLowerCase().split(/\s+/g),l=a.orientation.toLowerCase();if(o=e.grep(o,function(e){return/^auto|left|right|top|bottom$/.test(e)}),a.orientation={x:"auto",y:"auto"},l&&"auto"!==l)if(1===o.length)switch(o[0]){case"top":case"bottom":a.orientation.y=o[0];break;case"left":case"right":a.orientation.x=o[0]}else l=e.grep(o,function(e){return/^left|right$/.test(e)}),a.orientation.x=l[0]||"auto",l=e.grep(o,function(e){return/^top|bottom$/.test(e)}),a.orientation.y=l[0]||"auto";else;if(a.defaultViewDate){var d=a.defaultViewDate.year||(new Date).getFullYear(),c=a.defaultViewDate.month||0,h=a.defaultViewDate.day||1;a.defaultViewDate=i(d,c,h)}else a.defaultViewDate=s()},_events:[],_secondaryEvents:[],_applyEvents:function(e){for(var i,s,a,n=0;n<e.length;n++)i=e[n][0],2===e[n].length?(s=t,a=e[n][1]):3===e[n].length&&(s=e[n][1],a=e[n][2]),i.on(a,s)},_unapplyEvents:function(e){for(var i,s,a,n=0;n<e.length;n++)i=e[n][0],2===e[n].length?(a=t,s=e[n][1]):3===e[n].length&&(a=e[n][1],s=e[n][2]),i.off(s,a)},_buildEvents:function(){var t={keyup:e.proxy(function(t){-1===e.inArray(t.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:e.proxy(this.keydown,this),paste:e.proxy(this.paste,this)};!0===this.o.showOnFocus&&(t.focus=e.proxy(this.show,this)),this.isInput?this._events=[[this.element,t]]:this.component&&this.hasInput?this._events=[[this.inputField,t],[this.component,{click:e.proxy(this.show,this)}]]:this._events=[[this.element,{click:e.proxy(this.show,this),keydown:e.proxy(this.keydown,this)}]],this._events.push([this.element,"*",{blur:e.proxy(function(e){this._focused_from=e.target},this)}],[this.element,{blur:e.proxy(function(e){this._focused_from=e.target},this)}]),this.o.immediateUpdates&&this._events.push([this.element,{"changeYear changeMonth":e.proxy(function(e){this.update(e.date)},this)}]),this._secondaryEvents=[[this.picker,{click:e.proxy(this.click,this)}],[e(window),{resize:e.proxy(this.place,this)}],[e(document),{mousedown:e.proxy(function(e){this.element.is(e.target)||this.element.find(e.target).length||this.picker.is(e.target)||this.picker.find(e.target).length||this.isInline||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,i){var s=i||this.dates.get(-1),a=this._utc_to_local(s);this.element.trigger({type:t,date:a,dates:e.map(this.dates,this._utc_to_local),format:e.proxy(function(e,t){0===arguments.length?(e=this.dates.length-1,t=this.o.format):"string"==typeof e&&(t=e,e=this.dates.length-1),t=t||this.o.format;var i=this.dates.get(e);return m.formatDate(i,t,this.o.language)},this)})},show:function(){if(!(this.inputField.prop("disabled")||this.inputField.prop("readonly")&&!1===this.o.enableOnReadonly))return this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&e(this.element).blur(),this},hide:function(){return this.isInline||!this.picker.is(":visible")?this:(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&this.inputField.val()&&this.setValue(),this._trigger("hide"),this)},destroy:function(){return this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date,this},paste:function(t){var i;if(t.originalEvent.clipboardData&&t.originalEvent.clipboardData.types&&-1!==e.inArray("text/plain",t.originalEvent.clipboardData.types))i=t.originalEvent.clipboardData.getData("text/plain");else{if(!window.clipboardData)return;i=window.clipboardData.getData("Text")}this.setDate(i),this.update(),t.preventDefault()},_utc_to_local:function(e){return e&&new Date(e.getTime()+6e4*e.getTimezoneOffset())},_local_to_utc:function(e){return e&&new Date(e.getTime()-6e4*e.getTimezoneOffset())},_zero_time:function(e){return e&&new Date(e.getFullYear(),e.getMonth(),e.getDate())},_zero_utc_time:function(e){return e&&new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()))},getDates:function(){return e.map(this.dates,this._utc_to_local)},getUTCDates:function(){return e.map(this.dates,function(e){return new Date(e)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var e=this.dates.get(-1);return void 0!==e?new Date(e):null},clearDates:function(){this.inputField&&this.inputField.val(""),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()},setDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,t),this._trigger("changeDate"),this.setValue(),this},setUTCDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,e.map(t,this._utc_to_local)),this._trigger("changeDate"),this.setValue(),this},setDate:n("setDates"),setUTCDate:n("setUTCDates"),remove:n("destroy"),setValue:function(){var e=this.getFormattedDate();return this.inputField.val(e),this},getFormattedDate:function(i){i===t&&(i=this.o.format);var s=this.o.language;return e.map(this.dates,function(e){return m.formatDate(e,i,s)}).join(this.o.multidateSeparator)},getStartDate:function(){return this.o.startDate},setStartDate:function(e){return this._process_options({startDate:e}),this.update(),this.updateNavArrows(),this},getEndDate:function(){return this.o.endDate},setEndDate:function(e){return this._process_options({endDate:e}),this.update(),this.updateNavArrows(),this},setDaysOfWeekDisabled:function(e){return this._process_options({daysOfWeekDisabled:e}),this.update(),this.updateNavArrows(),this},setDaysOfWeekHighlighted:function(e){return this._process_options({daysOfWeekHighlighted:e}),this.update(),this},setDatesDisabled:function(e){this._process_options({datesDisabled:e}),this.update(),this.updateNavArrows()},place:function(){if(this.isInline)return this;var t=this.picker.outerWidth(),i=this.picker.outerHeight(),s=e(this.o.container),a=s.width(),n="body"===this.o.container?e(document).scrollTop():s.scrollTop(),r=s.offset(),o=[];this.element.parents().each(function(){var t=e(this).css("z-index");"auto"!==t&&0!==t&&o.push(parseInt(t))});var l=Math.max.apply(Math,o)+this.o.zIndexOffset,d=this.component?this.component.parent().offset():this.element.offset(),c=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),h=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),u=d.left-r.left,f=d.top-r.top;"body"!==this.o.container&&(f+=n),this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(u-=t-h)):d.left<0?(this.picker.addClass("datepicker-orient-left"),u-=d.left-10):u+t>a?(this.picker.addClass("datepicker-orient-right"),u+=h-t):this.picker.addClass("datepicker-orient-left");var p,_=this.o.orientation.y;if("auto"===_&&(p=-n+f-i,_=p<0?"bottom":"top"),this.picker.addClass("datepicker-orient-"+_),"top"===_?f-=i+parseInt(this.picker.css("padding-top")):f+=c,this.o.rtl){var g=a-(u+h);this.picker.css({top:f,right:g,zIndex:l})}else this.picker.css({top:f,left:u,zIndex:l});return this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var t=this.dates.copy(),i=[],s=!1;return arguments.length?(e.each(arguments,e.proxy(function(e,t){t instanceof Date&&(t=this._local_to_utc(t)),i.push(t)},this)),s=!0):(i=this.isInput?this.element.val():this.element.data("date")||this.inputField.val(),i=i&&this.o.multidate?i.split(this.o.multidateSeparator):[i],delete this.element.data().date),i=e.map(i,e.proxy(function(e){return m.parseDate(e,this.o.format,this.o.language,this.o.assumeNearbyYear)},this)),i=e.grep(i,e.proxy(function(e){return!this.dateWithinRange(e)||!e},this),!0),this.dates.replace(i),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate?this.viewDate=new Date(this.o.endDate):this.viewDate=this.o.defaultViewDate,s?this.setValue():i.length&&String(t)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&t.length&&this._trigger("clearDate"),this.fill(),this.element.change(),this},fillDow:function(){var t=this.o.weekStart,i="<tr>";for(this.o.calendarWeeks&&(this.picker.find(".datepicker-days .datepicker-switch").attr("colspan",function(e,t){return parseInt(t)+1}),i+='<th class="cw">&#160;</th>');t<this.o.weekStart+7;)i+='<th class="dow',e.inArray(t,this.o.daysOfWeekDisabled)>-1&&(i+=" disabled"),i+='">'+g[this.o.language].daysMin[t++%7]+"</th>";i+="</tr>",this.picker.find(".datepicker-days thead").append(i)},fillMonths:function(){for(var e=this._utc_to_local(this.viewDate),t="",i=0;i<12;){t+='<span class="month'+(e&&e.getMonth()===i?" focused":"")+'">'+g[this.o.language].monthsShort[i++]+"</span>"}this.picker.find(".datepicker-months td").html(t)},setRange:function(t){t&&t.length?this.range=e.map(t,function(e){return e.valueOf()}):delete this.range,this.fill()},getClassNames:function(t){var i=[],s=this.viewDate.getUTCFullYear(),a=this.viewDate.getUTCMonth(),n=new Date;return t.getUTCFullYear()<s||t.getUTCFullYear()===s&&t.getUTCMonth()<a?i.push("old"):(t.getUTCFullYear()>s||t.getUTCFullYear()===s&&t.getUTCMonth()>a)&&i.push("new"),this.focusDate&&t.valueOf()===this.focusDate.valueOf()&&i.push("focused"),this.o.todayHighlight&&t.getUTCFullYear()===n.getFullYear()&&t.getUTCMonth()===n.getMonth()&&t.getUTCDate()===n.getDate()&&i.push("today"),-1!==this.dates.contains(t)&&i.push("active"),this.dateWithinRange(t)||i.push("disabled"),this.dateIsDisabled(t)&&i.push("disabled","disabled-date"),-1!==e.inArray(t.getUTCDay(),this.o.daysOfWeekHighlighted)&&i.push("highlighted"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&i.push("range"),-1!==e.inArray(t.valueOf(),this.range)&&i.push("selected"),t.valueOf()===this.range[0]&&i.push("range-start"),t.valueOf()===this.range[this.range.length-1]&&i.push("range-end")),i},_fill_yearsView:function(i,s,a,n,r,o,l,d){var c,h,u,f,p,_,g,m,x,b,v;for(c="",h=this.picker.find(i),u=parseInt(r/a,10)*a,p=parseInt(o/n,10)*n,_=parseInt(l/n,10)*n,f=e.map(this.dates,function(e){return parseInt(e.getUTCFullYear()/n,10)*n}),h.find(".datepicker-switch").text(u+"-"+(u+9*n)),g=u-n,m=-1;m<11;m+=1)x=[s],b=null,-1===m?x.push("old"):10===m&&x.push("new"),-1!==e.inArray(g,f)&&x.push("active"),(g<p||g>_)&&x.push("disabled"),g===this.viewDate.getFullYear()&&x.push("focused"),d!==e.noop&&(v=d(new Date(g,0,1)),v===t?v={}:"boolean"==typeof v?v={enabled:v}:"string"==typeof v&&(v={classes:v}),!1===v.enabled&&x.push("disabled"),v.classes&&(x=x.concat(v.classes.split(/\s+/))),v.tooltip&&(b=v.tooltip)),c+='<span class="'+x.join(" ")+'"'+(b?' title="'+b+'"':"")+">"+g+"</span>",g+=n;h.find("td").html(c)},fill:function(){var s,a,n=new Date(this.viewDate),r=n.getUTCFullYear(),o=n.getUTCMonth(),l=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,d=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,c=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,h=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,u=g[this.o.language].today||g.en.today||"",f=g[this.o.language].clear||g.en.clear||"",p=g[this.o.language].titleFormat||g.en.titleFormat;if(!isNaN(r)&&!isNaN(o)){this.picker.find(".datepicker-days .datepicker-switch").text(m.formatDate(n,p,this.o.language)),this.picker.find("tfoot .today").text(u).toggle(!1!==this.o.todayBtn),this.picker.find("tfoot .clear").text(f).toggle(!1!==this.o.clearBtn),this.picker.find("thead .datepicker-title").text(this.o.title).toggle(""!==this.o.title),this.updateNavArrows(),this.fillMonths();var _=i(r,o-1,28),x=m.getDaysInMonth(_.getUTCFullYear(),_.getUTCMonth());_.setUTCDate(x),_.setUTCDate(x-(_.getUTCDay()-this.o.weekStart+7)%7);var b=new Date(_);_.getUTCFullYear()<100&&b.setUTCFullYear(_.getUTCFullYear()),b.setUTCDate(b.getUTCDate()+42),b=b.valueOf();for(var v,y=[];_.valueOf()<b;){if(_.getUTCDay()===this.o.weekStart&&(y.push("<tr>"),this.o.calendarWeeks)){var k=new Date(+_+(this.o.weekStart-_.getUTCDay()-7)%7*864e5),w=new Date(Number(k)+(11-k.getUTCDay())%7*864e5),j=new Date(Number(j=i(w.getUTCFullYear(),0,1))+(11-j.getUTCDay())%7*864e5),C=(w-j)/864e5/7+1;y.push('<td class="cw">'+C+"</td>")}v=this.getClassNames(_),v.push("day"),this.o.beforeShowDay!==e.noop&&(a=this.o.beforeShowDay(this._utc_to_local(_)),a===t?a={}:"boolean"==typeof a?a={enabled:a}:"string"==typeof a&&(a={classes:a}),!1===a.enabled&&v.push("disabled"),a.classes&&(v=v.concat(a.classes.split(/\s+/))),a.tooltip&&(s=a.tooltip)),v=e.isFunction(e.uniqueSort)?e.uniqueSort(v):e.unique(v),y.push('<td class="'+v.join(" ")+'"'+(s?' title="'+s+'"':"")+">"+_.getUTCDate()+"</td>"),s=null,_.getUTCDay()===this.o.weekEnd&&y.push("</tr>"),_.setUTCDate(_.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(y.join(""));var $=g[this.o.language].monthsTitle||g.en.monthsTitle||"Months",T=this.picker.find(".datepicker-months").find(".datepicker-switch").text(this.o.maxViewMode<2?$:r).end().find("span").removeClass("active");if(e.each(this.dates,function(e,t){t.getUTCFullYear()===r&&T.eq(t.getUTCMonth()).addClass("active")}),(r<l||r>c)&&T.addClass("disabled"),r===l&&T.slice(0,d).addClass("disabled"),r===c&&T.slice(h+1).addClass("disabled"),this.o.beforeShowMonth!==e.noop){var z=this;e.each(T,function(i,s){var a=new Date(r,i,1),n=z.o.beforeShowMonth(a);n===t?n={}:"boolean"==typeof n?n={enabled:n}:"string"==typeof n&&(n={classes:n}),!1!==n.enabled||e(s).hasClass("disabled")||e(s).addClass("disabled"),n.classes&&e(s).addClass(n.classes),n.tooltip&&e(s).prop("title",n.tooltip)})}this._fill_yearsView(".datepicker-years","year",10,1,r,l,c,this.o.beforeShowYear),this._fill_yearsView(".datepicker-decades","decade",100,10,r,l,c,this.o.beforeShowDecade),this._fill_yearsView(".datepicker-centuries","century",1e3,100,r,l,c,this.o.beforeShowCentury)}},updateNavArrows:function(){if(this._allow_update){var e=new Date(this.viewDate),t=e.getUTCFullYear(),i=e.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-1/0&&t<=this.o.startDate.getUTCFullYear()&&i<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&t>=this.o.endDate.getUTCFullYear()&&i>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:case 3:case 4:this.o.startDate!==-1/0&&t<=this.o.startDate.getUTCFullYear()||this.o.maxViewMode<2?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&t>=this.o.endDate.getUTCFullYear()||this.o.maxViewMode<2?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(t){t.preventDefault(),t.stopPropagation();var a,n,r,o,l,d,c;a=e(t.target),a.hasClass("datepicker-switch")&&this.showMode(1);var h=a.closest(".prev, .next");h.length>0&&(n=m.modes[this.viewMode].navStep*(h.hasClass("prev")?-1:1),0===this.viewMode?(this.viewDate=this.moveMonth(this.viewDate,n),this._trigger("changeMonth",this.viewDate)):(this.viewDate=this.moveYear(this.viewDate,n),1===this.viewMode&&this._trigger("changeYear",this.viewDate)),this.fill()),a.hasClass("today")&&!a.hasClass("day")&&(this.showMode(-2),
this._setDate(s(),"linked"===this.o.todayBtn?null:"view")),a.hasClass("clear")&&this.clearDates(),a.hasClass("disabled")||(a.hasClass("day")&&(r=parseInt(a.text(),10)||1,o=this.viewDate.getUTCFullYear(),l=this.viewDate.getUTCMonth(),a.hasClass("old")&&(0===l?(l=11,o-=1,d=!0,c=!0):(l-=1,d=!0)),a.hasClass("new")&&(11===l?(l=0,o+=1,d=!0,c=!0):(l+=1,d=!0)),this._setDate(i(o,l,r)),c&&this._trigger("changeYear",this.viewDate),d&&this._trigger("changeMonth",this.viewDate)),a.hasClass("month")&&(this.viewDate.setUTCDate(1),r=1,l=a.parent().find("span").index(a),o=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(l),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode?(this._setDate(i(o,l,r)),this.showMode()):this.showMode(-1),this.fill()),(a.hasClass("year")||a.hasClass("decade")||a.hasClass("century"))&&(this.viewDate.setUTCDate(1),r=1,l=0,o=parseInt(a.text(),10)||0,this.viewDate.setUTCFullYear(o),a.hasClass("year")&&(this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(i(o,l,r))),a.hasClass("decade")&&(this._trigger("changeDecade",this.viewDate),3===this.o.minViewMode&&this._setDate(i(o,l,r))),a.hasClass("century")&&(this._trigger("changeCentury",this.viewDate),4===this.o.minViewMode&&this._setDate(i(o,l,r))),this.showMode(-1),this.fill())),this.picker.is(":visible")&&this._focused_from&&e(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(e){var t=this.dates.contains(e);if(e||this.dates.clear(),-1!==t?(!0===this.o.multidate||this.o.multidate>1||this.o.toggleActive)&&this.dates.remove(t):!1===this.o.multidate?(this.dates.clear(),this.dates.push(e)):this.dates.push(e),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(e,t){t&&"date"!==t||this._toggle_multidate(e&&new Date(e)),t&&"view"!==t||(this.viewDate=e&&new Date(e)),this.fill(),this.setValue(),t&&"view"===t||this._trigger("changeDate"),this.inputField&&this.inputField.change(),!this.o.autoclose||t&&"date"!==t||this.hide()},moveDay:function(e,t){var i=new Date(e);return i.setUTCDate(e.getUTCDate()+t),i},moveWeek:function(e,t){return this.moveDay(e,7*t)},moveMonth:function(e,t){if(!r(e))return this.o.defaultViewDate;if(!t)return e;var i,s,a=new Date(e.valueOf()),n=a.getUTCDate(),o=a.getUTCMonth(),l=Math.abs(t);if(t=t>0?1:-1,1===l)s=-1===t?function(){return a.getUTCMonth()===o}:function(){return a.getUTCMonth()!==i},i=o+t,a.setUTCMonth(i),(i<0||i>11)&&(i=(i+12)%12);else{for(var d=0;d<l;d++)a=this.moveMonth(a,t);i=a.getUTCMonth(),a.setUTCDate(n),s=function(){return i!==a.getUTCMonth()}}for(;s();)a.setUTCDate(--n),a.setUTCMonth(i);return a},moveYear:function(e,t){return this.moveMonth(e,12*t)},moveAvailableDate:function(e,t,i){do{if(e=this[i](e,t),!this.dateWithinRange(e))return!1;i="moveDay"}while(this.dateIsDisabled(e));return e},weekOfDateIsDisabled:function(t){return-1!==e.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled)},dateIsDisabled:function(t){return this.weekOfDateIsDisabled(t)||e.grep(this.o.datesDisabled,function(e){return a(t,e)}).length>0},dateWithinRange:function(e){return e>=this.o.startDate&&e<=this.o.endDate},keydown:function(e){if(!this.picker.is(":visible"))return void(40!==e.keyCode&&27!==e.keyCode||(this.show(),e.stopPropagation()));var t,i,s=!1,a=this.focusDate||this.viewDate;switch(e.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),e.preventDefault(),e.stopPropagation();break;case 37:case 38:case 39:case 40:if(!this.o.keyboardNavigation||7===this.o.daysOfWeekDisabled.length)break;t=37===e.keyCode||38===e.keyCode?-1:1,0===this.viewMode?e.ctrlKey?(i=this.moveAvailableDate(a,t,"moveYear"))&&this._trigger("changeYear",this.viewDate):e.shiftKey?(i=this.moveAvailableDate(a,t,"moveMonth"))&&this._trigger("changeMonth",this.viewDate):37===e.keyCode||39===e.keyCode?i=this.moveAvailableDate(a,t,"moveDay"):this.weekOfDateIsDisabled(a)||(i=this.moveAvailableDate(a,t,"moveWeek")):1===this.viewMode?(38!==e.keyCode&&40!==e.keyCode||(t*=4),i=this.moveAvailableDate(a,t,"moveMonth")):2===this.viewMode&&(38!==e.keyCode&&40!==e.keyCode||(t*=4),i=this.moveAvailableDate(a,t,"moveYear")),i&&(this.focusDate=this.viewDate=i,this.setValue(),this.fill(),e.preventDefault());break;case 13:if(!this.o.forceParse)break;a=this.focusDate||this.dates.get(-1)||this.viewDate,this.o.keyboardNavigation&&(this._toggle_multidate(a),s=!0),this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(e.preventDefault(),e.stopPropagation(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}s&&(this.dates.length?this._trigger("changeDate"):this._trigger("clearDate"),this.inputField&&this.inputField.change())},showMode:function(e){e&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,this.viewMode+e))),this.picker.children("div").hide().filter(".datepicker-"+m.modes[this.viewMode].clsName).show(),this.updateNavArrows()}};var h=function(t,i){e(t).data("datepicker",this),this.element=e(t),this.inputs=e.map(i.inputs,function(e){return e.jquery?e[0]:e}),delete i.inputs,f.call(e(this.inputs),i).on("changeDate",e.proxy(this.dateUpdated,this)),this.pickers=e.map(this.inputs,function(t){return e(t).data("datepicker")}),this.updateDates()};h.prototype={updateDates:function(){this.dates=e.map(this.pickers,function(e){return e.getUTCDate()}),this.updateRanges()},updateRanges:function(){var t=e.map(this.dates,function(e){return e.valueOf()});e.each(this.pickers,function(e,i){i.setRange(t)})},dateUpdated:function(t){if(!this.updating){this.updating=!0;var i=e(t.target).data("datepicker");if(void 0!==i){var s=i.getUTCDate(),a=e.inArray(t.target,this.inputs),n=a-1,r=a+1,o=this.inputs.length;if(-1!==a){if(e.each(this.pickers,function(e,t){t.getUTCDate()||t.setUTCDate(s)}),s<this.dates[n])for(;n>=0&&s<this.dates[n];)this.pickers[n--].setUTCDate(s);else if(s>this.dates[r])for(;r<o&&s>this.dates[r];)this.pickers[r++].setUTCDate(s);this.updateDates(),delete this.updating}}}},remove:function(){e.map(this.pickers,function(e){e.remove()}),delete this.element.data().datepicker}};var u=e.fn.datepicker,f=function(i){var s=Array.apply(null,arguments);s.shift();var a;if(this.each(function(){var t=e(this),n=t.data("datepicker"),r="object"==typeof i&&i;if(!n){var d=o(this,"date"),u=e.extend({},p,d,r),f=l(u.language),_=e.extend({},p,f,d,r);t.hasClass("input-daterange")||_.inputs?(e.extend(_,{inputs:_.inputs||t.find("input").toArray()}),n=new h(this,_)):n=new c(this,_),t.data("datepicker",n)}"string"==typeof i&&"function"==typeof n[i]&&(a=n[i].apply(n,s))}),a===t||a instanceof c||a instanceof h)return this;if(this.length>1)throw new Error("Using only allowed for the collection of a single element ("+i+" function)");return a};e.fn.datepicker=f;var p=e.fn.datepicker.defaults={assumeNearbyYear:!1,autoclose:!1,beforeShowDay:e.noop,beforeShowMonth:e.noop,beforeShowYear:e.noop,beforeShowDecade:e.noop,beforeShowCentury:e.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],daysOfWeekHighlighted:[],datesDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,maxViewMode:4,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,showOnFocus:!0,zIndexOffset:10,container:"body",immediateUpdates:!1,title:"",templates:{leftArrow:"&laquo;",rightArrow:"&raquo;"}},_=e.fn.datepicker.locale_opts=["format","rtl","weekStart"];e.fn.datepicker.Constructor=c;var g=e.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM yyyy"}},m={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10},{clsName:"decades",navFnc:"FullDecade",navStep:100},{clsName:"centuries",navFnc:"FullCentury",navStep:1e3}],isLeapYear:function(e){return e%4==0&&e%100!=0||e%400==0},getDaysInMonth:function(e,t){return[31,m.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\u5e74\u6708\u65e5\[-`{-~\t\n\r]+/g,parseFormat:function(e){if("function"==typeof e.toValue&&"function"==typeof e.toDisplay)return e;var t=e.replace(this.validParts,"\0").split("\0"),i=e.match(this.validParts);if(!t||!t.length||!i||0===i.length)throw new Error("Invalid date format.");return{separators:t,parts:i}},parseDate:function(a,n,r,o){function l(e,t){return!0===t&&(t=10),e<100&&(e+=2e3)>(new Date).getFullYear()+t&&(e-=100),e}function d(){var e=this.slice(0,x[f].length),t=x[f].slice(0,e.length);return e.toLowerCase()===t.toLowerCase()}if(!a)return t;if(a instanceof Date)return a;if("string"==typeof n&&(n=m.parseFormat(n)),n.toValue)return n.toValue(a,n,r);var h,u,f,p,_=/([\-+]\d+)([dmwy])/,x=a.match(/([\-+]\d+)([dmwy])/g),b={d:"moveDay",m:"moveMonth",w:"moveWeek",y:"moveYear"},v={yesterday:"-1d",today:"+0d",tomorrow:"+1d"};if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(a)){for(a=new Date,f=0;f<x.length;f++)h=_.exec(x[f]),u=parseInt(h[1]),p=b[h[2]],a=c.prototype[p](a,u);return i(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate())}if(void 0!==v[a]&&(a=v[a],x=a.match(/([\-+]\d+)([dmwy])/g),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(a))){for(a=new Date,f=0;f<x.length;f++)h=_.exec(x[f]),u=parseInt(h[1]),p=b[h[2]],a=c.prototype[p](a,u);return i(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate())}x=a&&a.match(this.nonpunctuation)||[],a=new Date;var y,k,w={},j=["yyyy","yy","M","MM","m","mm","d","dd"],C={yyyy:function(e,t){return e.setUTCFullYear(o?l(t,o):t)},yy:function(e,t){return e.setUTCFullYear(o?l(t,o):t)},m:function(e,t){if(isNaN(e))return e;for(t-=1;t<0;)t+=12;for(t%=12,e.setUTCMonth(t);e.getUTCMonth()!==t;)e.setUTCDate(e.getUTCDate()-1);return e},d:function(e,t){return e.setUTCDate(t)}};C.M=C.MM=C.mm=C.m,C.dd=C.d,a=s();var $=n.parts.slice();if(x.length!==$.length&&($=e($).filter(function(t,i){return-1!==e.inArray(i,j)}).toArray()),x.length===$.length){var T;for(f=0,T=$.length;f<T;f++){if(y=parseInt(x[f],10),h=$[f],isNaN(y))switch(h){case"MM":k=e(g[r].months).filter(d),y=e.inArray(k[0],g[r].months)+1;break;case"M":k=e(g[r].monthsShort).filter(d),y=e.inArray(k[0],g[r].monthsShort)+1}w[h]=y}var z,D;for(f=0;f<j.length;f++)(D=j[f])in w&&!isNaN(w[D])&&(z=new Date(a),C[D](z,w[D]),isNaN(z)||(a=z))}return a},formatDate:function(t,i,s){if(!t)return"";if("string"==typeof i&&(i=m.parseFormat(i)),i.toDisplay)return i.toDisplay(t,i,s);var a={d:t.getUTCDate(),D:g[s].daysShort[t.getUTCDay()],DD:g[s].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:g[s].monthsShort[t.getUTCMonth()],MM:g[s].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()};a.dd=(a.d<10?"0":"")+a.d,a.mm=(a.m<10?"0":"")+a.m,t=[];for(var n=e.extend([],i.separators),r=0,o=i.parts.length;r<=o;r++)n.length&&t.push(n.shift()),t.push(a[i.parts[r]]);return t.join("")},headTemplate:'<thead><tr><th colspan="7" class="datepicker-title"></th></tr><tr><th class="prev">&laquo;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&raquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};m.template='<div class="datepicker"><div class="datepicker-days"><table class="table-condensed">'+m.headTemplate+"<tbody></tbody>"+m.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+m.headTemplate+m.contTemplate+m.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+m.headTemplate+m.contTemplate+m.footTemplate+'</table></div><div class="datepicker-decades"><table class="table-condensed">'+m.headTemplate+m.contTemplate+m.footTemplate+'</table></div><div class="datepicker-centuries"><table class="table-condensed">'+m.headTemplate+m.contTemplate+m.footTemplate+"</table></div></div>",e.fn.datepicker.DPGlobal=m,e.fn.datepicker.noConflict=function(){return e.fn.datepicker=u,this},e.fn.datepicker.version="1.6.4",e(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var i=e(this);i.data("datepicker")||(t.preventDefault(),f.call(i,"show"))}),e(function(){f.call(e('[data-provide="datepicker-inline"]'))})})},function(e,s){!function(e){"function"==typeof i&&i.amd?i(["jquery"],e):e("object"==typeof s?t(3):jQuery)}(function(e,t){e.fn.editableTableWidget=function(t){"use strict";return e(this).each(function(){var i,s=e.extend(function(){var t=e.extend({},e.fn.editableTableWidget.defaultOptions);return t.editor=t.editor.clone(),t}(),t),a=e(this),n=s.editor.css("position","absolute").hide().appendTo(a.parent()),r=function(e){i=a.find("td:focus"),i.length&&(n.val(i.text()).removeClass("error").show().offset(i.offset()).css(i.css(s.cloneProperties)).width(i.width()).height(i.height()).focus(),e&&n.select())},o=function(t){var s,a=e.trim(n.val()),r=e.Event("change");return!i||i.text()===a||(n.hasClass("error")?(t&&i.trigger("fail",a),!0):(s=i.html(),i.text(a).trigger(r,a),void(!1===r.result&&i.html(s))))},l=function(e,t){return 39===t?e.next("td"):37===t?e.prev("td"):38===t?e.parent().prev().children().eq(e.index()):40===t?e.parent().next().children().eq(e.index()):[]};n.blur(function(){o(!0),n.hide()}).keydown(function(e){if(13===e.which)o(),n.hide(),i.focus(),e.preventDefault(),e.stopPropagation();else if(27===e.which)n.val(i.text()),e.preventDefault(),e.stopPropagation(),n.hide(),i.focus();else if(9===e.which)i.focus();else if(this.selectionEnd-this.selectionStart===this.value.length){var t=l(i,e.which);t.length>0&&(t.focus(),e.preventDefault(),e.stopPropagation())}}).on("input paste",function(){var t=e.Event("validate");i.trigger(t,e.trim(n.val())),!1===t.result?n.addClass("error"):n.removeClass("error")}),a.on("click.bizTableEdit","td[editable]",r),a.find("td").prop("tabindex",1),e(window).on("resize.bizTableEdit",function(){n.is(":visible")&&n.offset(i.offset()).width(i.width()).height(i.height())})})},e.fn.editableTableWidget.defaultOptions={cloneProperties:["padding","padding-top","padding-bottom","padding-left","padding-right","text-align","font","font-size","font-family","font-weight"],editor:e('<input class="biz-table-editor">')}})},function(e,s){!function(e){"function"==typeof i&&i.amd?i(["jquery"],e):e("object"==typeof s?t(3):jQuery)}(function(e,t){"use strict";var i=e(document),s=e(window),a=["a","e","i","o","u","n","c","y"],n=[/[\xE0-\xE5]/g,/[\xE8-\xEB]/g,/[\xEC-\xEF]/g,/[\xF2-\xF6]/g,/[\xF9-\xFC]/g,/[\xF1]/g,/[\xE7]/g,/[\xFD-\xFF]/g],r=function(t,i){var s=this;s.element=t,s.$element=e(t),s.state={multiple:!!s.$element.attr("multiple"),enabled:!1,opened:!1,currValue:-1,selectedIdx:-1,highlightedIdx:-1},s.eventTriggers={open:s.open,close:s.close,destroy:s.destroy,refresh:s.refresh,init:s.init},s.init(i)};r.prototype={utils:{isMobile:function(){return/android|ip(hone|od|ad)/i.test(navigator.userAgent)},escapeRegExp:function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},replaceDiacritics:function(e){for(var t=n.length;t--;)e=e.toLowerCase().replace(n[t],a[t]);return e},format:function(e){var t=arguments;return(""+e).replace(/\{(?:(\d+)|(\w+))\}/g,function(e,i,s){return s&&t[1]?t[1][s]:t[i]})},nextEnabledItem:function(e,t){for(;e[t=(t+1)%e.length].disabled;);return t},previousEnabledItem:function(e,t){for(;e[t=(t>0?t:e.length)-1].disabled;);return t},toDash:function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},triggerCallback:function(t,i){var s=i.element,a=i.options["on"+t],n=[s].concat([].slice.call(arguments).slice(1));e.isFunction(a)&&a.apply(s,n),e(s).trigger("selectric-"+this.toDash(t),n)},arrayToClassname:function(t){var i=e.grep(t,function(e){return!!e});return e.trim(i.join(" "))}},init:function(i){var s=this;if(s.options=e.extend(!0,{},e.fn.selectric.defaults,s.options,i),s.utils.triggerCallback("BeforeInit",s),s.destroy(!0),s.options.disableOnMobile&&s.utils.isMobile())return void(s.disableOnMobile=!0);s.classes=s.getClassNames();var a=e("<input/>",{class:s.classes.input,readonly:s.utils.isMobile()}),n=e("<div/>",{class:s.classes.items,tabindex:-1}),r=e("<div/>",{class:s.classes.scroll}),o=e("<div/>",{class:s.classes.prefix,html:s.options.arrowButtonMarkup}),l=e("<span/>",{class:"label"}),d=s.$element.wrap("<div/>").parent().append(o.prepend(l),n,a),c=e("<div/>",{class:s.classes.hideselect});s.elements={input:a,items:n,itemsScroll:r,wrapper:o,label:l,outerWrapper:d},s.options.nativeOnMobile&&s.utils.isMobile()&&(s.elements.input=t,c.addClass(s.classes.prefix+"-is-native"),s.$element.on("change",function(){s.refresh()})),s.$element.on(s.eventTriggers).wrap(c),s.originalTabindex=s.$element.prop("tabindex"),s.$element.prop("tabindex",-1),s.populate(),s.activate(),s.utils.triggerCallback("Init",s)},activate:function(){var e=this,t=e.elements.items.closest(":visible").children(":hidden").addClass(e.classes.tempshow),i=e.$element.width();t.removeClass(e.classes.tempshow),e.utils.triggerCallback("BeforeActivate",e),e.elements.outerWrapper.prop("class",e.utils.arrayToClassname([e.classes.wrapper,e.$element.prop("class").replace(/\S+/g,e.classes.prefix+"-$&"),e.options.responsive?e.classes.responsive:"","biz-select-"+(e.options.theme||window.bizui.theme)])),e.options.inheritOriginalWidth&&i>0&&e.elements.outerWrapper.width(i),e.unbindEvents(),e.$element.prop("disabled")?(e.elements.outerWrapper.addClass(e.classes.disabled),e.elements.input&&e.elements.input.prop("disabled",!0)):(e.state.enabled=!0,e.elements.outerWrapper.removeClass(e.classes.disabled),e.$li=e.elements.items.removeAttr("style").find("li"),e.bindEvents()),e.utils.triggerCallback("Activate",e)},getClassNames:function(){var t=this,i=t.options.customClass,s={};return e.each("Input Items Open Disabled TempShow HideSelect Wrapper Focus Hover Responsive Above Scroll Group GroupLabel".split(" "),function(e,a){var n=i.prefix+a;s[a.toLowerCase()]=i.camelCase?n:t.utils.toDash(n)}),s.prefix=i.prefix,s},setLabel:function(){var t=this,i=t.options.labelBuilder;if(t.state.multiple){var s=e.isArray(t.state.currValue)?t.state.currValue:[t.state.currValue];s=0===s.length?[0]:s;var a=e.map(s,function(i){return e.grep(t.lookupItems,function(e){return e.index===i})[0]});a=e.grep(a,function(t){return a.length>1||0===a.length?""!==e.trim(t.value):t}),a=e.map(a,function(s){return e.isFunction(i)?i(s):t.utils.format(i,s)}),t.options.multiple.maxLabelEntries&&(a.length>=t.options.multiple.maxLabelEntries+1?(a=a.slice(0,t.options.multiple.maxLabelEntries),a.push(e.isFunction(i)?i({text:"..."}):t.utils.format(i,{text:"..."}))):a.slice(a.length-1)),t.elements.label.html(a.join(t.options.multiple.separator))}else{var n=t.lookupItems[t.state.currValue];t.elements.label.html(e.isFunction(i)?i(n):t.utils.format(i,n))}},populate:function(){var t=this,i=t.$element.children(),s=t.$element.find("option"),a=s.filter(":selected"),n=s.index(a),r=0,o=t.state.multiple?[]:0;a.length>1&&t.state.multiple&&(n=[],a.each(function(){n.push(e(this).index())})),t.state.currValue=~n?n:o,t.state.selectedIdx=t.state.currValue,t.state.highlightedIdx=t.state.currValue,t.items=[],t.lookupItems=[],i.length&&(i.each(function(i){var s=e(this);if(s.is("optgroup")){var a={element:s,label:s.prop("label"),groupDisabled:s.prop("disabled"),items:[]};s.children().each(function(i){var s=e(this);a.items[i]=t.getItemData(r,s,a.groupDisabled||s.prop("disabled")),t.lookupItems[r]=a.items[i],r++}),t.items[i]=a}else t.items[i]=t.getItemData(r,s,s.prop("disabled")),t.lookupItems[r]=t.items[i],r++}),t.setLabel(),t.elements.items.append(t.elements.itemsScroll.html(t.getItemsMarkup(t.items))))},getItemData:function(t,i,s){var a=this;return{index:t,element:i,value:i.val(),className:i.prop("class"),text:i.html(),slug:e.trim(a.utils.replaceDiacritics(i.html())),selected:i.prop("selected"),disabled:s}},getItemsMarkup:function(i){var s=this,a="<ul>";return e.isFunction(s.options.listBuilder)&&s.options.listBuilder&&(i=s.options.listBuilder(i)),e.each(i,function(i,n){n.label!==t?(a+=s.utils.format('<ul class="{1}"><li class="{2}">{3}</li>',s.utils.arrayToClassname([s.classes.group,n.groupDisabled?"disabled":"",n.element.prop("class")]),s.classes.grouplabel,n.element.prop("label")),e.each(n.items,function(e,t){a+=s.getItemMarkup(t.index,t)}),a+="</ul>"):a+=s.getItemMarkup(n.index,n)}),a+"</ul>"},getItemMarkup:function(t,i){var s=this,a=s.options.optionsItemBuilder,n={value:i.value,text:i.text,slug:i.slug,index:i.index};return s.utils.format('<li data-index="{1}" class="{2}">{3}</li>',t,s.utils.arrayToClassname([i.className,t===s.items.length-1?"last":"",i.disabled?"disabled":"",i.selected?"selected":""]),e.isFunction(a)?s.utils.format(a(i),i):s.utils.format(a,n))},unbindEvents:function(){var e=this;e.elements.wrapper.add(e.$element).add(e.elements.outerWrapper).add(e.elements.input).off(".sl")},bindEvents:function(){var t=this;t.elements.outerWrapper.on("mouseenter.sl mouseleave.sl",function(i){e(this).toggleClass(t.classes.hover,"mouseenter"===i.type),t.options.openOnHover&&(clearTimeout(t.closeTimer),"mouseleave"===i.type?t.closeTimer=setTimeout(e.proxy(t.close,t),t.options.hoverIntentTimeout):t.open())}),t.elements.wrapper.on("click.sl",function(e){t.state.opened?t.close():t.open(e)}),t.options.nativeOnMobile&&t.utils.isMobile()||(t.$element.on("focus.sl",function(){t.elements.input.focus()}),t.elements.input.prop({tabindex:t.originalTabindex,disabled:!1}).on("keydown.sl",e.proxy(t.handleKeys,t)).on("focusin.sl",function(e){t.elements.outerWrapper.addClass(t.classes.focus),t.elements.input.one("blur",function(){t.elements.input.blur()}),t.options.openOnFocus&&!t.state.opened&&t.open(e)}).on("focusout.sl",function(){t.elements.outerWrapper.removeClass(t.classes.focus)}).on("input propertychange",function(){var i=t.elements.input.val(),s=new RegExp("^"+t.utils.escapeRegExp(i),"i");clearTimeout(t.resetStr),t.resetStr=setTimeout(function(){t.elements.input.val("")},t.options.keySearchTimeout),i.length&&e.each(t.items,function(e,i){if(!i.disabled&&s.test(i.text)||s.test(i.slug))return void t.highlight(e)})})),t.$li.on({mousedown:function(e){e.preventDefault(),e.stopPropagation()},click:function(){return t.select(e(this).data("index")),!1}})},handleKeys:function(t){var i=this,s=t.which,a=i.options.keys,n=e.inArray(s,a.previous)>-1,r=e.inArray(s,a.next)>-1,o=e.inArray(s,a.select)>-1,l=e.inArray(s,a.open)>-1,d=i.state.highlightedIdx,c=n&&0===d||r&&d+1===i.items.length,h=0;if(13!==s&&32!==s||t.preventDefault(),n||r){if(!i.options.allowWrap&&c)return;n&&(h=i.utils.previousEnabledItem(i.lookupItems,d)),r&&(h=i.utils.nextEnabledItem(i.lookupItems,d)),i.highlight(h)}if(o&&i.state.opened)return i.select(d),void(i.state.multiple&&i.options.multiple.keepMenuOpen||i.close());l&&!i.state.opened&&i.open()},refresh:function(){var e=this;e.populate(),e.activate(),e.utils.triggerCallback("Refresh",e)},setOptionsDimensions:function(){var e=this,t=e.elements.items.closest(":visible").children(":hidden").addClass(e.classes.tempshow),i=e.options.maxHeight,s=e.elements.items.outerWidth(),a=e.elements.wrapper.outerWidth()-(s-e.elements.items.width());!e.options.expandToItemText||a>s?e.finalWidth=a:(e.elements.items.css("overflow","scroll"),e.elements.outerWrapper.width(9e4),e.finalWidth=e.elements.items.width(),e.elements.items.css("overflow",""),e.elements.outerWrapper.width("")),e.elements.items.width(e.finalWidth).height()>i&&e.elements.items.height(i),t.removeClass(e.classes.tempshow)},isInViewport:function(){var e=this,t=s.scrollTop(),i=s.height(),a=e.elements.outerWrapper.offset().top,n=e.elements.outerWrapper.outerHeight(),r=a+n+e.itemsHeight<=t+i,o=a-e.itemsHeight>t,l=!r&&o;e.elements.outerWrapper.toggleClass(e.classes.above,l)},detectItemVisibility:function(t){var i=this,s=i.$li.filter("[data-index]");i.state.multiple&&(t=e.isArray(t)&&0===t.length?0:t,t=e.isArray(t)?Math.min.apply(Math,t):t);var a=s.eq(t).outerHeight(),n=s[t].offsetTop,r=i.elements.itemsScroll.scrollTop(),o=n+2*a;i.elements.itemsScroll.scrollTop(o>r+i.itemsHeight?o-i.itemsHeight:n-a<r?n-a:r)},open:function(t){var s=this;if(s.options.nativeOnMobile&&s.utils.isMobile())return!1;s.utils.triggerCallback("BeforeOpen",s),t&&(t.preventDefault(),s.options.stopPropagation&&t.stopPropagation()),s.state.enabled&&(s.setOptionsDimensions(),e("."+s.classes.hideselect,"."+s.classes.open).children().selectric("close"),s.state.opened=!0,s.itemsHeight=s.elements.items.outerHeight(),s.itemsInnerHeight=s.elements.items.height(),s.elements.outerWrapper.addClass(s.classes.open),s.elements.input.val(""),t&&"focusin"!==t.type&&s.elements.input.focus(),setTimeout(function(){i.on("click.sl",e.proxy(s.close,s)).on("scroll.sl",e.proxy(s.isInViewport,s))},1),s.isInViewport(),s.options.preventWindowScroll&&i.on("mousewheel.sl DOMMouseScroll.sl","."+s.classes.scroll,function(t){var i=t.originalEvent,a=e(this).scrollTop(),n=0;"detail"in i&&(n=-1*i.detail),"wheelDelta"in i&&(n=i.wheelDelta),"wheelDeltaY"in i&&(n=i.wheelDeltaY),"deltaY"in i&&(n=-1*i.deltaY),(a===this.scrollHeight-s.itemsInnerHeight&&n<0||0===a&&n>0)&&t.preventDefault()}),s.detectItemVisibility(s.state.selectedIdx),s.highlight(s.state.multiple?-1:s.state.selectedIdx),s.utils.triggerCallback("Open",s))},close:function(){var e=this;e.utils.triggerCallback("BeforeClose",e),i.off(".sl"),e.elements.outerWrapper.removeClass(e.classes.open),e.state.opened=!1,e.utils.triggerCallback("Close",e)},change:function(){var t=this;t.utils.triggerCallback("BeforeChange",t),t.state.multiple?(e.each(t.lookupItems,function(e){t.lookupItems[e].selected=!1,t.$element.find("option").prop("selected",!1)}),e.each(t.state.selectedIdx,function(e,i){t.lookupItems[i].selected=!0,t.$element.find("option").eq(i).prop("selected",!0)}),t.state.currValue=t.state.selectedIdx,t.setLabel(),t.utils.triggerCallback("Change",t)):t.state.currValue!==t.state.selectedIdx&&(t.$element.prop("selectedIndex",t.state.currValue=t.state.selectedIdx).data("value",t.lookupItems[t.state.selectedIdx].text),t.setLabel(),t.utils.triggerCallback("Change",t))},highlight:function(e){var i=this,s=i.$li.filter("[data-index]").removeClass("highlighted");i.utils.triggerCallback("BeforeHighlight",i),e===t||-1===e||i.lookupItems[e].disabled||(s.eq(i.state.highlightedIdx=e).addClass("highlighted"),i.detectItemVisibility(e),i.utils.triggerCallback("Highlight",i))},select:function(i){var s=this,a=s.$li.filter("[data-index]");if(s.utils.triggerCallback("BeforeSelect",s,i),i!==t&&-1!==i&&!s.lookupItems[i].disabled){if(s.state.multiple){s.state.selectedIdx=e.isArray(s.state.selectedIdx)?s.state.selectedIdx:[s.state.selectedIdx];var n=e.inArray(i,s.state.selectedIdx);-1!==n?s.state.selectedIdx.splice(n,1):s.state.selectedIdx.push(i),a.removeClass("selected").filter(function(t){return-1!==e.inArray(t,s.state.selectedIdx)}).addClass("selected")}else a.removeClass("selected").eq(s.state.selectedIdx=i).addClass("selected");s.state.multiple&&s.options.multiple.keepMenuOpen||s.close(),s.change(),s.utils.triggerCallback("Select",s,i)}},destroy:function(e){var t=this;t.state&&t.state.enabled&&(t.elements.items.add(t.elements.wrapper).add(t.elements.input).remove(),e||t.$element.removeData("selectric").removeData("value"),t.$element.prop("tabindex",t.originalTabindex).off(".sl").off(t.eventTriggers).unwrap().unwrap(),t.state.enabled=!1)}},e.fn.selectric=function(t){return this.each(function(){var i=e.data(this,"selectric");i&&!i.disableOnMobile?"string"==typeof t&&i[t]?i[t]():i.init(t):e.data(this,"selectric",new r(this,t))})},e.fn.selectric.defaults={onChange:function(t){e(t).change()},maxHeight:300,keySearchTimeout:500,arrowButtonMarkup:'<b class="button">&#x25be;</b>',disableOnMobile:!1,nativeOnMobile:!0,openOnFocus:!0,openOnHover:!1,hoverIntentTimeout:500,expandToItemText:!1,responsive:!1,preventWindowScroll:!0,inheritOriginalWidth:!1,allowWrap:!0,stopPropagation:!0,optionsItemBuilder:"{text}",labelBuilder:"{text}",listBuilder:!1,keys:{previous:[37,38],next:[39,40],select:[9,13,27],open:[13,32,37,38,39,40],close:[9,27]},customClass:{prefix:"selectric",camelCase:!1},multiple:{separator:", ",keepMenuOpen:!0,maxLabelEntries:!1}}})},function(e,s){!function(e){"function"==typeof i&&i.amd?i(["jquery"],e):e("object"==typeof s?t(3):jQuery)}(function(e,t){var i={init:function(t){var s=e.extend({cssStyle:(t.theme||window.bizui.theme)+(t.customClass?" "+t.customClass:""),currentPage:t.pageNumber||0,items:t.totalNumber||1,itemsOnPage:t.pageSize||1,prevText:'<i class="biz-icon">&#xe5cb;</i>',nextText:'<i class="biz-icon">&#xe5cc;</i>',edges:2,displayedPages:5,pages:0,ellipsePageSet:!1,ellipseText:"&hellip;",labelMap:[],listStyle:"",invertPageOrder:!1,nextAtFront:!1,selectOnClick:!0,useStartEdge:!0,useEndEdge:!0,onInit:function(){}},t||{}),a=this;return s.pages=s.pages?s.pages:Math.ceil(s.items/s.itemsOnPage)?Math.ceil(s.items/s.itemsOnPage):1,s.currentPage?s.currentPage=s.currentPage-1:s.currentPage=s.invertPageOrder?s.pages-1:0,s.halfDisplayed=s.displayedPages/2,this.each(function(){a.addClass("biz-page biz-page-"+s.cssStyle).data("pagination",s),i._draw.call(a)}),s.onInit(),this},setPageNumber:function(e){return i._selectPage.call(this,e-1),this},prevPage:function(){var e=this.data("pagination");return e.invertPageOrder?e.currentPage<e.pages-1&&i._selectPage.call(this,e.currentPage+1):e.currentPage>0&&i._selectPage.call(this,e.currentPage-1),this},nextPage:function(){var e=this.data("pagination");return e.invertPageOrder?e.currentPage>0&&i._selectPage.call(this,e.currentPage-1):e.currentPage<e.pages-1&&i._selectPage.call(this,e.currentPage+1),this},getPageCount:function(){return this.data("pagination").pages},setPagesCount:function(e){this.data("pagination").pages=e},getPageNumber:function(){return this.data("pagination").currentPage+1},destroy:function(){return this.empty(),this},drawPage:function(e){var t=this.data("pagination");return t.currentPage=e-1,this.data("pagination",t),i._draw.call(this),this},redraw:function(){return i._draw.call(this),this},disable:function(){var e=this.data("pagination");return e.disabled=!0,this.data("pagination",e),i._draw.call(this),this},enable:function(){var e=this.data("pagination");return e.disabled=!1,this.data("pagination",e),i._draw.call(this),this},setTotalNumber:function(e,s){var a=this.data("pagination");a.items=e,a.pages=i._getPages(a),this.data("pagination",a),i._draw.call(this),s!==t&&s&&i.drawPage.call(this,1)},setPageSize:function(e){var t=this.data("pagination");return t.itemsOnPage=e,t.pages=i._getPages(t),this.data("pagination",t),i._selectPage.call(this,0),this},getPageSize:function(){return this.data("pagination").itemsOnPage},_draw:function(){var t,s,a=this.data("pagination"),n=i._getInterval(a);i.destroy.call(this),s="function"==typeof this.prop?this.prop("tagName"):this.attr("tagName");var r="UL"===s?this:e("<ul"+(a.listStyle?' class="'+a.listStyle+'"':"")+"></ul>").appendTo(this);if(a.prevText&&i._appendItem.call(this,a.invertPageOrder?a.currentPage+1:a.currentPage-1,{text:a.prevText,classes:"prev"}),a.nextText&&a.nextAtFront&&i._appendItem.call(this,a.invertPageOrder?a.currentPage-1:a.currentPage+1,{text:a.nextText,classes:"next"}),a.invertPageOrder){if(n.end<a.pages&&a.edges>0){if(a.useStartEdge){var o=Math.max(a.pages-a.edges,n.end);for(t=a.pages-1;t>=o;t--)i._appendItem.call(this,t)}
a.pages-a.edges>n.end&&a.pages-a.edges-n.end!=1?r.append('<li class="disabled"><span class="ellipse">'+a.ellipseText+"</span></li>"):a.pages-a.edges-n.end==1&&i._appendItem.call(this,n.end)}}else if(n.start>0&&a.edges>0){if(a.useStartEdge){var l=Math.min(a.edges,n.start);for(t=0;t<l;t++)i._appendItem.call(this,t)}a.edges<n.start&&n.start-a.edges!=1?r.append('<li class="disabled"><span class="ellipse">'+a.ellipseText+"</span></li>"):n.start-a.edges==1&&i._appendItem.call(this,a.edges)}if(a.invertPageOrder)for(t=n.end-1;t>=n.start;t--)i._appendItem.call(this,t);else for(t=n.start;t<n.end;t++)i._appendItem.call(this,t);if(a.invertPageOrder){if(n.start>0&&a.edges>0&&(a.edges<n.start&&n.start-a.edges!=1?r.append('<li class="disabled"><span class="ellipse">'+a.ellipseText+"</span></li>"):n.start-a.edges==1&&i._appendItem.call(this,a.edges),a.useEndEdge)){var l=Math.min(a.edges,n.start);for(t=l-1;t>=0;t--)i._appendItem.call(this,t)}}else if(n.end<a.pages&&a.edges>0&&(a.pages-a.edges>n.end&&a.pages-a.edges-n.end!=1?r.append('<li class="disabled"><span class="ellipse">'+a.ellipseText+"</span></li>"):a.pages-a.edges-n.end==1&&i._appendItem.call(this,n.end),a.useEndEdge)){var o=Math.max(a.pages-a.edges,n.end);for(t=o;t<a.pages;t++)i._appendItem.call(this,t)}a.nextText&&!a.nextAtFront&&i._appendItem.call(this,a.invertPageOrder?a.currentPage-1:a.currentPage+1,{text:a.nextText,classes:"next"}),a.ellipsePageSet&&!a.disabled&&i._ellipseClick.call(this,r)},_getPages:function(e){return Math.ceil(e.items/e.itemsOnPage)||1},_getInterval:function(e){return{start:Math.ceil(e.currentPage>e.halfDisplayed?Math.max(Math.min(e.currentPage-e.halfDisplayed,e.pages-e.displayedPages),0):0),end:Math.ceil(e.currentPage>e.halfDisplayed?Math.min(e.currentPage+e.halfDisplayed,e.pages):Math.min(e.displayedPages,e.pages))}},_appendItem:function(t,s){var a,n,r=this,o=r.data("pagination"),l=e("<li></li>"),d=r.find("ul");t=t<0?0:t<o.pages?t:o.pages-1,a={text:t+1,classes:""},o.labelMap.length&&o.labelMap[t]&&(a.text=o.labelMap[t]),a=e.extend(a,s||{}),t==o.currentPage||o.disabled?(o.disabled||"prev"===a.classes||"next"===a.classes?l.addClass("disabled"):l.addClass("active"),n=e('<span class="current">'+a.text+"</span>")):(n=e('<a href="javascript:void(0);" class="page-link">'+a.text+"</a>"),n.click(function(e){return i._selectPage.call(r,t,e)})),a.classes&&n.addClass(a.classes),l.append(n),d.length?d.append(l):r.append(l)},_selectPage:function(t,s){var a=this.data("pagination");return a.currentPage=t,a.selectOnClick&&i._draw.call(this),e(this).trigger("change",t+1)},_ellipseClick:function(t){var s=this,a=this.data("pagination"),n=t.find(".ellipse");n.addClass("clickable").parent().removeClass("disabled"),n.click(function(t){if(!a.disable){var r=e(this),o=(parseInt(r.parent().prev().text(),10)||0)+1;r.html('<input type="number" min="1" max="'+a.pages+'" step="1" value="'+o+'">').find("input").focus().click(function(e){e.stopPropagation()}).keyup(function(t){var r=e(this).val();13===t.which&&""!==r?r>0&&r<=a.pages&&i._selectPage.call(s,r-1):27===t.which&&n.empty().html(a.ellipseText)}).bind("blur",function(t){var r=e(this).val();return""!==r&&i._selectPage.call(s,r-1),n.empty().html(a.ellipseText),!1})}return!1})}};e.fn.pagination=function(t){return i[t]&&"_"!=t.charAt(0)?i[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.pagination"):i.init.apply(this,arguments)}})},function(e,s){!function(e){"function"==typeof i&&i.amd?i(["jquery"],e):e("object"==typeof s?t(3):jQuery)}(function(e,t){var i,s,a;i=function(){function t(t,i,s){var a;this.row=t,this.tree=i,this.settings=s,this.id=this.row.data(this.settings.nodeIdAttr),a=this.row.data(this.settings.parentIdAttr),null!=a&&""!==a&&(this.parentId=a),this.treeCell=e(this.row.children(this.settings.columnElType)[this.settings.column]),this.expander=e(this.settings.expanderTemplate),this.indenter=e(this.settings.indenterTemplate),this.children=[],this.initialized=!1,this.treeCell.prepend(this.indenter)}return t.prototype.addChild=function(e){return this.children.push(e)},t.prototype.ancestors=function(){var e,t;for(t=this,e=[];t=t.parentNode();)e.push(t);return e},t.prototype.collapse=function(){return this.collapsed()?this:(this.row.removeClass("expanded").addClass("collapsed"),this._hideChildren(),this.expander.attr("title",this.settings.stringExpand),this.initialized&&null!=this.settings.onNodeCollapse&&this.settings.onNodeCollapse.apply(this),this)},t.prototype.collapsed=function(){return this.row.hasClass("collapsed")},t.prototype.expand=function(){return this.expanded()?this:(this.row.removeClass("collapsed").addClass("expanded"),this.initialized&&null!=this.settings.onNodeExpand&&this.settings.onNodeExpand.apply(this),e(this.row).is(":visible")&&this._showChildren(),this.expander.attr("title",this.settings.stringCollapse),this)},t.prototype.expanded=function(){return this.row.hasClass("expanded")},t.prototype.hide=function(){return this._hideChildren(),this.row.hide(),this},t.prototype.isBranchNode=function(){return this.children.length>0||!0===this.row.data(this.settings.branchAttr)},t.prototype.updateBranchLeafClass=function(){this.row.removeClass("branch"),this.row.removeClass("leaf"),this.row.addClass(this.isBranchNode()?"branch":"leaf")},t.prototype.level=function(){return this.ancestors().length},t.prototype.parentNode=function(){return null!=this.parentId?this.tree[this.parentId]:null},t.prototype.removeChild=function(t){var i=e.inArray(t,this.children);return this.children.splice(i,1)},t.prototype.render=function(){var t,i,s=this.settings;return!0===s.expandable&&this.isBranchNode()&&(t=function(t){return e(this).parents("table").treetable("node",e(this).parents("tr").data(s.nodeIdAttr)).toggle(),t.preventDefault()},this.indenter.html(this.expander),i=!0===s.clickableNodeNames?this.treeCell:this.expander,i.off("click.treetable").on("click.treetable",t),i.off("keydown.treetable").on("keydown.treetable",function(e){13==e.keyCode&&t.apply(this,[e])})),this.indenter[0].style.paddingLeft=this.level()*s.indent+"px",this},t.prototype.reveal=function(){return null!=this.parentId&&this.parentNode().reveal(),this.expand()},t.prototype.setParent=function(e){return null!=this.parentId&&this.tree[this.parentId].removeChild(this),this.parentId=e.id,this.row.data(this.settings.parentIdAttr,e.id),e.addChild(this)},t.prototype.show=function(){return this.initialized||this._initialize(),this.row.show(),this.expanded()&&this._showChildren(),this},t.prototype.toggle=function(){return this.expanded()?this.collapse():this.expand(),this},t.prototype._hideChildren=function(){var e,t,i,s,a;for(s=this.children,a=[],t=0,i=s.length;t<i;t++)e=s[t],a.push(e.hide());return a},t.prototype._initialize=function(){var e=this.settings;return this.render(),!0===e.expandable&&"collapsed"===e.initialState?this.collapse():this.expand(),null!=e.onNodeInitialized&&e.onNodeInitialized.apply(this),this.initialized=!0},t.prototype._showChildren=function(){var e,t,i,s,a;for(s=this.children,a=[],t=0,i=s.length;t<i;t++)e=s[t],a.push(e.show());return a},t}(),s=function(){function t(e,t){this.table=e,this.settings=t,this.tree={},this.nodes=[],this.roots=[]}return t.prototype.collapseAll=function(){var e,t,i,s,a;for(s=this.nodes,a=[],t=0,i=s.length;t<i;t++)e=s[t],a.push(e.collapse());return a},t.prototype.expandAll=function(){var e,t,i,s,a;for(s=this.nodes,a=[],t=0,i=s.length;t<i;t++)e=s[t],a.push(e.expand());return a},t.prototype.findLastNode=function(e){return e.children.length>0?this.findLastNode(e.children[e.children.length-1]):e},t.prototype.loadRows=function(t){var s,a,n;if(null!=t)for(n=0;n<t.length;n++)a=e(t[n]),null!=a.data(this.settings.nodeIdAttr)&&(s=new i(a,this.tree,this.settings),this.nodes.push(s),this.tree[s.id]=s,null!=s.parentId&&this.tree[s.parentId]?this.tree[s.parentId].addChild(s):this.roots.push(s));for(n=0;n<this.nodes.length;n++)s=this.nodes[n].updateBranchLeafClass();return this},t.prototype.move=function(t,i){var s=t.parentNode();return t!==i&&i.id!==t.parentId&&-1===e.inArray(t,i.ancestors())&&(t.setParent(i),this._moveRows(t,i),1===t.parentNode().children.length&&t.parentNode().render()),s&&s.updateBranchLeafClass(),t.parentNode()&&t.parentNode().updateBranchLeafClass(),t.updateBranchLeafClass(),this},t.prototype.removeNode=function(t){return this.unloadBranch(t),t.row.remove(),null!=t.parentId&&t.parentNode().removeChild(t),delete this.tree[t.id],this.nodes.splice(e.inArray(t,this.nodes),1),this},t.prototype.render=function(){var e,t,i,s;for(s=this.roots,t=0,i=s.length;t<i;t++)e=s[t],e.show();return this},t.prototype.sortBranch=function(e,t){return e.children.sort(t),this._sortChildRows(e),this},t.prototype.unloadBranch=function(e){var t,i=e.children.slice(0);for(t=0;t<i.length;t++)this.removeNode(i[t]);return e.children=[],e.updateBranchLeafClass(),this},t.prototype._moveRows=function(e,t){var i,s=e.children;for(e.row.insertAfter(t.row),e.render(),i=s.length-1;i>=0;i--)this._moveRows(s[i],e)},t.prototype._sortChildRows=function(e){return this._moveRows(e,e)},t}(),a={init:function(i,a){var n;return n=e.extend({branchAttr:"ttBranch",clickableNodeNames:!1,column:0,columnElType:"td",customClass:"",expandable:!0,expanderTemplate:"<a href='javascript:void(0)'>&nbsp;</a>",indent:19,indenterTemplate:"<span class='indenter'></span>",initialState:"collapsed",nodeIdAttr:"ttId",parentIdAttr:"ttParentId",stringExpand:"",stringCollapse:"",onInitialized:null,onNodeCollapse:null,onNodeExpand:null,onNodeInitialized:null},i),this.each(function(){var i,r=e(this);return(a||r.data("treetable")===t)&&(i=new s(this,n),i.loadRows(this.rows).render(),r.addClass("treetable "+n.customClass).data("treetable",i),null!=n.onInitialized&&n.onInitialized.apply(i)),r})},destroy:function(){return this.each(function(){return e(this).find("span.indenter a").off(),e(this).find("span.indenter").remove(),e(this).removeData("treetable").removeClass("treetable")})},collapseAll:function(){return this.data("treetable").collapseAll(),this},collapseNode:function(e){var t=this.data("treetable").tree[e];if(!t)throw new Error("Unknown node '"+e+"'");return t.collapse(),this},expandAll:function(){return this.data("treetable").expandAll(),this},expandNode:function(e){var t=this.data("treetable").tree[e];if(!t)throw new Error("Unknown node '"+e+"'");return t.initialized||t._initialize(),t.expand(),this},loadBranch:function(t,i){var s=this.data("treetable").settings,a=this.data("treetable").tree;if(i=e(i),null==t)this.append(i);else{var n=this.data("treetable").findLastNode(t);i.insertAfter(n.row)}return this.data("treetable").loadRows(i),i.filter("tr").each(function(){a[e(this).data(s.nodeIdAttr)].show()}),null!=t&&t.render().expand(),this},move:function(e,t){var i,s;return s=this.data("treetable").tree[e],i=this.data("treetable").tree[t],this.data("treetable").move(s,i),this},node:function(e){return this.data("treetable").tree[e]},removeNode:function(e){var t=this.data("treetable").tree[e];if(!t)throw new Error("Unknown node '"+e+"'");return this.data("treetable").removeNode(t),this},reveal:function(e){var t=this.data("treetable").tree[e];if(!t)throw new Error("Unknown node '"+e+"'");return t.reveal(),this},sortBranch:function(t,i){var s,a=this.data("treetable").settings;return i=i||a.column,s=i,e.isNumeric(i)&&(s=function(t,s){var a,n,r;return a=function(t){var s=t.row.find("td:eq("+i+")").text();return e.trim(s).toUpperCase()},n=a(t),r=a(s),n<r?-1:n>r?1:0}),this.data("treetable").sortBranch(t,s),this},unloadBranch:function(e){return this.data("treetable").unloadBranch(e),this}},e.fn.treetable=function(t){return a[t]?a[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?e.error("Method "+t+" does not exist on jQuery.treetable"):a.init.apply(this,arguments)},this.TreeTable||(this.TreeTable={}),this.TreeTable.Node=i,this.TreeTable.Tree=s})},function(e,t){function i(e,t){this.main=e,this.$main=$(this.main);var i={theme:window.bizui.theme,customClass:"",size:"small"};this.options=$.extend(i,t||{}),this.init(this.options)}function s(e){return 1===e.nodeType&&"button"===e.tagName.toLowerCase()}i.prototype={init:function(e){if(this.originHTML=this.$main.html(),this.$main.addClass(["biz-button",e.customClass,"biz-button-"+e.theme].join(" ")),"large"===e.size&&this.$main.addClass("biz-button-large"),e.text&&this.$main.html(e.text),e.icon){var t=document.documentMode?window.bizui.codepoints[e.icon]:e.icon;this.$main.prepend('<i class="biz-icon">'+t+"</i> ")}e.disabled&&this.disable()},enable:function(){this.main.disabled=!1,this.$main.removeClass("biz-button-disable")},disable:function(){this.main.disabled=!0,this.$main.addClass("biz-button-disable")},destroy:function(){this.$main.removeClass(["biz-button",this.options.customClass,"biz-button-"+this.options.theme,"biz-button-large","biz-button-disable"].join(" ")),this.$main.html(this.originHTML),this.originHTML=null,this.$main.data("bizButton",null)}},$.extend($.fn,{bizButton:function(e){var t,a=arguments;return this.each(function(){var n=$(this).data("bizButton");if(n){if("string"==typeof e&&"function"==typeof n[e]&&void 0!==(t=n[e].apply(n,Array.prototype.slice.call(a,1))))return!1}else s(this)&&(void 0===e||jQuery.isPlainObject(e))&&$(this).data("bizButton",new i(this,e))}),void 0!==t?t:this}}),e.exports=i},function(e,i){function s(e,t){}t(8),t(1),s.prototype={destroy:function(){},show:function(){},hide:function(){},setDate:function(e){},getDate:function(){},setStartDate:function(e){},setEndDate:function(e){},setDatesDisabled:function(e){},setDaysOfWeekDisabled:function(e){},setDaysOfWeekHighlighted:function(e){}},$.extend($.fn.datepicker.defaults,{autoclose:!0,language:"zh-CN"}),$.extend($.fn.datepicker.dates["zh-CN"],{format:"yyyy-mm-dd"}),$.extend($.fn,{bizCalendar:$.fn.datepicker}),e.exports=s},function(e,t){function i(e,t){this.main=e,this.$main=$(this.main),this.$group=$('input[name="'+this.$main.attr("name")+'"]');var i={theme:window.bizui.theme};this.options=$.extend(i,t||{}),this.init(this.options)}function s(e){return 1===e.nodeType&&"input"===e.tagName.toLowerCase()&&"checkbox"===e.getAttribute("type").toLowerCase()}var a="biz-checkbox-unchecked",n="biz-checkbox-unchecked-hover",r="biz-checkbox-checked",o="biz-checkbox-checked-hover";i.prototype={init:function(e){var t=this.$main.attr("title"),i=this.$main.attr("id")||"";this.$main.after('<label for="'+i+'"><i class="biz-icon"></i>'+t+"</label>").hide(),this.$label=this.$main.next(),this.defaultClass="biz-label biz-label-"+e.theme,this.$label.addClass(this.defaultClass),this.$icon=this.$label.children("i"),this.main.checked?(this.$label.addClass(this.main.disabled?"biz-checkbox-checked-disabled":r),this.$icon.html("&#xe834;")):(this.$label.addClass(this.main.disabled?"biz-checkbox-unchecked-disabled":a),this.$icon.html("&#xe835;"));var s=this;this.$label.on("mouseover.bizCheckbox",function(){s.main.disabled||$(this).addClass(s.main.checked?o:n)}).on("mouseout.bizCheckbox",function(){s.main.disabled||$(this).removeClass(s.main.checked?o:n)}).on("click.bizCheckbox",function(){s.main.disabled||(s.main.checked?($(this).attr("class",[s.defaultClass,a,n].join(" ")),s.$icon.html("&#xe835;")):($(this).attr("class",[s.defaultClass,r,o].join(" ")),s.$icon.html("&#xe834;")),""===i&&(s.main.checked=!s.main.checked))})},check:function(){this.main.checked=!0,this.$label.attr("class",this.defaultClass+" "+(this.main.disabled?"biz-checkbox-checked-disabled":r)),this.$icon.html("&#xe834;")},uncheck:function(){this.main.checked=!1,this.$label.attr("class",this.defaultClass+" "+(this.main.disabled?"biz-checkbox-unchecked-disabled":a)),this.$icon.html("&#xe835;")},enable:function(){this.main.disabled=!1,this.$label.attr("class",this.defaultClass+" "+(this.main.checked?r:a))},disable:function(){this.main.disabled=!0,this.$label.attr("class",this.defaultClass+" "+(this.main.checked?"biz-checkbox-checked-disabled":"biz-checkbox-unchecked-disabled"))},val:function(){var e=[];return this.$group.each(function(t,i){i.checked&&e.push($(i).val())}),e.join(",")},destroy:function(){this.$main.show(),this.$label.off("mouseover.bizCheckbox").off("mouseout.bizCheckbox").off("click.bizCheckbox").remove(),this.$main.data("bizCheckbox",null)}},$.extend($.fn,{bizCheckbox:function(e){var t,a=arguments;return this.each(function(){var n=$(this).data("bizCheckbox");if(n){if("string"==typeof e&&"function"==typeof n[e]&&void 0!==(t=n[e].apply(n,Array.prototype.slice.call(a,1))))return!1}else s(this)&&(void 0===e||jQuery.isPlainObject(e))&&$(this).data("bizCheckbox",new i(this,e))}),void 0!==t?t:this}}),e.exports=i},function(e,i){function s(e,t){this.main=e,this.$main=$(this.main);var i={customClass:"",position:"fixed",draggable:!1,theme:window.bizui.theme,title:"",buttons:[],destroyOnClose:!1};this.options=$.extend(i,t||{}),this.init(this.options)}var a=t(0),n=2e3;s.prototype={init:function(e){this.$container=$('<div style="display:none;"></div>'),this.$mask=$('<div class="biz-mask" style="display:none;"></div>'),this.$container.appendTo("body").after(this.$mask);var t=this;this.$container.addClass(["biz-dialog",e.customClass,"biz-dialog-"+e.theme].join(" ")).html(['<div class="biz-dialog-title">','<span class="biz-dialog-title-text">',this.$main.attr("data-title")||e.title,"</span>",'<i class="biz-dialog-close biz-icon">&#xe5cd;</i></div>','<div class="biz-dialog-content"></div>','<div class="biz-dialog-bottom"></div>'].join("")).on("click.bizDialog",".biz-dialog-close",function(){t.close()}),this.$container.find(".biz-dialog-content").append(this.$main.show()),this.updateButtons(e.buttons);var i,s=void 0!==e.width?Math.max(parseInt(e.width,10),320):320;void 0!==e.height?i=Math.max(parseInt(e.height,10),150):(this.$container.show(),i=Math.max(this.$container.height(),150),this.$container.hide()),this.$container.css({width:s,height:i,position:e.position,marginLeft:-Math.floor(s/2),marginTop:-Math.floor(Math.min(i,$(window).height())/2)}),this.$container.find(".biz-dialog-content").css({height:i-150}),e.draggable&&(this.draggable=new a(this.$container[0],{handle:this.$container.find(".biz-dialog-title").addClass("biz-draggble")[0],setPosition:"absolute"===e.position,limit:{x:[0,$("body").width()-s],y:[0,$("body").height()-i]}}),this.$container.css({margin:0,display:"none",left:Math.floor(($(window).width()-s)/2),top:i<$(window).height()?Math.floor(($(window).height()-i)/2):0}))},open:function(){var e=this.options.zIndex||++n;this.$mask.css({zIndex:e-1}).show(),this.$container.css({zIndex:e}).show(),"absolute"===this.options.position&&this.$container.css({top:this.$container.position().top+document.body.scrollTop})},close:function(){"function"==typeof this.options.onBeforeClose&&!1===this.options.onBeforeClose()||(this.$container.hide(),this.$mask.hide(),void 0===this.options.zIndex&&n--,this.options.destroyOnClose&&this.destroy())},updateButtons:function(e){e=e||[];var t=this.$container.find(".biz-dialog-bottom"),i=this;t.find("button").bizButton("destroy").off().remove(),$.each(e,function(e,s){var a=$("<button></button>").appendTo(t).bizButton(s);s.onClick&&a.click(function(e){s.onClick.call(i,e)})})},title:function(e){var t=this.$container.find(".biz-panel-title-text");if(void 0===e)return t.html();t.html(e)},destroy:function(){this.options.draggable&&this.draggable.destroy(),this.$container.off("click.bizDialog"),this.$container.find(".biz-dialog-bottom button").bizButton("destroy").off(),this.$mask.remove(),this.$container.remove(),this.$main.data("bizDialog",null)}};var r=function(e){jQuery.isPlainObject(e)||(e={content:e});var t={content:"",okText:"确定"};e=$.extend(t,e||{});var i=$('<div style="display:none;" class="biz-alert"><i class="biz-icon">&#xe001;</i><div>'+e.content+"</div></div>");i.appendTo("body").bizDialog({destroyOnClose:!0,title:e.title,theme:e.theme,buttons:[{text:e.okText,theme:e.theme,onClick:function(){this.close()}}]}),i.bizDialog("open")},o=function(e){var t={content:"",okText:"确定",cancelText:"取消"};e=$.extend(t,e||{});var i=$('<div style="display:none;" class="biz-confirm"><i class="biz-icon">&#xe8fd;</i><div>'+e.content+"</div></div>");i.appendTo("body").bizDialog({destroyOnClose:!0,title:e.title,theme:e.theme,buttons:[{text:e.okText,theme:e.theme,onClick:function(){"function"==typeof e.onOK&&!1===e.onOK()||this.close()}},{text:e.cancelText,theme:"gray",onClick:function(){this.close()}}]}),i.bizDialog("open")};$.extend($.fn,{bizDialog:function(e){var t,i=arguments;return this.each(function(){var a=$(this).data("bizDialog");if(a){if("string"==typeof e&&"function"==typeof a[e]&&void 0!==(t=a[e].apply(a,Array.prototype.slice.call(i,1))))return!1}else(void 0===e||jQuery.isPlainObject(e))&&$(this).data("bizDialog",new s(this,e))}),void 0!==t?t:this}}),e.exports={alert:r,confirm:o}},function(e,t){function i(e,t){this.main=e,this.$main=$(this.main);var i={alignX:"left",alignY:"bottom",customClass:"",offsetX:0,offsetY:0};this.options=$.extend(i,t||{}),this.init(this.options)}i.prototype={init:function(e){if(void 0!==e.trigger){this.$container=$('<div style="display:none;"></div>'),this.$container.addClass("biz-dropdown "+e.customClass).appendTo("body").append(this.$main.show()),this.$trigger=$(e.trigger);var t=this;this.$trigger.on("click.bizDropDown",function(){t.toggle()})}},toggle:function(){"none"===this.$container.css("display")?this.open():this.close()},open:function(){if("function"!=typeof this.options.onBeforeOpen||!1!==this.options.onBeforeOpen()){this.$container.show();var e,t,i=this.$trigger.position();"left"===this.options.alignX?e=i.left+this.options.offsetX:"right"===this.options.alignX&&(e=i.left+this.$trigger.outerWidth()-this.$container.outerWidth()+this.options.offsetX),"bottom"==this.options.alignY?t=i.top+this.$trigger.outerHeight()+this.options.offsetY:"top"==this.options.alignY&&(t=i.top-this.$container.outerHeight()+this.options.offsetY),this.$container.css({left:e,top:t,zIndex:this.options.zIndex||this.$trigger.css("zIndex")})}},close:function(){"function"==typeof this.options.onBeforeClose&&!1===this.options.onBeforeClose()||this.$container.hide()},destroy:function(){this.$trigger.off("click.bizDropDown"),this.$container.remove(),this.$main.data("bizDialog",null)}},$.extend($.fn,{bizDropDown:function(e){var t,s=arguments;return this.each(function(){var a=$(this).data("bizDialog");if(a){if("string"==typeof e&&"function"==typeof a[e]&&void 0!==(t=a[e].apply(a,Array.prototype.slice.call(s,1))))return!1}else(void 0===e||jQuery.isPlainObject(e))&&$(this).data("bizDialog",new i(this,e))}),void 0!==t?t:this}}),e.exports=i},function(e,i){function s(e,t){this.main=e,this.$main=$(this.main);var i={theme:window.bizui.theme,customClass:""};this.options=$.extend(i,t||{}),this.init(this.options)}function a(e){var t=e.getAttribute("type");return 1===e.nodeType&&"input"===e.tagName.toLowerCase()&&(!t||"text"===t.toLowerCase()||"password"===t.toLowerCase())}t(2);s.prototype={init:function(e){this.$main.addClass("biz-input "+e.customClass),this.$main.placeholder(),e.disabled&&this.disable(),this.$main.on("mouseover.bizInput",function(){$(this).addClass("biz-input-hover")}).on("mouseout.bizInput",function(){$(this).removeClass("biz-input-hover")}).on("focus.bizInput",function(){$(this).addClass("biz-input-focus-"+e.theme)}).on("blur.bizInput",function(){$(this).removeClass("biz-input-focus-"+e.theme)}).on("keydown.bizInput",function(e){if(13===e.keyCode)return $(this).trigger("enter",$(this).val()),!1})},enable:function(){this.main.disabled=!1,this.$main.removeClass("biz-input-disable")},disable:function(){this.main.disabled=!0,this.$main.addClass("biz-input-disable")},destroy:function(){this.$main.removeClass(["biz-input",this.options.customClass,"biz-input-disable"].join(" ")),this.$main.off("keydown.bizInput").off("mouseover.bizInput").off("mouseout.bizInput").off("focus.bizInput").off("blur.bizInput"),this.$main.data("bizInput",null)}},$.extend($.fn,{bizInput:function(e){var t,i=arguments;return this.each(function(){var n=$(this).data("bizInput");if(n){if("string"==typeof e&&"function"==typeof n[e]&&void 0!==(t=n[e].apply(n,Array.prototype.slice.call(i,1))))return!1}else a(this)&&(void 0===e||jQuery.isPlainObject(e))&&$(this).data("bizInput",new s(this,e))}),void 0!==t?t:this}}),e.exports=s},function(e,i){function s(e,t){}t(11),s.prototype={destroy:function(){},disable:function(){},enable:function(){},getPageCount:function(){},getPageNumber:function(){},getPageSize:function(){},prevPage:function(){},nextPage:function(){},setPageNumber:function(e){},setPageSize:function(e){},setTotalNumber:function(e,t){}},$.extend($.fn,{bizPage:$.fn.pagination}),e.exports=s},function(e,t){function i(e,t){this.main=e,this.$main=$(this.main);var i={customClass:"",marginLeft:200,speed:300,theme:window.bizui.theme,title:"",buttons:[],destroyOnClose:!1};this.options=$.extend(i,t||{}),this.init(this.options)}var s=1e3;i.prototype={init:function(e){this.$container=$('<div style="display:none;"></div>'),this.$mask=$('<div class="biz-mask" style="display:none;"></div>'),this.$container.appendTo("body").after(this.$mask);var t=this;this.$container.addClass(["biz-panel",e.customClass,"biz-panel-"+e.theme].join(" ")).html(['<div class="biz-panel-margin"></div>','<div class="biz-panel-body">','<div class="biz-panel-title">','<span class="biz-panel-title-text">',this.$main.attr("data-title")||e.title,"</span>",'<i class="biz-panel-close biz-icon">&#xe5cd;</i></div>','<div class="biz-panel-content"></div>','<div class="biz-panel-bottom"></div></div>'].join("")).on("click.bizPanel",".biz-panel-close",function(){t.close()}),this.$container.find(".biz-panel-content").append(this.$main.show()),this.updateButtons(e.buttons),this.$container.find(".biz-panel-margin").css({width:e.marginLeft})},open:function(){$("body").css({overflow:"hidden"});var e=this.options.zIndex||++s;this.$mask.css({zIndex:e-1}).show();var t=this;this.$container.css({zIndex:e}).show().animate({left:0},this.options.speed,function(){t.$container.find(".biz-panel-body")[0].scrollTop=0})},close:function(){if("function"!=typeof this.options.onBeforeClose||!1!==this.options.onBeforeClose()){var e=this;this.$container.animate({left:"100%"},this.options.speed,function(){e.$container.hide(),e.$mask.hide(),$("body").css({overflow:"visible"})}),void 0===this.options.zIndex&&s--,this.options.destroyOnClose&&this.destroy()}},updateButtons:function(e){e=e||[];var t=this.$container.find(".biz-panel-bottom"),i=this;t.find("button").bizButton("destroy").off().remove(),$.each(e,function(e,s){var a=$("<button></button>").appendTo(t).bizButton(s);s.onClick&&a.click(function(e){s.onClick.call(i,e)})})},title:function(e){var t=this.$container.find(".biz-panel-title-text");if(void 0===e)return t.html();t.html(e)},destroy:function(){this.$container.off("click.bizPanel"),this.$container.find(".biz-panel-bottom button").bizButton("destroy").off(),this.$mask.remove(),this.$container.remove(),this.$main.data("bizPanel",null)}},$.extend($.fn,{bizPanel:function(e){var t,s=arguments;return this.each(function(){var a=$(this).data("bizPanel");if(a){if("string"==typeof e&&"function"==typeof a[e]&&void 0!==(t=a[e].apply(a,Array.prototype.slice.call(s,1))))return!1}else(void 0===e||jQuery.isPlainObject(e))&&$(this).data("bizPanel",new i(this,e))}),void 0!==t?t:this}}),e.exports=i},function(e,t){function i(e,t){this.main=e,this.$main=$(this.main),this.$group=$('input[name="'+this.$main.attr("name")+'"]');var i={theme:window.bizui.theme};this.options=$.extend(i,t||{}),this.init(this.options)}function s(e){return 1===e.nodeType&&"input"===e.tagName.toLowerCase()&&"radio"===e.getAttribute("type").toLowerCase()}var a="biz-radio-unchecked",n="biz-radio-checked";i.prototype={init:function(e){var t=this.$main.attr("title"),i=this.$main.attr("id")||"";this.$main.after('<label for="'+i+'"><i class="biz-icon"></i>'+t+"</label>").hide(),this.$label=this.$main.next(),this.defaultClass="biz-label biz-label-"+e.theme,this.$label.addClass(this.defaultClass),this.$icon=this.$label.children("i"),this.main.checked?(this.$label.addClass(this.main.disabled?"biz-radio-checked-disabled":n),this.$icon.html("&#xe837;")):(this.$label.addClass(this.main.disabled?"biz-radio-unchecked-disabled":a),this.$icon.html("&#xe836;"));var s=this;this.$label.on("mouseover.bizRadio",function(){s.main.disabled||$(this).addClass(s.main.checked?"biz-radio-checked-hover":"biz-radio-unchecked-hover")}).on("mouseout.bizRadio",function(){s.main.disabled||$(this).removeClass(s.main.checked?"biz-radio-checked-hover":"biz-radio-unchecked-hover")}).on("click.bizRadio",function(){s.main.disabled||(s.$group.bizRadio("uncheck"),$(this).attr("class",[s.defaultClass,n,"biz-radio-checked-hover"].join(" ")),s.$icon.html("&#xe837;"),""===i&&(s.main.checked=!0))})},check:function(){this.$group.bizRadio("uncheck"),this.main.checked=!0,this.$label.attr("class",this.defaultClass+" "+(this.main.disabled?"biz-radio-checked-disabled":n)),this.$icon.html("&#xe837;")},uncheck:function(){this.main.checked=!1,this.$label.attr("class",this.defaultClass+" "+(this.main.disabled?"biz-radio-unchecked-disabled":a)),this.$icon.html("&#xe836;")},enable:function(){this.main.disabled=!1,this.$label.attr("class",this.defaultClass+" "+(this.main.checked?n:a))},disable:function(){this.main.disabled=!0,this.$label.attr("class",this.defaultClass+" "+(this.main.checked?"biz-radio-checked-disabled":"biz-radio-unchecked-disabled"))},val:function(){var e="";return this.$group.each(function(t,i){if(i.checked)return e=$(i).val(),!1}),e},destroy:function(){this.$main.show(),this.$label.off("mouseover.bizRadio").off("mouseout.bizRadio").off("click.bizRadio").remove(),this.$main.data("bizRadio",null)}},$.extend($.fn,{bizRadio:function(e){var t,a=arguments;return this.each(function(){var n=$(this).data("bizRadio");if(n){if("string"==typeof e&&"function"==typeof n[e]&&void 0!==(t=n[e].apply(n,Array.prototype.slice.call(a,1))))return!1}else s(this)&&(void 0===e||jQuery.isPlainObject(e))&&$(this).data("bizRadio",new i(this,e))}),void 0!==t?t:this}}),e.exports=i},function(e,i){function s(e,t){}t(10),s.prototype={destroy:function(){},refresh:function(){},open:function(){},close:function(){}},$.extend($.fn.selectric.defaults,{maxHeight:240}),$.extend($.fn,{bizSelect:$.fn.selectric}),e.exports=s},function(e,t){function i(e,t){this.main=e,this.$main=$(this.main);var i={theme:window.bizui.theme};this.options=$.extend(i,t||{}),this.init(this.options)}function s(e){return 1===e.nodeType&&"input"===e.tagName.toLowerCase()&&"checkbox"===e.getAttribute("type").toLowerCase()}var a="biz-switch-checked";i.prototype={init:function(e){var t=this.$main.attr("title"),i=this.$main.attr("id")||"",s=e.theme,n='<label class="biz-switch-container biz-switch-container-'+s+'" for="'+i+'"><span class="biz-switch" id=""><span class="biz-switch-inner"></span></span><span>'+t+"</span></label>";this.$main.after(n).hide(),this.$switchContainer=this.$main.next(),this.$switchDom=this.$switchContainer.find(".biz-switch"),this.$main.attr("checked")?this.$switchDom.addClass(a):this.$switchDom.addClass("biz-switch");var r=this;this.$switchContainer.on("click.bizSwitch",function(){r.main.disabled||(r.main.checked?r.$switchDom.attr("class",["biz-switch"].join(" ")):r.$switchDom.attr("class",["biz-switch",a].join(" ")),""===i&&(r.main.checked=!r.main.checked))})},off:function(){this.main.checked=!1,this.$switchDom.attr("class","biz-switch")},on:function(){this.main.checked=!0,this.$switchDom.attr("class",["biz-switch",a].join(" "))},disable:function(){this.main.disabled=!0,this.$switchDom.attr("class","biz-switch"),this.$switchContainer.addClass("biz-switch-container-disable")},enable:function(){this.main.disabled=!1,this.$switchDom.attr("class","biz-switch "+(this.main.checked?a:"")),this.$switchContainer.removeClass("biz-switch-container-disable")},destroy:function(){this.$main.show(),this.$switchContainer.off("click.bizSwitch").remove(),this.$main.data("bizSwitch",null)},
val:function(){return this.$switchDom.hasClass(a)?"on":"off"}},$.extend($.fn,{bizSwitch:function(e){var t,a=arguments;return this.each(function(){var n=$(this).data("bizSwitch");if(n){if("string"==typeof e&&"function"==typeof n[e]&&void 0!==(t=n[e].apply(n,Array.prototype.slice.call(a,1))))return!1}else s(this)&&(void 0===e||jQuery.isPlainObject(e))&&$(this).data("bizSwitch",new i(this,e))}),void 0!==t?t:this}}),e.exports=i},function(e,t){function i(e,t){this.main=e,this.$main=$(this.main);var i={action:"click",customClass:"",selectedIndex:0,theme:window.bizui.theme};this.options=$.extend(i,t||{}),this.init(this.options)}function s(e){return 1===e.nodeType&&"div"===e.tagName.toLowerCase()}i.prototype={init:function(e){this.$main.addClass(["biz-tab",e.customClass,"biz-tab-"+e.theme].join(" ")),this.$tabs=this.$main.children("ul").children("li"),this.$contents=this.$main.children("div").children("div").hide();var t=this;"hover"===e.action&&(e.action="mouseover"),this.$tabs.on(e.action+".bizTab",function(e){if(!$(this).hasClass("active")){var i;t.$tabs.each(function(t,s){if(s===e.target)return i=t,!1}),t.index(i)}}),this.index(e.selectedIndex,!1)},index:function(e,t){var i,s;if(void 0===e){var a=this.options.selectedIndex;return i=$(this.$tabs[a]),s=$(this.$contents[a]),{index:a,title:i.text(),content:s.html()}}this.$tabs.removeClass("active"),this.$contents.hide(),this.options.selectedIndex=e,i=$(this.$tabs[e]).addClass("active"),s=$(this.$contents[e]).show(),(void 0===t||t)&&i.trigger("change",{index:e,title:i.text(),content:s.html()})},destroy:function(){this.$main.removeClass(["biz-tab",this.options.customClass,"biz-tab-"+this.options.theme].join(" ")),this.$tabs.off(this.options.action+".bizTab"),this.$main.data("bizTab",null)}},$.extend($.fn,{bizTab:function(e){var t,a=arguments;return this.each(function(){var n=$(this).data("bizTab");if(n){if("string"==typeof e&&"function"==typeof n[e]&&void 0!==(t=n[e].apply(n,Array.prototype.slice.call(a,1))))return!1}else s(this)&&(void 0===e||jQuery.isPlainObject(e))&&$(this).data("bizTab",new i(this,e))}),void 0!==t?t:this}}),e.exports=i},function(e,i){function s(e,t){this.main=e,this.$main=$(this.main);var i={customClass:"",data:[],noDataContent:'<p><i class="biz-icon">&#xe001;</i> 没有数据</p>',flexible:!1,selectable:!1,defaultSort:"des",lockHead:!1,topOffset:0};this.options=$.extend(i,t||{}),this.init(this.options)}function a(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}t(9);s.prototype={init:function(e){if(this.$main.html(['<div class="biz-table-head-wrap"><table class="biz-table-head"></table></div>','<div class="biz-table-placeholder"></div>','<div class="biz-table-body-wrap"><table class="biz-table-body"></table></div>'].join("")),this.$headWrap=this.$main.find(".biz-table-head-wrap"),this.$bodyWrap=this.$main.find(".biz-table-body-wrap"),this.$placeholder=this.$main.find(".biz-table-placeholder"),this.$tableHead=this.$main.find(".biz-table-head"),this.$tableBody=this.$main.find(".biz-table-body"),this.$tableHead.html(this.createTableHead(e)).addClass(["biz-table",e.customClass].join(" ")),this.$tableBody.html(this.createTableBody(e)).addClass(["biz-table",e.customClass,this.rowSpan>1&&e.data.length>0?"biz-rowspan":""].join(" ")),e.flexible&&(this.$tableHead.addClass("biz-table-flexible"),this.$tableBody.addClass("biz-table-flexible")),e.foot&&e.data.length>0){var t=this.$tableBody.find("tbody"),i=this.createFoot(e);"top"===e.foot&&t.prepend(i),"bottom"===e.foot&&t.append(i)}0===e.data.length&&this.createNoDataContent(),e.selectable&&(e.data.length>0&&this.createSelect(e.data),this.bindSelect()),e.onSort&&this.bindSort();var s=this;this.$headWrap.on("scroll",function(){s.$bodyWrap[0].scrollLeft=this.scrollLeft}),this.$bodyWrap.on("scroll",function(){s.$headWrap[0].scrollLeft=this.scrollLeft}),this.syncWidth(),$(window).on("resize.bizTable",function(){s.syncWidth()}),e.lockHead&&$(window).on("scroll.bizTable",function(){var t=s.$main.offset().top-e.topOffset,i=s.$headWrap.height();$(window).scrollTop()>t?s.hasLocked||(s.$headWrap.css({position:"fixed",top:s.options.topOffset,width:s.$main.width()}),s.$placeholder.css({height:i}),s.hasLocked=!0):s.hasLocked&&(s.$headWrap.css({position:"static",top:"auto",width:"auto"}),s.$placeholder.css({height:0}),s.hasLocked=!1)}),this.$tableBody.editableTableWidget(),e.onValidate&&this.bindValidate(),e.onEdit&&this.bindEdit(),e.onFailEdit&&this.bindFailEdit()},createTableHead:function(e){var t=$("<thead><tr></tr></thead><tbody></tbody>"),i=e.column,s=i.length;this.rowSpan=1;for(var n=0;n<s;n++){var r=i[n];if(void 0===r.visible||r.visible){$.isArray(r.content)||(r.content=[r.content]),r.content.length>this.rowSpan&&(this.rowSpan=r.content.length);var o=$("<th nowrap></th>").attr({width:r.width,field:r.field});e.flexible&&o.removeAttr("nowrap width");var l=!1===r.escapeTitle?r.title:a(r.title);if(r.sortable){var d=$('<div class="sortable"></div>').html(l);r.currentSort&&d.attr(r.currentSort,""),l=d.prop("outerHTML")}t.find("tr").append(o.html(l).prop("outerHTML"))}}return t.prop("outerHTML")},createTableBody:function(e){for(var t=$("<tbody></tbody>"),i=e.column,s=i.length,n=e.data,r=n.length,o=0;o<r;o++){for(var l=$("<tr></tr>"),d=n[o],c=o+1,h=0;h<s;h++){var u=i[h];if(void 0===u.visible||u.visible){$.isArray(u.content)||(u.content=[u.content]);var f=$("<td></td>").attr({align:u.align,width:u.width});u.editable&&1===u.content.length&&f.attr("editable",""),this.rowSpan>1&&1===u.content.length&&f.attr("rowspan",this.rowSpan);var p=u.content[0].apply(this,[d,c,u.field]).toString();f.html(!1===u.escapeContent?p:a(p)).appendTo(l),e.flexible&&f.removeAttr("width")}}if(t.append(l),this.rowSpan>1)for(var _=1;_<this.rowSpan;_++){for(var g=$("<tr></tr>"),m=0;m<s;m++){var x=i[m];if($.isArray(x.content)||(x.content=[x.content]),(void 0===x.visible||x.visible)&&1!==x.content.length){var b=$("<td></td>").attr("align",x.align),v=x.content[_].apply(this,[d,c,x.field]).toString();b.html(!1===x.escapeContent?v:a(v)).appendTo(g),e.flexible&&b.removeAttr("width")}}t.append(g)}}return t.prop("outerHTML")},createFoot:function(e){var t=$('<tr class="sum"></tr>'),i=e.column,s=i.length;e.selectable&&t.append('<td width="24"></td>');for(var n=0;n<s;n++){var r=i[n];if(void 0===r.visible||r.visible){var o=$("<td></td>").attr({align:r.align,width:r.width});e.flexible&&o.removeAttr("width");var l=r.footContent?r.footContent.call(this,r.field).toString():"";o.html(!1===r.escapeContent?l:a(l)).appendTo(t)}}return t.prop("outerHTML")},createNoDataContent:function(){var e=this.options.column.length;$.each(this.options.column,function(t,i){i.visible&&e--}),this.options.selectable&&(e+=1),this.$tableBody.find("tbody").append('<tr class="no-data"><td colspan="'+e+'">'+this.options.noDataContent+"</td></tr>")},createSelect:function(e){var t=!1;if(1===this.rowSpan)this.$tableBody.find('tr[class!="sum"]').each(function(i,s){var a=$('<td width="24" align="center" class="select-col"><input type="checkbox" title=" "></td>');$(this).prepend(a),e[i].disabledSelect?($(this).addClass("select-disabled"),a.find(":checkbox").prop("disabled",!0)):t=!0});else{var i=this,s=0;this.$tableBody.find('tr[class!="sum"]').each(function(a,n){if((a+i.rowSpan)%i.rowSpan==0){var r=$('<td width="24" align="center" class="select-col" rowspan="'+i.rowSpan+'"><input type="checkbox" title=" "></td>');$(this).prepend(r),e[s].disabledSelect?($(this).addClass("select-disabled"),r.find(":checkbox").prop("disabled",!0)):t=!0,s++}})}var a=$('<th nowrap width="24" class="select-col"><input type="checkbox" title=" "></th>');this.$tableHead.find("tr").prepend(a),t||a.find(":checkbox").prop("disabled",!0),this.$main.find(":checkbox").bizCheckbox({theme:"gray"})},bindSelect:function(){var e=this;this.$main.on("click.bizTableSelectAll",".biz-table-head .select-col .biz-label",function(t){if(!$(this).hasClass("biz-checkbox-unchecked-disabled")){var i=$(this).hasClass("biz-checkbox-checked"),s=e.$tableBody.find(".select-col :checkbox").filter(":not(:disabled)"),a=e.$tableBody.find('tr[class!="sum"]').filter('[class!="select-disabled"]');i?(s.bizCheckbox("check"),a.addClass("selected")):(s.bizCheckbox("uncheck"),a.removeClass("selected")),e.options.onSelect&&e.options.onSelect.call(e,e.getSelected(),t)}}).on("click.bizTableSelectOne",".biz-table-body .select-col .biz-label",function(t){if(!$(this).hasClass("biz-checkbox-unchecked-disabled")){var i=$(this).hasClass("biz-checkbox-checked"),s=$(this).parent().parent();i?s.addClass("selected"):s.removeClass("selected");var a=e.$tableBody.find(".select-col .biz-checkbox-checked").length,n=e.$tableBody.find(".select-col :checkbox").filter(":not(:disabled)").length,r=e.$tableHead.find(".select-col :checkbox");a===n?r.bizCheckbox("check"):r.bizCheckbox("uncheck"),e.options.onSelect&&e.options.onSelect.call(e,e.getSelected(),t)}})},getSelectedIndex:function(){var e=this,t=[];return this.$tableBody.find('tr[class!="sum"]').each(function(i,s){$(s).hasClass("selected")&&t.push(e.rowSpan>1?i/e.rowSpan:i)}),t},getSelected:function(){var e=this;return $.map(this.getSelectedIndex(),function(t){return e.options.data[t]})},setSelected:function(e,t,i){var s=this;0===e&&(e=$.map(this.options.data,function(e,t){return t+1})),$.isArray(e)||(e=[e]),$.each(e,function(e,i){var a=s.$tableBody.find("tbody tr:nth-child("+(s.rowSpan>1?i*s.rowSpan:i)+")").filter('[class!="sum"]').filter('[class!="select-disabled"]'),n=a.find(".select-col :checkbox");t?(n.bizCheckbox("check"),a.addClass("selected")):(n.bizCheckbox("uncheck"),a.removeClass("selected"))});var a=s.$tableBody.find(".select-col .biz-checkbox-checked").length,n=s.$tableBody.find(".select-col :checkbox").filter(":not(:disabled)").length,r=s.$tableHead.find(".select-col :checkbox");a===n?r.bizCheckbox("check"):r.bizCheckbox("uncheck"),i&&this.options.onSelect&&this.options.onSelect.call(this,this.getSelected())},getData:function(e){if(void 0!==e){if($.isArray(e)){var t=[],i=this;return $.each(e,function(e,s){var a=i.options.data[s-1];a&&t.push(a)}),0!==t.length?t:null}return this.options.data[e-1]||null}return this.options.data},getColumn:function(){return this.options.column},removeSort:function(){this.$tableHead.find(".sortable").removeAttr("des").removeAttr("asc")},bindSort:function(){var e=this;this.$main.on("click.bizTableSort",".biz-table-head .sortable",function(t){var i=$(this),s=i.parent().attr("field");void 0!==i.attr("des")?(e.removeSort(),i.attr("asc","")):void 0!==i.attr("asc")?(e.removeSort(),i.attr("des","")):(e.removeSort(),i.attr("des"===e.options.defaultSort?"des":"asc","")),e.options.onSort.call(e,{field:s,des:void 0!==i.attr("des"),asc:void 0!==i.attr("asc")},t)})},syncWidth:function(){this.$headWrap.css({}),this.$tableHead.css({})},showColumn:function(e){this.setColumnVisible(e,!0)},hideColumn:function(e){this.setColumnVisible(e,!1)},setColumnVisible:function(e,t){$.isArray(e)||(e=[e]);var i=this;$.each(e,function(e,s){$.each(i.options.column,function(e,i){i.field===s&&(i.visible=t)})}),this.refresh()},updateData:function(e){this.options.data=$.map(e||[],function(e,t){return e}),this.refresh()},updateRow:function(e,t){this.options.data[e-1]=$.extend(!0,{},t),this.refresh()},updateCell:function(e,t,i){this.options.data[e-1][t]=i,this.refresh()},bindValidate:function(){var e=this;this.$main.on("validate","td[editable]",function(t,i){var s=$(this).parent().find("td").index($(this));return e.options.selectable&&(s-=1),e.options.onValidate.call(e,{newValue:i,field:e.options.column[s].field},t)})},bindEdit:function(){var e=this;this.$main.on("change","td[editable]",function(t,i){var s=$(this).parent(),a=s.find("td").index($(this)),n=s.parent().find('tr[class!="sum"]').index(s)/e.rowSpan;e.options.selectable&&(a-=1);var r=e.options.column[a].field;return e.options.data[n][r]=i,e.options.onEdit.call(e,{newValue:i,field:r,item:e.options.data[n],index:n+1},t)})},bindFailEdit:function(){var e=this;this.$main.on("fail","td[editable]",function(t,i){var s=$(this).parent(),a=s.find("td").index($(this)),n=s.parent().find('tr[class!="sum"]').index(s)/e.rowSpan;e.options.selectable&&(a-=1);var r=e.options.column[a].field;return e.options.onFailEdit.call(e,{newValue:i,field:r,item:e.options.data[n],index:n+1},t)})},refresh:function(){var e=this.options;if(this.$main.find(".select-col :checkbox").bizCheckbox("destroy"),this.$tableHead.html(this.createTableHead(e)),this.$tableBody.html(this.createTableBody(e)),e.foot&&e.data.length>0){var t=this.$tableBody.find("tbody"),i=this.createFoot(e);"top"===e.foot&&t.prepend(i),"bottom"===e.foot&&t.append(i)}0===e.data.length&&this.createNoDataContent(),e.selectable&&e.data.length>0&&this.createSelect(e.data),this.$headWrap[0].scrollLeft=this.$bodyWrap[0].scrollLeft=0,this.syncWidth(),this.$tableBody.find("td").prop("tabindex",1)},destroy:function(){this.$main.find(".select-col :checkbox").bizCheckbox("destroy"),this.$main.off("click.bizTableSelectAll").off("click.bizTableSelectOne").off("click.bizTableSort").off("click.bizTableEdit").off("validate").off("change").off("fail"),this.$headWrap.off(),this.$bodyWrap.off(),$(window).off("scroll.bizTable").off("resize.bizTable").off("resize.bizTableEdit"),$(".biz-table-editor").off().remove(),this.$main.empty(),this.$main.data("bizTable",null)}},$.extend($.fn,{bizTable:function(e){var t,i=arguments;return this.each(function(){var a=$(this).data("bizTable");if(a){if("string"==typeof e&&"function"==typeof a[e]&&void 0!==(t=a[e].apply(a,Array.prototype.slice.call(i,1))))return!1}else(void 0===e||jQuery.isPlainObject(e))&&$(this).data("bizTable",new s(this,e))}),void 0!==t?t:this}}),e.exports=s},function(e,i){function s(e,t){this.main=e,this.$main=$(this.main);var i={theme:window.bizui.theme,customClass:""};this.options=$.extend(i,t||{}),this.init(this.options)}function a(e){return 1===e.nodeType&&"textarea"===e.tagName.toLowerCase()}t(2);s.prototype={init:function(e){this.$main.addClass("biz-textarea "+e.customClass),this.$main.placeholder(),e.disabled&&this.disable(),this.$main.on("mouseover.bizTextarea",function(){$(this).addClass("biz-textarea-hover")}).on("mouseout.bizTextarea",function(){$(this).removeClass("biz-textarea-hover")}).on("focus.bizTextarea",function(){$(this).addClass("biz-textarea-focus-"+e.theme)}).on("blur.bizTextarea",function(){$(this).removeClass("biz-textarea-focus-"+e.theme)})},enable:function(){this.main.disabled=!1,this.$main.removeClass("biz-textarea-disable")},disable:function(){this.main.disabled=!0,this.$main.addClass("biz-textarea-disable")},length:function(){return this.$main.val().replace(/\r?\n/g,"").length},destroy:function(){this.$main.removeClass(["biz-textarea",this.options.customClass,"biz-textarea-disable"].join(" ")),this.$main.off("mouseover.bizTextarea").off("mouseout.bizTextarea").off("focus.bizTextarea").off("blur.bizTextarea"),this.$main.data("bizTextarea",null)}},$.extend($.fn,{bizTextarea:function(e){var t,i=arguments;return this.each(function(){var n=$(this).data("bizTextarea");if(n){if("string"==typeof e&&"function"==typeof n[e]&&void 0!==(t=n[e].apply(n,Array.prototype.slice.call(i,1))))return!1}else a(this)&&(void 0===e||jQuery.isPlainObject(e))&&$(this).data("bizTextarea",new s(this,e))}),void 0!==t?t:this}}),e.exports=s},function(e,t){function i(e,t){this.main=e,this.$main=$(this.main);var i={theme:window.bizui.theme,customClass:""};this.options=$.extend(i,t||{}),this.init(this.options)}function s(e){return 1===e.nodeType&&"div"===e.tagName.toLowerCase()}i.prototype={init:function(e){this.$main.addClass(["biz-textline",e.customClass,"biz-textline-"+e.theme].join(" ")).html("<div><pre></pre></div><textarea></textarea>");var t=e.width||this.$main.width(),i=e.height||this.$main.height();t=Math.max(t,200),i=Math.max(i,52),this.$main.css({width:t,height:i}),this.$line=this.$main.children("div").css({height:i-10}),this.$lineNumber=this.$main.find("pre"),this.$textarea=this.$main.children("textarea").css({width:t-36,height:i-12}),e.disabled&&this.disable();var s=this;this.$textarea.on("mouseover.bizTextline",function(){$(this).addClass("biz-textline-hover")}).on("mouseout.bizTextline",function(){$(this).removeClass("biz-textline-hover")}).on("focus.bizTextline",function(){$(this).addClass("biz-textline-focus-"+e.theme)}).on("blur.bizTextline",function(){$(this).removeClass("biz-textline-focus-"+e.theme)}).on("keyup.bizTextline.render",function(e){s.renderLineNumber(e.target.scrollTop)}).on("scroll.bizTextline",function(e){s.scrollLineNumber(e.target.scrollTop)}),parseInt(e.maxLine,10)>=1&&this.$textarea.on("keyup.bizTextline.maxLine",function(t){if(13===t.keyCode){var i=s.valArray(),a=i.length;a>e.maxLine&&(i.splice(e.maxLine,a-e.maxLine),s.valArray(i))}}),this.renderLineNumber(0),"string"==typeof e.val&&this.val(e.val),jQuery.isArray(e.valArray)&&this.valArray(e.valArray)},enable:function(){this.$textarea[0].disabled=!1,this.$textarea.removeClass("biz-textline-disable")},disable:function(){this.$textarea[0].disabled=!0,this.$textarea.addClass("biz-textline-disable")},length:function(){return this.$textarea.val().replace(/\r?\n/g,"").length},val:function(e){if(void 0===e)return this.$textarea.val();if(parseInt(this.options.maxLine,10)>=1){var t=e.split("\n"),i=t.length;i>this.options.maxLine&&(t.splice(this.options.maxLine,i-this.options.maxLine),e=t.join("\n"))}this.$textarea.val(e),this.renderLineNumber(0)},valArray:function(e){if(void 0===e)return this.val().split("\n");if(parseInt(this.options.maxLine,10)>=1){var t=e.length;t>this.options.maxLine&&e.splice(this.options.maxLine,t-this.options.maxLine)}this.$textarea.val(e.join("\n")),this.renderLineNumber(0)},destroy:function(){this.$textarea.off("mouseover.bizTextline").off("mouseout.bizTextline").off("focus.bizTextline").off("blur.bizTextline").off("keyup.bizTextline").off("scroll.bizTextline"),this.$main.removeClass(["biz-textline",this.options.customClass,"biz-textline-"+this.options.theme].join(" ")).empty(),this.$main.data("bizTextline",null)},renderLineNumber:function(e){for(var t=this.$textarea.val().split("\n").length,i="1",s=2;s<=t;s++)i+="\n"+s;this.$lineNumber.html(i),this.scrollLineNumber(e)},scrollLineNumber:function(e){this.$lineNumber.css({top:5-e})}},$.extend($.fn,{bizTextline:function(e){var t,a=arguments;return this.each(function(){var n=$(this).data("bizTextline");if(n){if("string"==typeof e&&"function"==typeof n[e]&&void 0!==(t=n[e].apply(n,Array.prototype.slice.call(a,1))))return!1}else s(this)&&(void 0===e||jQuery.isPlainObject(e))&&$(this).data("bizTextline",new i(this,e))}),void 0!==t?t:this}}),e.exports=i},function(e,i){function s(e){e.theme&&(e.tooltipClass="biz-tooltip-"+e.theme),e.removeAll&&$(document).off("focus.tips","**"),$.tips(e)}t(5),e.exports=s},function(e,t){function i(e,t){this.main=e,this.$main=$(this.main);var i={theme:window.bizui.theme,customClass:"",dataSource:[],keyMap:{id:"id",title:"title",chosen:"chosen"},titles:["请选择","已选择"],noContent:"请新增选项"};this.options=$.extend(i,t||{}),this.init(this.options)}i.prototype={init:function(e){var t=$('\t\t\t<div class="biz-transfer-list">\t\t\t\t<div class="biz-transfer-list-header">\t\t\t\t\t<input type="checkbox" title="'+e.titles[0]+'">\t\t\t\t</div>\t\t\t\t<div class="biz-transfer-list-body"><ul class="biz-transfer-list-content"></ul></div>\t\t\t</div>\t\t\t<div class="biz-transfer-operation">\t\t\t\t<button class="biz-transfer-move-right"><i class="biz-icon">&#xe315;</i></button>\t\t\t\t<button class="biz-transfer-move-left"><i class="biz-icon">&#xe314;</i></button>\t\t\t</div>\t\t\t<div class="biz-transfer-list">\t\t\t\t<div class="biz-transfer-list-header">\t\t\t\t\t<input type="checkbox" title="'+e.titles[1]+'">\t\t\t\t</div>\t\t\t\t<div class="biz-transfer-list-body"><ul class="biz-transfer-list-content"></ul></div>\t\t\t</div>\t\t');this.$main.addClass("biz-transfer "+e.customClass).append(t);var i=this.$main.find(".biz-transfer-list-content");this.$leftListBody=$(i[0]),this.$rightListBody=$(i[1]),this.render(e.dataSource)},render:function(e){0===e.length&&this.$leftListBody.html('<li class="biz-transfer-list-content-item">'+this.options.noContent+"</li>"),this.addItems(e),this.bindSelect(),this.createButton()},addItems:function(e){var t=this.formatInput(e),i=this.getTargets(t),s=this;$.each(t,function(e,t){s.$leftListBody.append(['<li class="biz-transfer-list-content-item">','<input type="checkbox" data-id="'+t.id+'" title="'+t.title+'" '+(t.chosen?"disabled":"")+"/></li>"].join(""))}),$.each(i,function(e,t){s.$rightListBody.append(['<li class="biz-transfer-list-content-item">','<input type="checkbox" data-id="'+t.id+'" title="'+t.title+'" /></li>'].join(""))}),this.$main.find(":checkbox").bizCheckbox({theme:this.options.theme})},formatInput:function(e){var t=this.options.keyMap;return $.map(e,function(e){return{id:e[t.id],title:e[t.title],chosen:!!e[t.chosen]}})},getTargets:function(e){return e.filter(function(e){return!0===e.chosen})},bindSelect:function(){this.$main.on("click.bizTransferSelectAll",".biz-transfer-list-header .biz-label",function(e){var t=$(this).hasClass("biz-checkbox-checked"),i=$(this).parent().next().find(":checkbox").filter(":not(:disabled)");t?i.bizCheckbox("check"):i.bizCheckbox("uncheck")}).on("click.bizTransferSelectOne",".biz-transfer-list-content .biz-label",function(e){var t=$(this).parent().parent(),i=t.find(".biz-checkbox-checked").length,s=t.find(":checkbox").filter(":not(:disabled)").length,a=t.parent().prev().find(":checkbox");i===s&&0!==i?a.bizCheckbox("check"):a.bizCheckbox("uncheck")})},createButton:function(){this.$main.find("button").bizButton({theme:this.options.theme});var e=this;this.$main.on("click.bizTransferMoveRight",".biz-transfer-move-right",function(t){var i=e.$leftListBody.find(":checked");i.length>0&&e.moveRight(i,t)}).on("click.bizTransferMoveLeft",".biz-transfer-move-left",function(t){var i=e.$rightListBody.find(":checked");i.length>0&&e.moveLeft(i,t)})},moveRight:function(e,t){var i=[];$.each(e,function(e,t){i.push({id:$(t).attr("data-id"),title:$(t).next()[0].lastChild.nodeValue}),$(t).bizCheckbox("disable").bizCheckbox("uncheck")}),this.$main.find(".biz-transfer-list-header :checkbox").bizCheckbox("uncheck");var s=this;$.each(i,function(e,t){s.$rightListBody.append(['<li class="biz-transfer-list-content-item">','<input type="checkbox" data-id="'+t.id+'" title="'+t.title+'" /></li>'].join(""))}),this.$rightListBody.find(":checkbox").bizCheckbox({theme:this.options.theme}),this.options.onChange&&this.options.onChange.call(this,i,t)},moveLeft:function(e,t){var i=[];$.each(e,function(e,t){i.push({id:$(t).attr("data-id"),title:$(t).next()[0].lastChild.nodeValue}),$(t).bizCheckbox("destroy").parent().remove()}),$(this.$main.find(".biz-transfer-list-header :checkbox")[0]).bizCheckbox("uncheck");var s=this;$.each(i,function(e,t){s.$leftListBody.find(':checkbox[data-id="'+t.id+'"]').bizCheckbox("enable")}),this.options.onChange&&this.options.onChange.call(this,i,t)},add:function(e){this.addItems(e),$(this.$main.find(".biz-transfer-list-header :checkbox")[0]).bizCheckbox("uncheck")},value:function(){var e=this.$rightListBody.find(":checkbox"),t=this.options.keyMap;return $.map(e,function(e,i){var s={};return s[t.id]=$(e).attr("data-id"),s[t.title]=$(e).next()[0].lastChild.nodeValue,s})},update:function(e){this.$leftListBody.find(":checkbox").bizCheckbox("destroy"),this.$rightListBody.find(":checkbox").bizCheckbox("destroy"),this.$leftListBody.empty(),this.$rightListBody.empty(),this.$main.find(".biz-transfer-list-header :checkbox").bizCheckbox("uncheck"),0===e.length&&this.$leftListBody.html('<li class="biz-transfer-list-content-item">'+this.options.noContent+"</li>"),this.addItems(e)},select:function(e){var t=this,i=[];$.each(e,function(e,s){var a=t.$leftListBody.find(':checkbox[data-id="'+s+'"]');a.length>0&&!a.prop("disabled")&&i.push(a[0])}),i.length>0&&this.moveRight(i,null)},unselect:function(e){var t=this,i=[];$.each(e,function(e,s){var a=t.$rightListBody.find(':checkbox[data-id="'+s+'"]');a.length>0&&i.push(a[0])}),i.length>0&&this.moveLeft(i,null)},destroy:function(){this.$main.removeClass("biz-transfer "+this.options.customClass).find(":checkbox").bizCheckbox("destroy").find("button").bizButton("destroy"),this.$main.off("click.bizTransferSelectAll").off("click.bizTransferSelectOne").off("click.bizTransferMoveRight").off("click.bizTransferMoveLeft"),this.$main.empty(),this.$main.data("bizTransfer",null)}},$.extend($.fn,{bizTransfer:function(e){var t,s=arguments;return this.each(function(){var a=$(this).data("bizTransfer");if(a){if("string"==typeof e&&"function"==typeof a[e]&&void 0!==(t=a[e].apply(a,Array.prototype.slice.call(s,1))))return!1}else(void 0===e||jQuery.isPlainObject(e))&&$(this).data("bizTransfer",new i(this,e))}),void 0!==t?t:this}}),e.exports=i},function(e,i){function s(e,t){}t(4),$.extend($.jstree.defaults.core,{strings:{"Loading ...":"加载中 ..."}}),$.extend($.fn,{bizTree:$.fn.jstree}),e.exports=s},function(e,i){function s(e,t){}t(12),s.prototype={destroy:function(){},collapseAll:function(){},collapseNode:function(e){},expandAll:function(){},expandNode:function(e){},loadBranch:function(e,t){},move:function(e,t){},node:function(e){},reveal:function(e){},removeNode:function(e){},unloadBranch:function(e){},sortBranch:function(e,t){}},$.extend($.fn,{bizTreeTable:$.fn.treetable}),e.exports=s}],t(6)});